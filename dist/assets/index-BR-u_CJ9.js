function AN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ba(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Sx={exports:{}},Hu={},Ex={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za=Symbol.for("react.element"),ON=Symbol.for("react.portal"),IN=Symbol.for("react.fragment"),jN=Symbol.for("react.strict_mode"),RN=Symbol.for("react.profiler"),MN=Symbol.for("react.provider"),PN=Symbol.for("react.context"),DN=Symbol.for("react.forward_ref"),LN=Symbol.for("react.suspense"),$N=Symbol.for("react.memo"),BN=Symbol.for("react.lazy"),Ey=Symbol.iterator;function zN(t){return t===null||typeof t!="object"?null:(t=Ey&&t[Ey]||t["@@iterator"],typeof t=="function"?t:null)}var Cx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_x=Object.assign,Nx={};function Qi(t,e,n){this.props=t,this.context=e,this.refs=Nx,this.updater=n||Cx}Qi.prototype.isReactComponent={};Qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Tx(){}Tx.prototype=Qi.prototype;function sm(t,e,n){this.props=t,this.context=e,this.refs=Nx,this.updater=n||Cx}var im=sm.prototype=new Tx;im.constructor=sm;_x(im,Qi.prototype);im.isPureReactComponent=!0;var Cy=Array.isArray,Ax=Object.prototype.hasOwnProperty,om={current:null},Ox={key:!0,ref:!0,__self:!0,__source:!0};function Ix(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ax.call(e,r)&&!Ox.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:za,type:t,key:i,ref:o,props:s,_owner:om.current}}function FN(t,e){return{$$typeof:za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function am(t){return typeof t=="object"&&t!==null&&t.$$typeof===za}function UN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _y=/\/+/g;function Bd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UN(""+t.key):e.toString(36)}function Hl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case za:case ON:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Bd(o,0):r,Cy(s)?(n="",t!=null&&(n=t.replace(_y,"$&/")+"/"),Hl(s,e,n,"",function(c){return c})):s!=null&&(am(s)&&(s=FN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(_y,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Cy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Bd(i,a);o+=Hl(i,e,n,l,s)}else if(l=zN(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Bd(i,a++),o+=Hl(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nl(t,e,n){if(t==null)return t;var r=[],s=0;return Hl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function VN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},Wl={transition:null},HN={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:om};function jx(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:nl,forEach:function(t,e,n){nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nl(t,function(){e++}),e},toArray:function(t){return nl(t,function(e){return e})||[]},only:function(t){if(!am(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Qi;re.Fragment=IN;re.Profiler=RN;re.PureComponent=sm;re.StrictMode=jN;re.Suspense=LN;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HN;re.act=jx;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_x({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=om.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ax.call(e,l)&&!Ox.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:za,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:PN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MN,_context:t},t.Consumer=t};re.createElement=Ix;re.createFactory=function(t){var e=Ix.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:DN,render:t}};re.isValidElement=am;re.lazy=function(t){return{$$typeof:BN,_payload:{_status:-1,_result:t},_init:VN}};re.memo=function(t,e){return{$$typeof:$N,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Wl.transition;Wl.transition={};try{t()}finally{Wl.transition=e}};re.unstable_act=jx;re.useCallback=function(t,e){return kt.current.useCallback(t,e)};re.useContext=function(t){return kt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};re.useEffect=function(t,e){return kt.current.useEffect(t,e)};re.useId=function(){return kt.current.useId()};re.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return kt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};re.useRef=function(t){return kt.current.useRef(t)};re.useState=function(t){return kt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return kt.current.useTransition()};re.version="18.3.1";Ex.exports=re;var C=Ex.exports;const ae=rm(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WN=C,qN=Symbol.for("react.element"),GN=Symbol.for("react.fragment"),KN=Object.prototype.hasOwnProperty,JN=WN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YN={key:!0,ref:!0,__self:!0,__source:!0};function Rx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KN.call(e,r)&&!YN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:qN,type:t,key:i,ref:o,props:s,_owner:JN.current}}Hu.Fragment=GN;Hu.jsx=Rx;Hu.jsxs=Rx;Sx.exports=Hu;var p=Sx.exports,of={},Mx={exports:{}},qt={},Px={exports:{}},Dx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,O){var z=j.length;j.push(O);e:for(;0<z;){var ee=z-1>>>1,J=j[ee];if(0<s(J,O))j[ee]=O,j[z]=J,z=ee;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var O=j[0],z=j.pop();if(z!==O){j[0]=z;e:for(var ee=0,J=j.length,Ce=J>>>1;ee<Ce;){var Ke=2*(ee+1)-1,Kt=j[Ke],Je=Ke+1,Et=j[Je];if(0>s(Kt,z))Je<J&&0>s(Et,Kt)?(j[ee]=Et,j[Je]=z,ee=Je):(j[ee]=Kt,j[Ke]=z,ee=Ke);else if(Je<J&&0>s(Et,z))j[ee]=Et,j[Je]=z,ee=Je;else break e}}return O}function s(j,O){var z=j.sortIndex-O.sortIndex;return z!==0?z:j.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(j){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=j)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function k(j){if(g=!1,x(j),!m)if(n(l)!==null)m=!0,Y(w);else{var O=n(c);O!==null&&Z(k,O.startTime-j)}}function w(j,O){m=!1,g&&(g=!1,y(_),_=-1),f=!0;var z=h;try{for(x(O),d=n(l);d!==null&&(!(d.expirationTime>O)||j&&!P());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,h=d.priorityLevel;var J=ee(d.expirationTime<=O);O=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&r(l),x(O)}else r(l);d=n(l)}if(d!==null)var Ce=!0;else{var Ke=n(c);Ke!==null&&Z(k,Ke.startTime-O),Ce=!1}return Ce}finally{d=null,h=z,f=!1}}var S=!1,E=null,_=-1,N=5,T=-1;function P(){return!(t.unstable_now()-T<N)}function A(){if(E!==null){var j=t.unstable_now();T=j;var O=!0;try{O=E(!0,j)}finally{O?W():(S=!1,E=null)}}else S=!1}var W;if(typeof b=="function")W=function(){b(A)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,B=se.port2;se.port1.onmessage=A,W=function(){B.postMessage(null)}}else W=function(){v(A,0)};function Y(j){E=j,S||(S=!0,W())}function Z(j,O){_=v(function(){j(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,Y(w))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var z=h;h=O;try{return j()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,O){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var z=h;h=j;try{return O()}finally{h=z}},t.unstable_scheduleCallback=function(j,O,z){var ee=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ee+z:ee):z=ee,j){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,j={id:u++,callback:O,priorityLevel:j,startTime:z,expirationTime:J,sortIndex:-1},z>ee?(j.sortIndex=z,e(c,j),n(l)===null&&j===n(c)&&(g?(y(_),_=-1):g=!0,Z(k,z-ee))):(j.sortIndex=J,e(l,j),m||f||(m=!0,Y(w))),j},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(j){var O=h;return function(){var z=h;h=O;try{return j.apply(this,arguments)}finally{h=z}}}})(Dx);Px.exports=Dx;var QN=Px.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XN=C,Wt=QN;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lx=new Set,na={};function zs(t,e){Oi(t,e),Oi(t+"Capture",e)}function Oi(t,e){for(na[t]=e,t=0;t<e.length;t++)Lx.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),af=Object.prototype.hasOwnProperty,ZN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ny={},Ty={};function e2(t){return af.call(Ty,t)?!0:af.call(Ny,t)?!1:ZN.test(t)?Ty[t]=!0:(Ny[t]=!0,!1)}function t2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function n2(t,e,n,r){if(e===null||typeof e>"u"||t2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var lm=/[\-:]([a-z])/g;function cm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lm,cm);it[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lm,cm);it[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lm,cm);it[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function um(t,e,n,r){var s=it.hasOwnProperty(e)?it[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(n2(e,n,s,r)&&(n=null),r||s===null?e2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rr=XN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rl=Symbol.for("react.element"),ai=Symbol.for("react.portal"),li=Symbol.for("react.fragment"),dm=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),$x=Symbol.for("react.provider"),Bx=Symbol.for("react.context"),hm=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),fm=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),zx=Symbol.for("react.offscreen"),Ay=Symbol.iterator;function co(t){return t===null||typeof t!="object"?null:(t=Ay&&t[Ay]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,zd;function Eo(t){if(zd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zd=e&&e[1]||""}return`
`+zd+t}var Fd=!1;function Ud(t,e){if(!t||Fd)return"";Fd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Fd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Eo(t):""}function r2(t){switch(t.tag){case 5:return Eo(t.type);case 16:return Eo("Lazy");case 13:return Eo("Suspense");case 19:return Eo("SuspenseList");case 0:case 2:case 15:return t=Ud(t.type,!1),t;case 11:return t=Ud(t.type.render,!1),t;case 1:return t=Ud(t.type,!0),t;default:return""}}function df(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case li:return"Fragment";case ai:return"Portal";case lf:return"Profiler";case dm:return"StrictMode";case cf:return"Suspense";case uf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bx:return(t.displayName||"Context")+".Consumer";case $x:return(t._context.displayName||"Context")+".Provider";case hm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fm:return e=t.displayName||null,e!==null?e:df(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return df(t(e))}catch{}}return null}function s2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return df(e);case 8:return e===dm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i2(t){var e=Fx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sl(t){t._valueTracker||(t._valueTracker=i2(t))}function Ux(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Fx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hf(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Oy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Br(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vx(t,e){e=e.checked,e!=null&&um(t,"checked",e,!1)}function ff(t,e){Vx(t,e);var n=Br(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pf(t,e.type,n):e.hasOwnProperty("defaultValue")&&pf(t,e.type,Br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Iy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pf(t,e,n){(e!=="number"||hc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Co=Array.isArray;function xi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Br(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Co(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Br(n)}}function Hx(t,e){var n=Br(e.value),r=Br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ry(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Wx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Wx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var il,qx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ra(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o2=["Webkit","ms","Moz","O"];Object.keys(Po).forEach(function(t){o2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Po[e]=Po[t]})});function Gx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Po.hasOwnProperty(t)&&Po[t]?(""+e).trim():e+"px"}function Kx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Gx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var a2=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yf(t,e){if(e){if(a2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function vf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bf=null;function pm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xf=null,wi=null,ki=null;function My(t){if(t=Va(t)){if(typeof xf!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Ju(e),xf(t.stateNode,t.type,e))}}function Jx(t){wi?ki?ki.push(t):ki=[t]:wi=t}function Yx(){if(wi){var t=wi,e=ki;if(ki=wi=null,My(t),e)for(t=0;t<e.length;t++)My(e[t])}}function Qx(t,e){return t(e)}function Xx(){}var Vd=!1;function Zx(t,e,n){if(Vd)return t(e,n);Vd=!0;try{return Qx(t,e,n)}finally{Vd=!1,(wi!==null||ki!==null)&&(Xx(),Yx())}}function sa(t,e){var n=t.stateNode;if(n===null)return null;var r=Ju(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var wf=!1;if(Zn)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){wf=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{wf=!1}function l2(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Do=!1,fc=null,pc=!1,kf=null,c2={onError:function(t){Do=!0,fc=t}};function u2(t,e,n,r,s,i,o,a,l){Do=!1,fc=null,l2.apply(c2,arguments)}function d2(t,e,n,r,s,i,o,a,l){if(u2.apply(this,arguments),Do){if(Do){var c=fc;Do=!1,fc=null}else throw Error(M(198));pc||(pc=!0,kf=c)}}function Fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ew(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Py(t){if(Fs(t)!==t)throw Error(M(188))}function h2(t){var e=t.alternate;if(!e){if(e=Fs(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Py(s),t;if(i===r)return Py(s),e;i=i.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function tw(t){return t=h2(t),t!==null?nw(t):null}function nw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nw(t);if(e!==null)return e;t=t.sibling}return null}var rw=Wt.unstable_scheduleCallback,Dy=Wt.unstable_cancelCallback,f2=Wt.unstable_shouldYield,p2=Wt.unstable_requestPaint,Ae=Wt.unstable_now,m2=Wt.unstable_getCurrentPriorityLevel,mm=Wt.unstable_ImmediatePriority,sw=Wt.unstable_UserBlockingPriority,mc=Wt.unstable_NormalPriority,g2=Wt.unstable_LowPriority,iw=Wt.unstable_IdlePriority,Wu=null,Mn=null;function y2(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Wu,t,void 0,(t.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:x2,v2=Math.log,b2=Math.LN2;function x2(t){return t>>>=0,t===0?32:31-(v2(t)/b2|0)|0}var ol=64,al=4194304;function _o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=_o(a):(i&=o,i!==0&&(r=_o(i)))}else o=n&~s,o!==0?r=_o(o):i!==0&&(r=_o(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-kn(e),s=1<<n,r|=t[n],e&=~s;return r}function w2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-kn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=w2(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Sf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ow(){var t=ol;return ol<<=1,!(ol&4194240)&&(ol=64),t}function Hd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kn(e),t[e]=n}function S2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-kn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function gm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-kn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function aw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lw,ym,cw,uw,dw,Ef=!1,ll=[],Cr=null,_r=null,Nr=null,ia=new Map,oa=new Map,pr=[],E2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ly(t,e){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oa.delete(e.pointerId)}}function ho(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Va(e),e!==null&&ym(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function C2(t,e,n,r,s){switch(e){case"focusin":return Cr=ho(Cr,t,e,n,r,s),!0;case"dragenter":return _r=ho(_r,t,e,n,r,s),!0;case"mouseover":return Nr=ho(Nr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ia.set(i,ho(ia.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,oa.set(i,ho(oa.get(i)||null,t,e,n,r,s)),!0}return!1}function hw(t){var e=hs(t.target);if(e!==null){var n=Fs(e);if(n!==null){if(e=n.tag,e===13){if(e=ew(n),e!==null){t.blockedOn=e,dw(t.priority,function(){cw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ql(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bf=r,n.target.dispatchEvent(r),bf=null}else return e=Va(n),e!==null&&ym(e),t.blockedOn=n,!1;e.shift()}return!0}function $y(t,e,n){ql(t)&&n.delete(e)}function _2(){Ef=!1,Cr!==null&&ql(Cr)&&(Cr=null),_r!==null&&ql(_r)&&(_r=null),Nr!==null&&ql(Nr)&&(Nr=null),ia.forEach($y),oa.forEach($y)}function fo(t,e){t.blockedOn===e&&(t.blockedOn=null,Ef||(Ef=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,_2)))}function aa(t){function e(s){return fo(s,t)}if(0<ll.length){fo(ll[0],t);for(var n=1;n<ll.length;n++){var r=ll[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cr!==null&&fo(Cr,t),_r!==null&&fo(_r,t),Nr!==null&&fo(Nr,t),ia.forEach(e),oa.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)hw(n),n.blockedOn===null&&pr.shift()}var Si=rr.ReactCurrentBatchConfig,yc=!0;function N2(t,e,n,r){var s=ue,i=Si.transition;Si.transition=null;try{ue=1,vm(t,e,n,r)}finally{ue=s,Si.transition=i}}function T2(t,e,n,r){var s=ue,i=Si.transition;Si.transition=null;try{ue=4,vm(t,e,n,r)}finally{ue=s,Si.transition=i}}function vm(t,e,n,r){if(yc){var s=Cf(t,e,n,r);if(s===null)eh(t,e,r,vc,n),Ly(t,r);else if(C2(s,t,e,n,r))r.stopPropagation();else if(Ly(t,r),e&4&&-1<E2.indexOf(t)){for(;s!==null;){var i=Va(s);if(i!==null&&lw(i),i=Cf(t,e,n,r),i===null&&eh(t,e,r,vc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else eh(t,e,r,null,n)}}var vc=null;function Cf(t,e,n,r){if(vc=null,t=pm(r),t=hs(t),t!==null)if(e=Fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ew(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vc=t,null}function fw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m2()){case mm:return 1;case sw:return 4;case mc:case g2:return 16;case iw:return 536870912;default:return 16}default:return 16}}var xr=null,bm=null,Gl=null;function pw(){if(Gl)return Gl;var t,e=bm,n=e.length,r,s="value"in xr?xr.value:xr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Gl=s.slice(t,1<r?1-r:void 0)}function Kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cl(){return!0}function By(){return!1}function Gt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cl:By,this.isPropagationStopped=By,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),e}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=Gt(Xi),Ua=Se({},Xi,{view:0,detail:0}),A2=Gt(Ua),Wd,qd,po,qu=Se({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==po&&(po&&t.type==="mousemove"?(Wd=t.screenX-po.screenX,qd=t.screenY-po.screenY):qd=Wd=0,po=t),Wd)},movementY:function(t){return"movementY"in t?t.movementY:qd}}),zy=Gt(qu),O2=Se({},qu,{dataTransfer:0}),I2=Gt(O2),j2=Se({},Ua,{relatedTarget:0}),Gd=Gt(j2),R2=Se({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),M2=Gt(R2),P2=Se({},Xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D2=Gt(P2),L2=Se({},Xi,{data:0}),Fy=Gt(L2),$2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=z2[t])?!!e[t]:!1}function wm(){return F2}var U2=Se({},Ua,{key:function(t){if(t.key){var e=$2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?B2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wm,charCode:function(t){return t.type==="keypress"?Kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),V2=Gt(U2),H2=Se({},qu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uy=Gt(H2),W2=Se({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wm}),q2=Gt(W2),G2=Se({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),K2=Gt(G2),J2=Se({},qu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y2=Gt(J2),Q2=[9,13,27,32],km=Zn&&"CompositionEvent"in window,Lo=null;Zn&&"documentMode"in document&&(Lo=document.documentMode);var X2=Zn&&"TextEvent"in window&&!Lo,mw=Zn&&(!km||Lo&&8<Lo&&11>=Lo),Vy=" ",Hy=!1;function gw(t,e){switch(t){case"keyup":return Q2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ci=!1;function Z2(t,e){switch(t){case"compositionend":return yw(e);case"keypress":return e.which!==32?null:(Hy=!0,Vy);case"textInput":return t=e.data,t===Vy&&Hy?null:t;default:return null}}function eT(t,e){if(ci)return t==="compositionend"||!km&&gw(t,e)?(t=pw(),Gl=bm=xr=null,ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mw&&e.locale!=="ko"?null:e.data;default:return null}}var tT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tT[t.type]:e==="textarea"}function vw(t,e,n,r){Jx(r),e=bc(e,"onChange"),0<e.length&&(n=new xm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $o=null,la=null;function nT(t){Aw(t,0)}function Gu(t){var e=hi(t);if(Ux(e))return t}function rT(t,e){if(t==="change")return e}var bw=!1;if(Zn){var Kd;if(Zn){var Jd="oninput"in document;if(!Jd){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),Jd=typeof qy.oninput=="function"}Kd=Jd}else Kd=!1;bw=Kd&&(!document.documentMode||9<document.documentMode)}function Gy(){$o&&($o.detachEvent("onpropertychange",xw),la=$o=null)}function xw(t){if(t.propertyName==="value"&&Gu(la)){var e=[];vw(e,la,t,pm(t)),Zx(nT,e)}}function sT(t,e,n){t==="focusin"?(Gy(),$o=e,la=n,$o.attachEvent("onpropertychange",xw)):t==="focusout"&&Gy()}function iT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gu(la)}function oT(t,e){if(t==="click")return Gu(e)}function aT(t,e){if(t==="input"||t==="change")return Gu(e)}function lT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:lT;function ca(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!af.call(e,s)||!Cn(t[s],e[s]))return!1}return!0}function Ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jy(t,e){var n=Ky(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ky(n)}}function ww(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ww(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kw(){for(var t=window,e=hc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hc(t.document)}return e}function Sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cT(t){var e=kw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ww(n.ownerDocument.documentElement,n)){if(r!==null&&Sm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Jy(n,i);var o=Jy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uT=Zn&&"documentMode"in document&&11>=document.documentMode,ui=null,_f=null,Bo=null,Nf=!1;function Yy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nf||ui==null||ui!==hc(r)||(r=ui,"selectionStart"in r&&Sm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bo&&ca(Bo,r)||(Bo=r,r=bc(_f,"onSelect"),0<r.length&&(e=new xm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ui)))}function ul(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var di={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionend:ul("Transition","TransitionEnd")},Yd={},Sw={};Zn&&(Sw=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function Ku(t){if(Yd[t])return Yd[t];if(!di[t])return t;var e=di[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sw)return Yd[t]=e[n];return t}var Ew=Ku("animationend"),Cw=Ku("animationiteration"),_w=Ku("animationstart"),Nw=Ku("transitionend"),Tw=new Map,Qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(t,e){Tw.set(t,e),zs(e,[t])}for(var Qd=0;Qd<Qy.length;Qd++){var Xd=Qy[Qd],dT=Xd.toLowerCase(),hT=Xd[0].toUpperCase()+Xd.slice(1);Hr(dT,"on"+hT)}Hr(Ew,"onAnimationEnd");Hr(Cw,"onAnimationIteration");Hr(_w,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(Nw,"onTransitionEnd");Oi("onMouseEnter",["mouseout","mouseover"]);Oi("onMouseLeave",["mouseout","mouseover"]);Oi("onPointerEnter",["pointerout","pointerover"]);Oi("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fT=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function Xy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,d2(r,e,void 0,t),t.currentTarget=null}function Aw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Xy(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Xy(s,a,c),i=l}}}if(pc)throw t=kf,pc=!1,kf=null,t}function me(t,e){var n=e[jf];n===void 0&&(n=e[jf]=new Set);var r=t+"__bubble";n.has(r)||(Ow(e,t,2,!1),n.add(r))}function Zd(t,e,n){var r=0;e&&(r|=4),Ow(n,t,r,e)}var dl="_reactListening"+Math.random().toString(36).slice(2);function ua(t){if(!t[dl]){t[dl]=!0,Lx.forEach(function(n){n!=="selectionchange"&&(fT.has(n)||Zd(n,!1,t),Zd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dl]||(e[dl]=!0,Zd("selectionchange",!1,e))}}function Ow(t,e,n,r){switch(fw(e)){case 1:var s=N2;break;case 4:s=T2;break;default:s=vm}n=s.bind(null,e,n,t),s=void 0,!wf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function eh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=hs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Zx(function(){var c=i,u=pm(n),d=[];e:{var h=Tw.get(t);if(h!==void 0){var f=xm,m=t;switch(t){case"keypress":if(Kl(n)===0)break e;case"keydown":case"keyup":f=V2;break;case"focusin":m="focus",f=Gd;break;case"focusout":m="blur",f=Gd;break;case"beforeblur":case"afterblur":f=Gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=I2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=q2;break;case Ew:case Cw:case _w:f=M2;break;case Nw:f=K2;break;case"scroll":f=A2;break;case"wheel":f=Y2;break;case"copy":case"cut":case"paste":f=D2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Uy}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=c,x;b!==null;){x=b;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,y!==null&&(k=sa(b,y),k!=null&&g.push(da(b,k,x)))),v)break;b=b.return}0<g.length&&(h=new f(h,m,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==bf&&(m=n.relatedTarget||n.fromElement)&&(hs(m)||m[er]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=c,m=m?hs(m):null,m!==null&&(v=Fs(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(g=zy,k="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=Uy,k="onPointerLeave",y="onPointerEnter",b="pointer"),v=f==null?h:hi(f),x=m==null?h:hi(m),h=new g(k,b+"leave",f,n,u),h.target=v,h.relatedTarget=x,k=null,hs(u)===c&&(g=new g(y,b+"enter",m,n,u),g.target=x,g.relatedTarget=v,k=g),v=k,f&&m)t:{for(g=f,y=m,b=0,x=g;x;x=Gs(x))b++;for(x=0,k=y;k;k=Gs(k))x++;for(;0<b-x;)g=Gs(g),b--;for(;0<x-b;)y=Gs(y),x--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=Gs(g),y=Gs(y)}g=null}else g=null;f!==null&&Zy(d,h,f,g,!1),m!==null&&v!==null&&Zy(d,v,m,g,!0)}}e:{if(h=c?hi(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=rT;else if(Wy(h))if(bw)w=aT;else{w=iT;var S=sT}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=oT);if(w&&(w=w(t,c))){vw(d,w,n,u);break e}S&&S(t,h,c),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&pf(h,"number",h.value)}switch(S=c?hi(c):window,t){case"focusin":(Wy(S)||S.contentEditable==="true")&&(ui=S,_f=c,Bo=null);break;case"focusout":Bo=_f=ui=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Yy(d,n,u);break;case"selectionchange":if(uT)break;case"keydown":case"keyup":Yy(d,n,u)}var E;if(km)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ci?gw(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(mw&&n.locale!=="ko"&&(ci||_!=="onCompositionStart"?_==="onCompositionEnd"&&ci&&(E=pw()):(xr=u,bm="value"in xr?xr.value:xr.textContent,ci=!0)),S=bc(c,_),0<S.length&&(_=new Fy(_,t,null,n,u),d.push({event:_,listeners:S}),E?_.data=E:(E=yw(n),E!==null&&(_.data=E)))),(E=X2?Z2(t,n):eT(t,n))&&(c=bc(c,"onBeforeInput"),0<c.length&&(u=new Fy("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}Aw(d,e)})}function da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sa(t,n),i!=null&&r.unshift(da(t,i,s)),i=sa(t,e),i!=null&&r.push(da(t,i,s))),t=t.return}return r}function Gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=sa(n,i),l!=null&&o.unshift(da(n,l,a))):s||(l=sa(n,i),l!=null&&o.push(da(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pT=/\r\n?/g,mT=/\u0000|\uFFFD/g;function e0(t){return(typeof t=="string"?t:""+t).replace(pT,`
`).replace(mT,"")}function hl(t,e,n){if(e=e0(e),e0(t)!==e&&n)throw Error(M(425))}function xc(){}var Tf=null,Af=null;function Of(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var If=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,t0=typeof Promise=="function"?Promise:void 0,yT=typeof queueMicrotask=="function"?queueMicrotask:typeof t0<"u"?function(t){return t0.resolve(null).then(t).catch(vT)}:If;function vT(t){setTimeout(function(){throw t})}function th(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);aa(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function n0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),Rn="__reactFiber$"+Zi,ha="__reactProps$"+Zi,er="__reactContainer$"+Zi,jf="__reactEvents$"+Zi,bT="__reactListeners$"+Zi,xT="__reactHandles$"+Zi;function hs(t){var e=t[Rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[Rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=n0(t);t!==null;){if(n=t[Rn])return n;t=n0(t)}return e}t=n,n=t.parentNode}return null}function Va(t){return t=t[Rn]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Ju(t){return t[ha]||null}var Rf=[],fi=-1;function Wr(t){return{current:t}}function ye(t){0>fi||(t.current=Rf[fi],Rf[fi]=null,fi--)}function pe(t,e){fi++,Rf[fi]=t.current,t.current=e}var zr={},dt=Wr(zr),Ot=Wr(!1),Ts=zr;function Ii(t,e){var n=t.type.contextTypes;if(!n)return zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function It(t){return t=t.childContextTypes,t!=null}function wc(){ye(Ot),ye(dt)}function r0(t,e,n){if(dt.current!==zr)throw Error(M(168));pe(dt,e),pe(Ot,n)}function Iw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(M(108,s2(t)||"Unknown",s));return Se({},n,r)}function kc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zr,Ts=dt.current,pe(dt,t),pe(Ot,Ot.current),!0}function s0(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=Iw(t,e,Ts),r.__reactInternalMemoizedMergedChildContext=t,ye(Ot),ye(dt),pe(dt,t)):ye(Ot),pe(Ot,n)}var qn=null,Yu=!1,nh=!1;function jw(t){qn===null?qn=[t]:qn.push(t)}function wT(t){Yu=!0,jw(t)}function qr(){if(!nh&&qn!==null){nh=!0;var t=0,e=ue;try{var n=qn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qn=null,Yu=!1}catch(s){throw qn!==null&&(qn=qn.slice(t+1)),rw(mm,qr),s}finally{ue=e,nh=!1}}return null}var pi=[],mi=0,Sc=null,Ec=0,Zt=[],en=0,As=null,Gn=1,Kn="";function ns(t,e){pi[mi++]=Ec,pi[mi++]=Sc,Sc=t,Ec=e}function Rw(t,e,n){Zt[en++]=Gn,Zt[en++]=Kn,Zt[en++]=As,As=t;var r=Gn;t=Kn;var s=32-kn(r)-1;r&=~(1<<s),n+=1;var i=32-kn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gn=1<<32-kn(e)+s|n<<s|r,Kn=i+t}else Gn=1<<i|n<<s|r,Kn=t}function Em(t){t.return!==null&&(ns(t,1),Rw(t,1,0))}function Cm(t){for(;t===Sc;)Sc=pi[--mi],pi[mi]=null,Ec=pi[--mi],pi[mi]=null;for(;t===As;)As=Zt[--en],Zt[en]=null,Kn=Zt[--en],Zt[en]=null,Gn=Zt[--en],Zt[en]=null}var Ft=null,Bt=null,be=!1,yn=null;function Mw(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function i0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ft=t,Bt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ft=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=As!==null?{id:Gn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ft=t,Bt=null,!0):!1;default:return!1}}function Mf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pf(t){if(be){var e=Bt;if(e){var n=e;if(!i0(t,e)){if(Mf(t))throw Error(M(418));e=Tr(n.nextSibling);var r=Ft;e&&i0(t,e)?Mw(r,n):(t.flags=t.flags&-4097|2,be=!1,Ft=t)}}else{if(Mf(t))throw Error(M(418));t.flags=t.flags&-4097|2,be=!1,Ft=t}}}function o0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ft=t}function fl(t){if(t!==Ft)return!1;if(!be)return o0(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Of(t.type,t.memoizedProps)),e&&(e=Bt)){if(Mf(t))throw Pw(),Error(M(418));for(;e;)Mw(t,e),e=Tr(e.nextSibling)}if(o0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=Ft?Tr(t.stateNode.nextSibling):null;return!0}function Pw(){for(var t=Bt;t;)t=Tr(t.nextSibling)}function ji(){Bt=Ft=null,be=!1}function _m(t){yn===null?yn=[t]:yn.push(t)}var kT=rr.ReactCurrentBatchConfig;function mo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function pl(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function a0(t){var e=t._init;return e(t._payload)}function Dw(t){function e(y,b){if(t){var x=y.deletions;x===null?(y.deletions=[b],y.flags|=16):x.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=jr(y,b),y.index=0,y.sibling=null,y}function i(y,b,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<b?(y.flags|=2,b):x):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,x,k){return b===null||b.tag!==6?(b=ch(x,y.mode,k),b.return=y,b):(b=s(b,x),b.return=y,b)}function l(y,b,x,k){var w=x.type;return w===li?u(y,b,x.props.children,k,x.key):b!==null&&(b.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===cr&&a0(w)===b.type)?(k=s(b,x.props),k.ref=mo(y,b,x),k.return=y,k):(k=tc(x.type,x.key,x.props,null,y.mode,k),k.ref=mo(y,b,x),k.return=y,k)}function c(y,b,x,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=uh(x,y.mode,k),b.return=y,b):(b=s(b,x.children||[]),b.return=y,b)}function u(y,b,x,k,w){return b===null||b.tag!==7?(b=ws(x,y.mode,k,w),b.return=y,b):(b=s(b,x),b.return=y,b)}function d(y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ch(""+b,y.mode,x),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rl:return x=tc(b.type,b.key,b.props,null,y.mode,x),x.ref=mo(y,null,b),x.return=y,x;case ai:return b=uh(b,y.mode,x),b.return=y,b;case cr:var k=b._init;return d(y,k(b._payload),x)}if(Co(b)||co(b))return b=ws(b,y.mode,x,null),b.return=y,b;pl(y,b)}return null}function h(y,b,x,k){var w=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:a(y,b,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rl:return x.key===w?l(y,b,x,k):null;case ai:return x.key===w?c(y,b,x,k):null;case cr:return w=x._init,h(y,b,w(x._payload),k)}if(Co(x)||co(x))return w!==null?null:u(y,b,x,k,null);pl(y,x)}return null}function f(y,b,x,k,w){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(x)||null,a(b,y,""+k,w);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case rl:return y=y.get(k.key===null?x:k.key)||null,l(b,y,k,w);case ai:return y=y.get(k.key===null?x:k.key)||null,c(b,y,k,w);case cr:var S=k._init;return f(y,b,x,S(k._payload),w)}if(Co(k)||co(k))return y=y.get(x)||null,u(b,y,k,w,null);pl(b,k)}return null}function m(y,b,x,k){for(var w=null,S=null,E=b,_=b=0,N=null;E!==null&&_<x.length;_++){E.index>_?(N=E,E=null):N=E.sibling;var T=h(y,E,x[_],k);if(T===null){E===null&&(E=N);break}t&&E&&T.alternate===null&&e(y,E),b=i(T,b,_),S===null?w=T:S.sibling=T,S=T,E=N}if(_===x.length)return n(y,E),be&&ns(y,_),w;if(E===null){for(;_<x.length;_++)E=d(y,x[_],k),E!==null&&(b=i(E,b,_),S===null?w=E:S.sibling=E,S=E);return be&&ns(y,_),w}for(E=r(y,E);_<x.length;_++)N=f(E,y,_,x[_],k),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?_:N.key),b=i(N,b,_),S===null?w=N:S.sibling=N,S=N);return t&&E.forEach(function(P){return e(y,P)}),be&&ns(y,_),w}function g(y,b,x,k){var w=co(x);if(typeof w!="function")throw Error(M(150));if(x=w.call(x),x==null)throw Error(M(151));for(var S=w=null,E=b,_=b=0,N=null,T=x.next();E!==null&&!T.done;_++,T=x.next()){E.index>_?(N=E,E=null):N=E.sibling;var P=h(y,E,T.value,k);if(P===null){E===null&&(E=N);break}t&&E&&P.alternate===null&&e(y,E),b=i(P,b,_),S===null?w=P:S.sibling=P,S=P,E=N}if(T.done)return n(y,E),be&&ns(y,_),w;if(E===null){for(;!T.done;_++,T=x.next())T=d(y,T.value,k),T!==null&&(b=i(T,b,_),S===null?w=T:S.sibling=T,S=T);return be&&ns(y,_),w}for(E=r(y,E);!T.done;_++,T=x.next())T=f(E,y,_,T.value,k),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?_:T.key),b=i(T,b,_),S===null?w=T:S.sibling=T,S=T);return t&&E.forEach(function(A){return e(y,A)}),be&&ns(y,_),w}function v(y,b,x,k){if(typeof x=="object"&&x!==null&&x.type===li&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case rl:e:{for(var w=x.key,S=b;S!==null;){if(S.key===w){if(w=x.type,w===li){if(S.tag===7){n(y,S.sibling),b=s(S,x.props.children),b.return=y,y=b;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===cr&&a0(w)===S.type){n(y,S.sibling),b=s(S,x.props),b.ref=mo(y,S,x),b.return=y,y=b;break e}n(y,S);break}else e(y,S);S=S.sibling}x.type===li?(b=ws(x.props.children,y.mode,k,x.key),b.return=y,y=b):(k=tc(x.type,x.key,x.props,null,y.mode,k),k.ref=mo(y,b,x),k.return=y,y=k)}return o(y);case ai:e:{for(S=x.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){n(y,b.sibling),b=s(b,x.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=uh(x,y.mode,k),b.return=y,y=b}return o(y);case cr:return S=x._init,v(y,b,S(x._payload),k)}if(Co(x))return m(y,b,x,k);if(co(x))return g(y,b,x,k);pl(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,x),b.return=y,y=b):(n(y,b),b=ch(x,y.mode,k),b.return=y,y=b),o(y)):n(y,b)}return v}var Ri=Dw(!0),Lw=Dw(!1),Cc=Wr(null),_c=null,gi=null,Nm=null;function Tm(){Nm=gi=_c=null}function Am(t){var e=Cc.current;ye(Cc),t._currentValue=e}function Df(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ei(t,e){_c=t,Nm=gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(Nm!==t)if(t={context:t,memoizedValue:e,next:null},gi===null){if(_c===null)throw Error(M(308));gi=t,_c.dependencies={lanes:0,firstContext:t}}else gi=gi.next=t;return e}var fs=null;function Om(t){fs===null?fs=[t]:fs.push(t)}function $w(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Om(e)):(n.next=s.next,s.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function Im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tr(t,n)}return s=r.interleaved,s===null?(e.next=e,Om(r)):(e.next=s.next,s.next=e),r.interleaved=e,tr(t,n)}function Jl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gm(t,n)}}function l0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nc(t,e,n,r){var s=t.updateQueue;ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(h=e,f=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=Se({},d,h);break e;case 2:ur=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Is|=o,t.lanes=o,t.memoizedState=d}}function c0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var Ha={},Pn=Wr(Ha),fa=Wr(Ha),pa=Wr(Ha);function ps(t){if(t===Ha)throw Error(M(174));return t}function jm(t,e){switch(pe(pa,e),pe(fa,t),pe(Pn,Ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gf(e,t)}ye(Pn),pe(Pn,e)}function Mi(){ye(Pn),ye(fa),ye(pa)}function zw(t){ps(pa.current);var e=ps(Pn.current),n=gf(e,t.type);e!==n&&(pe(fa,t),pe(Pn,n))}function Rm(t){fa.current===t&&(ye(Pn),ye(fa))}var xe=Wr(0);function Tc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rh=[];function Mm(){for(var t=0;t<rh.length;t++)rh[t]._workInProgressVersionPrimary=null;rh.length=0}var Yl=rr.ReactCurrentDispatcher,sh=rr.ReactCurrentBatchConfig,Os=0,ke=null,Le=null,ze=null,Ac=!1,zo=!1,ma=0,ST=0;function ot(){throw Error(M(321))}function Pm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function Dm(t,e,n,r,s,i){if(Os=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?NT:TT,t=n(r,s),zo){i=0;do{if(zo=!1,ma=0,25<=i)throw Error(M(301));i+=1,ze=Le=null,e.updateQueue=null,Yl.current=AT,t=n(r,s)}while(zo)}if(Yl.current=Oc,e=Le!==null&&Le.next!==null,Os=0,ze=Le=ke=null,Ac=!1,e)throw Error(M(300));return t}function Lm(){var t=ma!==0;return ma=0,t}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?ke.memoizedState=ze=t:ze=ze.next=t,ze}function un(){if(Le===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=ze===null?ke.memoizedState:ze.next;if(e!==null)ze=e,Le=t;else{if(t===null)throw Error(M(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},ze===null?ke.memoizedState=ze=t:ze=ze.next=t}return ze}function ga(t,e){return typeof e=="function"?e(t):e}function ih(t){var e=un(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=Le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Os&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ke.lanes|=u,Is|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Cn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ke.lanes|=i,Is|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function oh(t){var e=un(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Cn(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Fw(){}function Uw(t,e){var n=ke,r=un(),s=e(),i=!Cn(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,$m(Ww.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,ya(9,Hw.bind(null,n,r,s,e),void 0,null),Ve===null)throw Error(M(349));Os&30||Vw(n,e,s)}return s}function Vw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Hw(t,e,n,r){e.value=n,e.getSnapshot=r,qw(e)&&Gw(t)}function Ww(t,e,n){return n(function(){qw(e)&&Gw(t)})}function qw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function Gw(t){var e=tr(t,1);e!==null&&Sn(e,t,1,-1)}function u0(t){var e=Tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},e.queue=t,t=t.dispatch=_T.bind(null,ke,t),[e.memoizedState,t]}function ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kw(){return un().memoizedState}function Ql(t,e,n,r){var s=Tn();ke.flags|=t,s.memoizedState=ya(1|e,n,void 0,r===void 0?null:r)}function Qu(t,e,n,r){var s=un();r=r===void 0?null:r;var i=void 0;if(Le!==null){var o=Le.memoizedState;if(i=o.destroy,r!==null&&Pm(r,o.deps)){s.memoizedState=ya(e,n,i,r);return}}ke.flags|=t,s.memoizedState=ya(1|e,n,i,r)}function d0(t,e){return Ql(8390656,8,t,e)}function $m(t,e){return Qu(2048,8,t,e)}function Jw(t,e){return Qu(4,2,t,e)}function Yw(t,e){return Qu(4,4,t,e)}function Qw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xw(t,e,n){return n=n!=null?n.concat([t]):null,Qu(4,4,Qw.bind(null,e,t),n)}function Bm(){}function Zw(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e1(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t1(t,e,n){return Os&21?(Cn(n,e)||(n=ow(),ke.lanes|=n,Is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function ET(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=sh.transition;sh.transition={};try{t(!1),e()}finally{ue=n,sh.transition=r}}function n1(){return un().memoizedState}function CT(t,e,n){var r=Ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r1(t))s1(e,n);else if(n=$w(t,e,n,r),n!==null){var s=bt();Sn(n,t,r,s),i1(n,e,r)}}function _T(t,e,n){var r=Ir(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r1(t))s1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Cn(a,o)){var l=e.interleaved;l===null?(s.next=s,Om(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=$w(t,e,s,r),n!==null&&(s=bt(),Sn(n,t,r,s),i1(n,e,r))}}function r1(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function s1(t,e){zo=Ac=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function i1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gm(t,n)}}var Oc={readContext:cn,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},NT={readContext:cn,useCallback:function(t,e){return Tn().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:d0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ql(4194308,4,Qw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ql(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ql(4,2,t,e)},useMemo:function(t,e){var n=Tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CT.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=Tn();return t={current:t},e.memoizedState=t},useState:u0,useDebugValue:Bm,useDeferredValue:function(t){return Tn().memoizedState=t},useTransition:function(){var t=u0(!1),e=t[0];return t=ET.bind(null,t[1]),Tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,s=Tn();if(be){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Ve===null)throw Error(M(349));Os&30||Vw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,d0(Ww.bind(null,r,i,t),[t]),r.flags|=2048,ya(9,Hw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Tn(),e=Ve.identifierPrefix;if(be){var n=Kn,r=Gn;n=(r&~(1<<32-kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ST++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TT={readContext:cn,useCallback:Zw,useContext:cn,useEffect:$m,useImperativeHandle:Xw,useInsertionEffect:Jw,useLayoutEffect:Yw,useMemo:e1,useReducer:ih,useRef:Kw,useState:function(){return ih(ga)},useDebugValue:Bm,useDeferredValue:function(t){var e=un();return t1(e,Le.memoizedState,t)},useTransition:function(){var t=ih(ga)[0],e=un().memoizedState;return[t,e]},useMutableSource:Fw,useSyncExternalStore:Uw,useId:n1,unstable_isNewReconciler:!1},AT={readContext:cn,useCallback:Zw,useContext:cn,useEffect:$m,useImperativeHandle:Xw,useInsertionEffect:Jw,useLayoutEffect:Yw,useMemo:e1,useReducer:oh,useRef:Kw,useState:function(){return oh(ga)},useDebugValue:Bm,useDeferredValue:function(t){var e=un();return Le===null?e.memoizedState=t:t1(e,Le.memoizedState,t)},useTransition:function(){var t=oh(ga)[0],e=un().memoizedState;return[t,e]},useMutableSource:Fw,useSyncExternalStore:Uw,useId:n1,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xu={isMounted:function(t){return(t=t._reactInternals)?Fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Ir(t),i=Yn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(Sn(e,t,s,r),Jl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Ir(t),i=Yn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(Sn(e,t,s,r),Jl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),r=Ir(t),s=Yn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ar(t,s,r),e!==null&&(Sn(e,t,r,n),Jl(e,t,r))}};function h0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ca(n,r)||!ca(s,i):!0}function o1(t,e,n){var r=!1,s=zr,i=e.contextType;return typeof i=="object"&&i!==null?i=cn(i):(s=It(e)?Ts:dt.current,r=e.contextTypes,i=(r=r!=null)?Ii(t,s):zr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function f0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xu.enqueueReplaceState(e,e.state,null)}function $f(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Im(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=cn(i):(i=It(e)?Ts:dt.current,s.context=Ii(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xu.enqueueReplaceState(s,s.state,null),Nc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pi(t,e){try{var n="",r=e;do n+=r2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ah(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OT=typeof WeakMap=="function"?WeakMap:Map;function a1(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jc||(jc=!0,Jf=r),Bf(t,e)},n}function l1(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Bf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Bf(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function p0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=HT.bind(null,t,e,n),e.then(t,t))}function m0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function g0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var IT=rr.ReactCurrentOwner,At=!1;function yt(t,e,n,r){e.child=t===null?Lw(e,null,n,r):Ri(e,t.child,n,r)}function y0(t,e,n,r,s){n=n.render;var i=e.ref;return Ei(e,s),r=Dm(t,e,n,r,i,s),n=Lm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(be&&n&&Em(e),e.flags|=1,yt(t,e,r,s),e.child)}function v0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Gm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,c1(t,e,i,r,s)):(t=tc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ca,n(o,r)&&t.ref===e.ref)return nr(t,e,s)}return e.flags|=1,t=jr(i,r),t.ref=e.ref,t.return=e,e.child=t}function c1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ca(i,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,nr(t,e,s)}return zf(t,e,n,r,s)}function u1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(vi,Dt),Dt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(vi,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe(vi,Dt),Dt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pe(vi,Dt),Dt|=r;return yt(t,e,s,n),e.child}function d1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zf(t,e,n,r,s){var i=It(n)?Ts:dt.current;return i=Ii(e,i),Ei(e,s),n=Dm(t,e,n,r,i,s),r=Lm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(be&&r&&Em(e),e.flags|=1,yt(t,e,n,s),e.child)}function b0(t,e,n,r,s){if(It(n)){var i=!0;kc(e)}else i=!1;if(Ei(e,s),e.stateNode===null)Xl(t,e),o1(e,n,r),$f(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=cn(c):(c=It(n)?Ts:dt.current,c=Ii(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&f0(e,o,r,c),ur=!1;var h=e.memoizedState;o.state=h,Nc(e,r,o,s),l=e.memoizedState,a!==r||h!==l||Ot.current||ur?(typeof u=="function"&&(Lf(e,n,u,r),l=e.memoizedState),(a=ur||h0(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fn(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=cn(l):(l=It(n)?Ts:dt.current,l=Ii(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&f0(e,o,r,l),ur=!1,h=e.memoizedState,o.state=h,Nc(e,r,o,s);var m=e.memoizedState;a!==d||h!==m||Ot.current||ur?(typeof f=="function"&&(Lf(e,n,f,r),m=e.memoizedState),(c=ur||h0(e,n,c,r,h,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ff(t,e,n,r,i,s)}function Ff(t,e,n,r,s,i){d1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&s0(e,n,!1),nr(t,e,i);r=e.stateNode,IT.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ri(e,t.child,null,i),e.child=Ri(e,null,a,i)):yt(t,e,a,i),e.memoizedState=r.state,s&&s0(e,n,!0),e.child}function h1(t){var e=t.stateNode;e.pendingContext?r0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&r0(t,e.context,!1),jm(t,e.containerInfo)}function x0(t,e,n,r,s){return ji(),_m(s),e.flags|=256,yt(t,e,n,r),e.child}var Uf={dehydrated:null,treeContext:null,retryLane:0};function Vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function f1(t,e,n){var r=e.pendingProps,s=xe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pe(xe,s&1),t===null)return Pf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=td(o,r,0,null),t=ws(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vf(n),e.memoizedState=Uf,t):zm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return jT(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=jr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=jr(a,i):(i=ws(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Vf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Uf,r}return i=t.child,t=i.sibling,r=jr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zm(t,e){return e=td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ml(t,e,n,r){return r!==null&&_m(r),Ri(e,t.child,null,n),t=zm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ah(Error(M(422))),ml(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=td({mode:"visible",children:r.children},s,0,null),i=ws(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ri(e,t.child,null,o),e.child.memoizedState=Vf(o),e.memoizedState=Uf,i);if(!(e.mode&1))return ml(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(M(419)),r=ah(i,r,void 0),ml(t,e,o,r)}if(a=(o&t.childLanes)!==0,At||a){if(r=Ve,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tr(t,s),Sn(r,t,s,-1))}return qm(),r=ah(Error(M(421))),ml(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=WT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bt=Tr(s.nextSibling),Ft=e,be=!0,yn=null,t!==null&&(Zt[en++]=Gn,Zt[en++]=Kn,Zt[en++]=As,Gn=t.id,Kn=t.overflow,As=e),e=zm(e,r.children),e.flags|=4096,e)}function w0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Df(t.return,e,n)}function lh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function p1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(yt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&w0(t,n,e);else if(t.tag===19)w0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Tc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),lh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Tc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}lh(e,!0,n,null,i);break;case"together":lh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RT(t,e,n){switch(e.tag){case 3:h1(e),ji();break;case 5:zw(e);break;case 1:It(e.type)&&kc(e);break;case 4:jm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pe(Cc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?f1(t,e,n):(pe(xe,xe.current&1),t=nr(t,e,n),t!==null?t.sibling:null);pe(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return p1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,u1(t,e,n)}return nr(t,e,n)}var m1,Hf,g1,y1;m1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hf=function(){};g1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ps(Pn.current);var i=null;switch(n){case"input":s=hf(t,s),r=hf(t,r),i=[];break;case"select":s=Se({},s,{value:void 0}),r=Se({},r,{value:void 0}),i=[];break;case"textarea":s=mf(t,s),r=mf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xc)}yf(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(na.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(na.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&me("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};y1=function(t,e,n,r){n!==r&&(e.flags|=4)};function go(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MT(t,e,n){var r=e.pendingProps;switch(Cm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return It(e.type)&&wc(),at(e),null;case 3:return r=e.stateNode,Mi(),ye(Ot),ye(dt),Mm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yn!==null&&(Xf(yn),yn=null))),Hf(t,e),at(e),null;case 5:Rm(e);var s=ps(pa.current);if(n=e.type,t!==null&&e.stateNode!=null)g1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return at(e),null}if(t=ps(Pn.current),fl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Rn]=e,r[ha]=i,t=(e.mode&1)!==0,n){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(s=0;s<No.length;s++)me(No[s],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":Oy(r,i),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},me("invalid",r);break;case"textarea":jy(r,i),me("invalid",r)}yf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&hl(r.textContent,a,t),s=["children",""+a]):na.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&me("scroll",r)}switch(n){case"input":sl(r),Iy(r,i,!0);break;case"textarea":sl(r),Ry(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Rn]=e,t[ha]=r,m1(t,e,!1,!1),e.stateNode=t;e:{switch(o=vf(n,r),n){case"dialog":me("cancel",t),me("close",t),s=r;break;case"iframe":case"object":case"embed":me("load",t),s=r;break;case"video":case"audio":for(s=0;s<No.length;s++)me(No[s],t);s=r;break;case"source":me("error",t),s=r;break;case"img":case"image":case"link":me("error",t),me("load",t),s=r;break;case"details":me("toggle",t),s=r;break;case"input":Oy(t,r),s=hf(t,r),me("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Se({},r,{value:void 0}),me("invalid",t);break;case"textarea":jy(t,r),s=mf(t,r),me("invalid",t);break;default:s=r}yf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Kx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&qx(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ra(t,l):typeof l=="number"&&ra(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(na.hasOwnProperty(i)?l!=null&&i==="onScroll"&&me("scroll",t):l!=null&&um(t,i,l,o))}switch(n){case"input":sl(t),Iy(t,r,!1);break;case"textarea":sl(t),Ry(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Br(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?xi(t,!!r.multiple,i,!1):r.defaultValue!=null&&xi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)y1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=ps(pa.current),ps(Pn.current),fl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rn]=e,(i=r.nodeValue!==n)&&(t=Ft,t!==null))switch(t.tag){case 3:hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rn]=e,e.stateNode=r}return at(e),null;case 13:if(ye(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Bt!==null&&e.mode&1&&!(e.flags&128))Pw(),ji(),e.flags|=98560,i=!1;else if(i=fl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(M(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[Rn]=e}else ji(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else yn!==null&&(Xf(yn),yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?$e===0&&($e=3):qm())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return Mi(),Hf(t,e),t===null&&ua(e.stateNode.containerInfo),at(e),null;case 10:return Am(e.type._context),at(e),null;case 17:return It(e.type)&&wc(),at(e),null;case 19:if(ye(xe),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)go(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tc(t),o!==null){for(e.flags|=128,go(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(xe,xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ae()>Di&&(e.flags|=128,r=!0,go(i,!1),e.lanes=4194304)}else{if(!r)if(t=Tc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),go(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return at(e),null}else 2*Ae()-i.renderingStartTime>Di&&n!==1073741824&&(e.flags|=128,r=!0,go(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ae(),e.sibling=null,n=xe.current,pe(xe,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return Wm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function PT(t,e){switch(Cm(e),e.tag){case 1:return It(e.type)&&wc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mi(),ye(Ot),ye(dt),Mm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rm(e),null;case 13:if(ye(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));ji()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(xe),null;case 4:return Mi(),null;case 10:return Am(e.type._context),null;case 22:case 23:return Wm(),null;case 24:return null;default:return null}}var gl=!1,ct=!1,DT=typeof WeakSet=="function"?WeakSet:Set,U=null;function yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Wf(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var k0=!1;function LT(t,e){if(Tf=yc,t=kw(),Sm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===s&&(a=o),h===i&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Af={focusedElem:t,selectionRange:n},yc=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:fn(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(k){Ne(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return m=k0,k0=!1,m}function Fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Wf(e,n,i)}s=s.next}while(s!==r)}}function Zu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function v1(t){var e=t.alternate;e!==null&&(t.alternate=null,v1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rn],delete e[ha],delete e[jf],delete e[bT],delete e[xT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function b1(t){return t.tag===5||t.tag===3||t.tag===4}function S0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||b1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xc));else if(r!==4&&(t=t.child,t!==null))for(Gf(t,e,n),t=t.sibling;t!==null;)Gf(t,e,n),t=t.sibling}function Kf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}var Ze=null,mn=!1;function or(t,e,n){for(n=n.child;n!==null;)x1(t,e,n),n=n.sibling}function x1(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Wu,n)}catch{}switch(n.tag){case 5:ct||yi(n,e);case 6:var r=Ze,s=mn;Ze=null,or(t,e,n),Ze=r,mn=s,Ze!==null&&(mn?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(mn?(t=Ze,n=n.stateNode,t.nodeType===8?th(t.parentNode,n):t.nodeType===1&&th(t,n),aa(t)):th(Ze,n.stateNode));break;case 4:r=Ze,s=mn,Ze=n.stateNode.containerInfo,mn=!0,or(t,e,n),Ze=r,mn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Wf(n,e,o),s=s.next}while(s!==r)}or(t,e,n);break;case 1:if(!ct&&(yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ne(n,e,a)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,or(t,e,n),ct=r):or(t,e,n);break;default:or(t,e,n)}}function E0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DT),e.forEach(function(r){var s=qT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ze=a.stateNode,mn=!1;break e;case 3:Ze=a.stateNode.containerInfo,mn=!0;break e;case 4:Ze=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(Ze===null)throw Error(M(160));x1(i,o,s),Ze=null,mn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ne(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)w1(e,t),e=e.sibling}function w1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),Nn(t),r&4){try{Fo(3,t,t.return),Zu(3,t)}catch(g){Ne(t,t.return,g)}try{Fo(5,t,t.return)}catch(g){Ne(t,t.return,g)}}break;case 1:dn(e,t),Nn(t),r&512&&n!==null&&yi(n,n.return);break;case 5:if(dn(e,t),Nn(t),r&512&&n!==null&&yi(n,n.return),t.flags&32){var s=t.stateNode;try{ra(s,"")}catch(g){Ne(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Vx(s,i),vf(a,o);var c=vf(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Kx(s,d):u==="dangerouslySetInnerHTML"?qx(s,d):u==="children"?ra(s,d):um(s,u,d,c)}switch(a){case"input":ff(s,i);break;case"textarea":Hx(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?xi(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?xi(s,!!i.multiple,i.defaultValue,!0):xi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ha]=i}catch(g){Ne(t,t.return,g)}}break;case 6:if(dn(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error(M(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Ne(t,t.return,g)}}break;case 3:if(dn(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{aa(e.containerInfo)}catch(g){Ne(t,t.return,g)}break;case 4:dn(e,t),Nn(t);break;case 13:dn(e,t),Nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vm=Ae())),r&4&&E0(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ct=(c=ct)||u,dn(e,t),ct=c):dn(e,t),Nn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(U=t,u=t.child;u!==null;){for(d=U=u;U!==null;){switch(h=U,f=h.child,h.tag){case 0:case 11:case 14:case 15:Fo(4,h,h.return);break;case 1:yi(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Ne(r,n,g)}}break;case 5:yi(h,h.return);break;case 22:if(h.memoizedState!==null){_0(d);continue}}f!==null?(f.return=h,U=f):_0(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Gx("display",o))}catch(g){Ne(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Ne(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dn(e,t),Nn(t),r&4&&E0(t);break;case 21:break;default:dn(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(b1(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ra(s,""),r.flags&=-33);var i=S0(t);Kf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=S0(t);Gf(t,a,o);break;default:throw Error(M(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $T(t,e,n){U=t,k1(t)}function k1(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var s=U,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||gl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ct;a=gl;var c=ct;if(gl=o,(ct=l)&&!c)for(U=s;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?N0(s):l!==null?(l.return=o,U=l):N0(s);for(;i!==null;)U=i,k1(i),i=i.sibling;U=s,gl=a,ct=c}C0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,U=i):C0(t)}}function C0(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||Zu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&c0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}c0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&aa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}ct||e.flags&512&&qf(e)}catch(h){Ne(e,e.return,h)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function _0(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function N0(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zu(4,e)}catch(l){Ne(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ne(e,s,l)}}var i=e.return;try{qf(e)}catch(l){Ne(e,i,l)}break;case 5:var o=e.return;try{qf(e)}catch(l){Ne(e,o,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var BT=Math.ceil,Ic=rr.ReactCurrentDispatcher,Fm=rr.ReactCurrentOwner,sn=rr.ReactCurrentBatchConfig,oe=0,Ve=null,Me=null,st=0,Dt=0,vi=Wr(0),$e=0,va=null,Is=0,ed=0,Um=0,Uo=null,_t=null,Vm=0,Di=1/0,Hn=null,jc=!1,Jf=null,Or=null,yl=!1,wr=null,Rc=0,Vo=0,Yf=null,Zl=-1,ec=0;function bt(){return oe&6?Ae():Zl!==-1?Zl:Zl=Ae()}function Ir(t){return t.mode&1?oe&2&&st!==0?st&-st:kT.transition!==null?(ec===0&&(ec=ow()),ec):(t=ue,t!==0||(t=window.event,t=t===void 0?16:fw(t.type)),t):1}function Sn(t,e,n,r){if(50<Vo)throw Vo=0,Yf=null,Error(M(185));Fa(t,n,r),(!(oe&2)||t!==Ve)&&(t===Ve&&(!(oe&2)&&(ed|=n),$e===4&&mr(t,st)),jt(t,r),n===1&&oe===0&&!(e.mode&1)&&(Di=Ae()+500,Yu&&qr()))}function jt(t,e){var n=t.callbackNode;k2(t,e);var r=gc(t,t===Ve?st:0);if(r===0)n!==null&&Dy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Dy(n),e===1)t.tag===0?wT(T0.bind(null,t)):jw(T0.bind(null,t)),yT(function(){!(oe&6)&&qr()}),n=null;else{switch(aw(r)){case 1:n=mm;break;case 4:n=sw;break;case 16:n=mc;break;case 536870912:n=iw;break;default:n=mc}n=O1(n,S1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function S1(t,e){if(Zl=-1,ec=0,oe&6)throw Error(M(327));var n=t.callbackNode;if(Ci()&&t.callbackNode!==n)return null;var r=gc(t,t===Ve?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mc(t,r);else{e=r;var s=oe;oe|=2;var i=C1();(Ve!==t||st!==e)&&(Hn=null,Di=Ae()+500,xs(t,e));do try{UT();break}catch(a){E1(t,a)}while(!0);Tm(),Ic.current=i,oe=s,Me!==null?e=0:(Ve=null,st=0,e=$e)}if(e!==0){if(e===2&&(s=Sf(t),s!==0&&(r=s,e=Qf(t,s))),e===1)throw n=va,xs(t,0),mr(t,r),jt(t,Ae()),n;if(e===6)mr(t,r);else{if(s=t.current.alternate,!(r&30)&&!zT(s)&&(e=Mc(t,r),e===2&&(i=Sf(t),i!==0&&(r=i,e=Qf(t,i))),e===1))throw n=va,xs(t,0),mr(t,r),jt(t,Ae()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:rs(t,_t,Hn);break;case 3:if(mr(t,r),(r&130023424)===r&&(e=Vm+500-Ae(),10<e)){if(gc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=If(rs.bind(null,t,_t,Hn),e);break}rs(t,_t,Hn);break;case 4:if(mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-kn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BT(r/1960))-r,10<r){t.timeoutHandle=If(rs.bind(null,t,_t,Hn),r);break}rs(t,_t,Hn);break;case 5:rs(t,_t,Hn);break;default:throw Error(M(329))}}}return jt(t,Ae()),t.callbackNode===n?S1.bind(null,t):null}function Qf(t,e){var n=Uo;return t.current.memoizedState.isDehydrated&&(xs(t,e).flags|=256),t=Mc(t,e),t!==2&&(e=_t,_t=n,e!==null&&Xf(e)),t}function Xf(t){_t===null?_t=t:_t.push.apply(_t,t)}function zT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Cn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~Um,e&=~ed,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kn(e),r=1<<n;t[n]=-1,e&=~r}}function T0(t){if(oe&6)throw Error(M(327));Ci();var e=gc(t,0);if(!(e&1))return jt(t,Ae()),null;var n=Mc(t,e);if(t.tag!==0&&n===2){var r=Sf(t);r!==0&&(e=r,n=Qf(t,r))}if(n===1)throw n=va,xs(t,0),mr(t,e),jt(t,Ae()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rs(t,_t,Hn),jt(t,Ae()),null}function Hm(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Di=Ae()+500,Yu&&qr())}}function js(t){wr!==null&&wr.tag===0&&!(oe&6)&&Ci();var e=oe;oe|=1;var n=sn.transition,r=ue;try{if(sn.transition=null,ue=1,t)return t()}finally{ue=r,sn.transition=n,oe=e,!(oe&6)&&qr()}}function Wm(){Dt=vi.current,ye(vi)}function xs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gT(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Cm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wc();break;case 3:Mi(),ye(Ot),ye(dt),Mm();break;case 5:Rm(r);break;case 4:Mi();break;case 13:ye(xe);break;case 19:ye(xe);break;case 10:Am(r.type._context);break;case 22:case 23:Wm()}n=n.return}if(Ve=t,Me=t=jr(t.current,null),st=Dt=e,$e=0,va=null,Um=ed=Is=0,_t=Uo=null,fs!==null){for(e=0;e<fs.length;e++)if(n=fs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}fs=null}return t}function E1(t,e){do{var n=Me;try{if(Tm(),Yl.current=Oc,Ac){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ac=!1}if(Os=0,ze=Le=ke=null,zo=!1,ma=0,Fm.current=null,n===null||n.return===null){$e=1,va=e,Me=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=m0(o);if(f!==null){f.flags&=-257,g0(f,o,a,i,e),f.mode&1&&p0(i,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){p0(i,c,e),qm();break e}l=Error(M(426))}}else if(be&&a.mode&1){var v=m0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),g0(v,o,a,i,e),_m(Pi(l,a));break e}}i=l=Pi(l,a),$e!==4&&($e=2),Uo===null?Uo=[i]:Uo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=a1(i,l,e);l0(i,y);break e;case 1:a=l;var b=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Or===null||!Or.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=l1(i,a,e);l0(i,k);break e}}i=i.return}while(i!==null)}N1(n)}catch(w){e=w,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function C1(){var t=Ic.current;return Ic.current=Oc,t===null?Oc:t}function qm(){($e===0||$e===3||$e===2)&&($e=4),Ve===null||!(Is&268435455)&&!(ed&268435455)||mr(Ve,st)}function Mc(t,e){var n=oe;oe|=2;var r=C1();(Ve!==t||st!==e)&&(Hn=null,xs(t,e));do try{FT();break}catch(s){E1(t,s)}while(!0);if(Tm(),oe=n,Ic.current=r,Me!==null)throw Error(M(261));return Ve=null,st=0,$e}function FT(){for(;Me!==null;)_1(Me)}function UT(){for(;Me!==null&&!f2();)_1(Me)}function _1(t){var e=A1(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?N1(t):Me=e,Fm.current=null}function N1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PT(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Me=null;return}}else if(n=MT(n,e,Dt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);$e===0&&($e=5)}function rs(t,e,n){var r=ue,s=sn.transition;try{sn.transition=null,ue=1,VT(t,e,n,r)}finally{sn.transition=s,ue=r}return null}function VT(t,e,n,r){do Ci();while(wr!==null);if(oe&6)throw Error(M(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(S2(t,i),t===Ve&&(Me=Ve=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yl||(yl=!0,O1(mc,function(){return Ci(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=sn.transition,sn.transition=null;var o=ue;ue=1;var a=oe;oe|=4,Fm.current=null,LT(t,n),w1(n,t),cT(Af),yc=!!Tf,Af=Tf=null,t.current=n,$T(n),p2(),oe=a,ue=o,sn.transition=i}else t.current=n;if(yl&&(yl=!1,wr=t,Rc=s),i=t.pendingLanes,i===0&&(Or=null),y2(n.stateNode),jt(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jc)throw jc=!1,t=Jf,Jf=null,t;return Rc&1&&t.tag!==0&&Ci(),i=t.pendingLanes,i&1?t===Yf?Vo++:(Vo=0,Yf=t):Vo=0,qr(),null}function Ci(){if(wr!==null){var t=aw(Rc),e=sn.transition,n=ue;try{if(sn.transition=null,ue=16>t?16:t,wr===null)var r=!1;else{if(t=wr,wr=null,Rc=0,oe&6)throw Error(M(331));var s=oe;for(oe|=4,U=t.current;U!==null;){var i=U,o=i.child;if(U.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(U=c;U!==null;){var u=U;switch(u.tag){case 0:case 11:case 15:Fo(8,u,i)}var d=u.child;if(d!==null)d.return=u,U=d;else for(;U!==null;){u=U;var h=u.sibling,f=u.return;if(v1(u),u===c){U=null;break}if(h!==null){h.return=f,U=h;break}U=f}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}U=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,U=o;else e:for(;U!==null;){if(i=U,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,U=y;break e}U=i.return}}var b=t.current;for(U=b;U!==null;){o=U;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,U=x;else e:for(o=b;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zu(9,a)}}catch(w){Ne(a,a.return,w)}if(a===o){U=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,U=k;break e}U=a.return}}if(oe=s,qr(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Wu,t)}catch{}r=!0}return r}finally{ue=n,sn.transition=e}}return!1}function A0(t,e,n){e=Pi(n,e),e=a1(t,e,1),t=Ar(t,e,1),e=bt(),t!==null&&(Fa(t,1,e),jt(t,e))}function Ne(t,e,n){if(t.tag===3)A0(t,t,n);else for(;e!==null;){if(e.tag===3){A0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=Pi(n,t),t=l1(e,t,1),e=Ar(e,t,1),t=bt(),e!==null&&(Fa(e,1,t),jt(e,t));break}}e=e.return}}function HT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,Ve===t&&(st&n)===n&&($e===4||$e===3&&(st&130023424)===st&&500>Ae()-Vm?xs(t,0):Um|=n),jt(t,e)}function T1(t,e){e===0&&(t.mode&1?(e=al,al<<=1,!(al&130023424)&&(al=4194304)):e=1);var n=bt();t=tr(t,e),t!==null&&(Fa(t,e,n),jt(t,n))}function WT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),T1(t,n)}function qT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),T1(t,n)}var A1;A1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,RT(t,e,n);At=!!(t.flags&131072)}else At=!1,be&&e.flags&1048576&&Rw(e,Ec,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xl(t,e),t=e.pendingProps;var s=Ii(e,dt.current);Ei(e,n),s=Dm(null,e,r,t,s,n);var i=Lm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(i=!0,kc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Im(e),s.updater=Xu,e.stateNode=s,s._reactInternals=e,$f(e,r,t,n),e=Ff(null,e,r,!0,i,n)):(e.tag=0,be&&i&&Em(e),yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=KT(r),t=fn(r,t),s){case 0:e=zf(null,e,r,t,n);break e;case 1:e=b0(null,e,r,t,n);break e;case 11:e=y0(null,e,r,t,n);break e;case 14:e=v0(null,e,r,fn(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),zf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),b0(t,e,r,s,n);case 3:e:{if(h1(e),t===null)throw Error(M(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Bw(t,e),Nc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pi(Error(M(423)),e),e=x0(t,e,r,n,s);break e}else if(r!==s){s=Pi(Error(M(424)),e),e=x0(t,e,r,n,s);break e}else for(Bt=Tr(e.stateNode.containerInfo.firstChild),Ft=e,be=!0,yn=null,n=Lw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ji(),r===s){e=nr(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return zw(e),t===null&&Pf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Of(r,s)?o=null:i!==null&&Of(r,i)&&(e.flags|=32),d1(t,e),yt(t,e,o,n),e.child;case 6:return t===null&&Pf(e),null;case 13:return f1(t,e,n);case 4:return jm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ri(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),y0(t,e,r,s,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pe(Cc,r._currentValue),r._currentValue=o,i!==null)if(Cn(i.value,o)){if(i.children===s.children&&!Ot.current){e=nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Yn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Df(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(M(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Df(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ei(e,n),s=cn(s),r=r(s),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),v0(t,e,r,s,n);case 15:return c1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Xl(t,e),e.tag=1,It(r)?(t=!0,kc(e)):t=!1,Ei(e,n),o1(e,r,s),$f(e,r,s,n),Ff(null,e,r,!0,t,n);case 19:return p1(t,e,n);case 22:return u1(t,e,n)}throw Error(M(156,e.tag))};function O1(t,e){return rw(t,e)}function GT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,r){return new GT(t,e,n,r)}function Gm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KT(t){if(typeof t=="function")return Gm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hm)return 11;if(t===fm)return 14}return 2}function jr(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Gm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case li:return ws(n.children,s,i,e);case dm:o=8,s|=8;break;case lf:return t=nn(12,n,e,s|2),t.elementType=lf,t.lanes=i,t;case cf:return t=nn(13,n,e,s),t.elementType=cf,t.lanes=i,t;case uf:return t=nn(19,n,e,s),t.elementType=uf,t.lanes=i,t;case zx:return td(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $x:o=10;break e;case Bx:o=9;break e;case hm:o=11;break e;case fm:o=14;break e;case cr:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=nn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ws(t,e,n,r){return t=nn(7,t,r,e),t.lanes=n,t}function td(t,e,n,r){return t=nn(22,t,r,e),t.elementType=zx,t.lanes=n,t.stateNode={isHidden:!1},t}function ch(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function uh(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hd(0),this.expirationTimes=Hd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Km(t,e,n,r,s,i,o,a,l){return t=new JT(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Im(i),t}function YT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ai,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function I1(t){if(!t)return zr;t=t._reactInternals;e:{if(Fs(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(It(n))return Iw(t,n,e)}return e}function j1(t,e,n,r,s,i,o,a,l){return t=Km(n,r,!0,t,s,i,o,a,l),t.context=I1(null),n=t.current,r=bt(),s=Ir(n),i=Yn(r,s),i.callback=e??null,Ar(n,i,s),t.current.lanes=s,Fa(t,s,r),jt(t,r),t}function nd(t,e,n,r){var s=e.current,i=bt(),o=Ir(s);return n=I1(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ar(s,e,o),t!==null&&(Sn(t,s,o,i),Jl(t,s,o)),o}function Pc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jm(t,e){O0(t,e),(t=t.alternate)&&O0(t,e)}function QT(){return null}var R1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ym(t){this._internalRoot=t}rd.prototype.render=Ym.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));nd(t,e,null,null)};rd.prototype.unmount=Ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;js(function(){nd(null,t,null,null)}),e[er]=null}};function rd(t){this._internalRoot=t}rd.prototype.unstable_scheduleHydration=function(t){if(t){var e=uw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&hw(t)}};function Qm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I0(){}function XT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Pc(o);i.call(c)}}var o=j1(e,r,t,0,null,!1,!1,"",I0);return t._reactRootContainer=o,t[er]=o.current,ua(t.nodeType===8?t.parentNode:t),js(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Pc(l);a.call(c)}}var l=Km(t,0,!1,null,null,!1,!1,"",I0);return t._reactRootContainer=l,t[er]=l.current,ua(t.nodeType===8?t.parentNode:t),js(function(){nd(e,l,n,r)}),l}function id(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Pc(o);a.call(l)}}nd(e,o,t,s)}else o=XT(n,e,t,s,r);return Pc(o)}lw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_o(e.pendingLanes);n!==0&&(gm(e,n|1),jt(e,Ae()),!(oe&6)&&(Di=Ae()+500,qr()))}break;case 13:js(function(){var r=tr(t,1);if(r!==null){var s=bt();Sn(r,t,1,s)}}),Jm(t,1)}};ym=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=bt();Sn(e,t,134217728,n)}Jm(t,134217728)}};cw=function(t){if(t.tag===13){var e=Ir(t),n=tr(t,e);if(n!==null){var r=bt();Sn(n,t,e,r)}Jm(t,e)}};uw=function(){return ue};dw=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};xf=function(t,e,n){switch(e){case"input":if(ff(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ju(r);if(!s)throw Error(M(90));Ux(r),ff(r,s)}}}break;case"textarea":Hx(t,n);break;case"select":e=n.value,e!=null&&xi(t,!!n.multiple,e,!1)}};Qx=Hm;Xx=js;var ZT={usingClientEntryPoint:!1,Events:[Va,hi,Ju,Jx,Yx,Hm]},yo={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eA={bundleType:yo.bundleType,version:yo.version,rendererPackageName:yo.rendererPackageName,rendererConfig:yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tw(t),t===null?null:t.stateNode},findFiberByHostInstance:yo.findFiberByHostInstance||QT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{Wu=vl.inject(eA),Mn=vl}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZT;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qm(e))throw Error(M(200));return YT(t,e,null,n)};qt.createRoot=function(t,e){if(!Qm(t))throw Error(M(299));var n=!1,r="",s=R1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Km(t,1,!1,null,null,n,!1,r,s),t[er]=e.current,ua(t.nodeType===8?t.parentNode:t),new Ym(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=tw(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return js(t)};qt.hydrate=function(t,e,n){if(!sd(e))throw Error(M(200));return id(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!Qm(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=R1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=j1(e,null,t,1,n??null,s,!1,i,o),t[er]=e.current,ua(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rd(e)};qt.render=function(t,e,n){if(!sd(e))throw Error(M(200));return id(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!sd(t))throw Error(M(40));return t._reactRootContainer?(js(function(){id(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};qt.unstable_batchedUpdates=Hm;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sd(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return id(t,e,n,!1,r)};qt.version="18.3.1-next-f1338f8080-20240426";function M1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M1)}catch(t){console.error(t)}}M1(),Mx.exports=qt;var od=Mx.exports;const P1=rm(od);var j0=od;of.createRoot=j0.createRoot,of.hydrateRoot=j0.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(t,e)=>{const n=C.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>C.createElement("svg",{ref:u,...tA,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${nA(t)}`,a].join(" "),...c},[...e.map(([d,h])=>C.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=$("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=$("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=$("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=$("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=$("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=$("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=$("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=$("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=$("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=$("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=$("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=$("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=$("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=$("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=$("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=$("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=$("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=$("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=$("Clover",[["path",{d:"M16.17 7.83 2 22",key:"t58vo8"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12",key:"17k36q"}],["path",{d:"m7.83 7.83 8.34 8.34",key:"1d7sxk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=$("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=$("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=$("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=$("Flower2",[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=$("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=$("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=$("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=$("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=$("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=$("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=$("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=$("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=$("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=$("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=$("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=$("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=$("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=$("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=$("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=$("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=$("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=$("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=$("MoonStar",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}],["path",{d:"M19 3v4",key:"vgv24u"}],["path",{d:"M21 5h-4",key:"1wcg1f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=$("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=$("Music4",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["path",{d:"m9 9 12-2",key:"1e64n2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=$("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=$("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=$("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=$("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=$("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=$("Rainbow",[["path",{d:"M22 17a10 10 0 0 0-20 0",key:"ozegv"}],["path",{d:"M6 17a6 6 0 0 1 12 0",key:"5giftw"}],["path",{d:"M10 17a2 2 0 0 1 4 0",key:"gnsikk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=$("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=$("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=$("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=$("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=$("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=$("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=$("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=$("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=$("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=$("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=$("SquareUser",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=$("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=$("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=$("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=$("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=$("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=$("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=$("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=$("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=$("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=$("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=$("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=$("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var rg={},Lc={},tp=function(t,e){return tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},tp(t,e)};function uk(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");tp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $c=function(){return $c=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$c.apply(this,arguments)};function to(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function dk(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function hk(t,e){return function(n,r){e(n,r,t)}}function fk(t,e,n,r,s,i){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,f=n.length-1;f>=0;f--){var m={};for(var g in r)m[g]=g==="access"?{}:r[g];for(var g in r.access)m.access[g]=r.access[g];m.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(y||null))};var v=(0,n[f])(a==="accessor"?{get:u.get,set:u.set}:u[l],m);if(a==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=o(v.get))&&(u.get=d),(d=o(v.set))&&(u.set=d),(d=o(v.init))&&s.unshift(d)}else(d=o(v))&&(a==="field"?s.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0}function pk(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function mk(t){return typeof t=="symbol"?t:"".concat(t)}function gk(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function yk(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function V(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function vk(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var cd=Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function bk(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&cd(e,t,n)}function Bc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sg(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function xk(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(sg(arguments[e]));return t}function wk(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function kk(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function $i(t){return this instanceof $i?(this.v=t,this):new $i(t)}function Sk(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(m){return Promise.resolve(m).then(f,d)}}function a(f,m){r[f]&&(s[f]=function(g){return new Promise(function(v,y){i.push([f,g,v,y])>1||l(f,g)})},m&&(s[f]=m(s[f])))}function l(f,m){try{c(r[f](m))}catch(g){h(i[0][3],g)}}function c(f){f.value instanceof $i?Promise.resolve(f.value.v).then(u,d):h(i[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,m){f(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Ek(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:$i(t[s](o)),done:!1}:i?i(o):o}:i}}function Ck(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Bc=="function"?Bc(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function _k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var LA=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},np=function(t){return np=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},np(t)};function Nk(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=np(t),r=0;r<n.length;r++)n[r]!=="default"&&cd(e,t,n[r]);return LA(e,t),e}function Tk(t){return t&&t.__esModule?t:{default:t}}function Ak(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Ok(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function Ik(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function jk(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var $A=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Rk(t){function e(i){t.error=t.hasError?new $A(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var n,r=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Mk(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,i,o){return r?e?".jsx":".js":s&&(!i||!o)?n:s+i+"."+o.toLowerCase()+"js"}):t}const BA={__extends:uk,__assign:$c,__rest:to,__decorate:dk,__param:hk,__esDecorate:fk,__runInitializers:pk,__propKey:mk,__setFunctionName:gk,__metadata:yk,__awaiter:V,__generator:vk,__createBinding:cd,__exportStar:bk,__values:Bc,__read:sg,__spread:xk,__spreadArrays:wk,__spreadArray:kk,__await:$i,__asyncGenerator:Sk,__asyncDelegator:Ek,__asyncValues:Ck,__makeTemplateObject:_k,__importStar:Nk,__importDefault:Tk,__classPrivateFieldGet:Ak,__classPrivateFieldSet:Ok,__classPrivateFieldIn:Ik,__addDisposableResource:jk,__disposeResources:Rk,__rewriteRelativeImportExtension:Mk},zA=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jk,get __assign(){return $c},__asyncDelegator:Ek,__asyncGenerator:Sk,__asyncValues:Ck,__await:$i,__awaiter:V,__classPrivateFieldGet:Ak,__classPrivateFieldIn:Ik,__classPrivateFieldSet:Ok,__createBinding:cd,__decorate:dk,__disposeResources:Rk,__esDecorate:fk,__exportStar:bk,__extends:uk,__generator:vk,__importDefault:Tk,__importStar:Nk,__makeTemplateObject:_k,__metadata:yk,__param:hk,__propKey:mk,__read:sg,__rest:to,__rewriteRelativeImportExtension:Mk,__runInitializers:pk,__setFunctionName:gk,__spread:xk,__spreadArray:kk,__spreadArrays:wk,__values:Bc,default:BA},Symbol.toStringTag,{value:"Module"})),FA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let ud=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},Pk=class extends ud{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},rp=class extends ud{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},sp=class extends ud{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var zc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(zc||(zc={}));class UA{constructor(e,{headers:n={},customFetch:r,region:s=zc.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=FA(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return V(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=r;let h={},{region:f}=r;f||(f=this.region);const m=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,m.searchParams.set("forceFunctionRegion",f));let g;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(h["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(h["Content-Type"]="application/json",g=JSON.stringify(c)):g=c;let v=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(v=o.signal,u.addEventListener("abort",()=>o.abort())):v=o.signal);const y=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g,signal:v}).catch(w=>{throw new Pk(w)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new rp(y);if(!y.ok)throw new sp(y);let x=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),k;return x==="application/json"?k=yield y.json():x==="application/octet-stream"||x==="application/pdf"?k=yield y.blob():x==="text/event-stream"?k=y:x==="multipart/form-data"?k=yield y.formData():k=yield y.text(),{data:k,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof sp||a instanceof rp?a.context:void 0}}finally{i&&clearTimeout(i)}})}}const VA=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return zc},FunctionsClient:UA,FunctionsError:ud,FunctionsFetchError:Pk,FunctionsHttpError:sp,FunctionsRelayError:rp},Symbol.toStringTag,{value:"Module"})),Dk=Ba(VA);var ut={};const no=Ba(zA);var bl={},xl={},wl={},kl={},Sl={},El={},R0;function Lk(){if(R0)return El;R0=1,Object.defineProperty(El,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return El.default=t,El}var M0;function $k(){if(M0)return Sl;M0=1,Object.defineProperty(Sl,"__esModule",{value:!0});const e=no.__importDefault(Lk());let n=class{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,d,h;let f=null,m=null,g=null,v=l.status,y=l.statusText;if(l.ok){if(this.method!=="HEAD"){const w=await l.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?m=w:m=JSON.parse(w))}const x=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),k=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");x&&k&&k.length>1&&(g=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,v=406,y="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const x=await l.text();try{f=JSON.parse(x),Array.isArray(f)&&l.status===404&&(m=[],f=null,v=200,y="OK")}catch{l.status===404&&x===""?(v=204,y="No Content"):f={message:x}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,v=200,y="OK"),f&&this.shouldThrowOnError)throw new e.default(f)}return{error:f,data:m,count:g,status:v,statusText:y}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,u,d,h,f,m;let g="";const v=l==null?void 0:l.cause;if(v){const y=(c=v==null?void 0:v.message)!==null&&c!==void 0?c:"",b=(u=v==null?void 0:v.code)!==null&&u!==void 0?u:"";g=`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,g+=`

Caused by: ${(h=v==null?void 0:v.name)!==null&&h!==void 0?h:"Error"}: ${y}`,b&&(g+=` (${b})`),v!=null&&v.stack&&(g+=`
${v.stack}`)}else g=(f=l==null?void 0:l.stack)!==null&&f!==void 0?f:"";return{error:{message:`${(m=l==null?void 0:l.name)!==null&&m!==void 0?m:"FetchError"}: ${l==null?void 0:l.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}};return Sl.default=n,Sl}var P0;function Bk(){if(P0)return kl;P0=1,Object.defineProperty(kl,"__esModule",{value:!0});const e=no.__importDefault($k());let n=class extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};return kl.default=n,kl}var D0;function ig(){if(D0)return wl;D0=1,Object.defineProperty(wl,"__esModule",{value:!0});const e=no.__importDefault(Bk()),n=new RegExp("[,()]");let r=class extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}};return wl.default=r,wl}var L0;function zk(){if(L0)return xl;L0=1,Object.defineProperty(xl,"__esModule",{value:!0});const e=no.__importDefault(ig());let n=class{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const u=(s??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return xl.default=n,xl}var $0;function HA(){if($0)return bl;$0=1,Object.defineProperty(bl,"__esModule",{value:!0});const t=no,e=t.__importDefault(zk()),n=t.__importDefault(ig());let r=class Fk{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new Fk(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let d;const h=new URL(`${this.url}/rpc/${i}`);let f;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{h.searchParams.append(g,v)})):(d="POST",f=o);const m=new Headers(this.headers);return c&&m.set("Prefer",`count=${c}`),new n.default({method:d,url:h,headers:m,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return bl.default=r,bl}Object.defineProperty(ut,"__esModule",{value:!0});ut.PostgrestError=ut.PostgrestBuilder=ut.PostgrestTransformBuilder=ut.PostgrestFilterBuilder=ut.PostgrestQueryBuilder=ut.PostgrestClient=void 0;const ro=no,Uk=ro.__importDefault(HA());ut.PostgrestClient=Uk.default;const Vk=ro.__importDefault(zk());ut.PostgrestQueryBuilder=Vk.default;const Hk=ro.__importDefault(ig());ut.PostgrestFilterBuilder=Hk.default;const Wk=ro.__importDefault(Bk());ut.PostgrestTransformBuilder=Wk.default;const qk=ro.__importDefault($k());ut.PostgrestBuilder=qk.default;const Gk=ro.__importDefault(Lk());ut.PostgrestError=Gk.default;ut.default={PostgrestClient:Uk.default,PostgrestQueryBuilder:Vk.default,PostgrestFilterBuilder:Hk.default,PostgrestTransformBuilder:Wk.default,PostgrestBuilder:qk.default,PostgrestError:Gk.default};class Kk{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const WA="2.87.1",qA=`realtime-js/${WA}`,Jk="1.0.0",GA="2.0.0",B0=Jk,ip=1e4,KA=1e3,JA=100;var cs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(cs||(cs={}));var je;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(je||(je={}));var gn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gn||(gn={}));var op;(function(t){t.websocket="websocket"})(op||(op={}));var us;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(us||(us={}));class YA{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(f),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,l.length),m.setUint8(g++,a.length),m.setUint8(g++,o.length),m.setUint8(g++,c.length),m.setUint8(g++,d.length),m.setUint8(g++,n),Array.from(l,y=>m.setUint8(g++,y.charCodeAt(0))),Array.from(a,y=>m.setUint8(g++,y.charCodeAt(0))),Array.from(o,y=>m.setUint8(g++,y.charCodeAt(0))),Array.from(c,y=>m.setUint8(g++,y.charCodeAt(0))),Array.from(d,y=>m.setUint8(g++,y.charCodeAt(0)));var v=new Uint8Array(f.byteLength+r.byteLength);return v.set(new Uint8Array(f),0),v.set(new Uint8Array(r),f.byteLength),v.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+s));l=l+s;const u=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const h=e.slice(l,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,m={type:this.BROADCAST_EVENT,event:u,payload:f};return o>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Yk{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var fe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(fe||(fe={}));const z0=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=QA(o,t,e,s),i),{}):{}},QA=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Qk(i,o):ap(o)},Qk=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return tO(e,n)}switch(t){case fe.bool:return XA(e);case fe.float4:case fe.float8:case fe.int2:case fe.int4:case fe.int8:case fe.numeric:case fe.oid:return ZA(e);case fe.json:case fe.jsonb:return eO(e);case fe.timestamp:return nO(e);case fe.abstime:case fe.date:case fe.daterange:case fe.int4range:case fe.int8range:case fe.money:case fe.reltime:case fe.text:case fe.time:case fe.timestamptz:case fe.timetz:case fe.tsrange:case fe.tstzrange:return ap(e);default:return ap(e)}},ap=t=>t,XA=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ZA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},eO=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},tO=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Qk(e,a))}return t},nO=t=>typeof t=="string"?t.replace(" ","T"):t,Xk=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class dh{constructor(e,n,r={},s=ip){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var lp;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(lp||(lp={}));let Zk=class nc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nc.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=nc.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=nc.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const h=u.map(v=>v.presence_ref),f=d.map(v=>v.presence_ref),m=u.filter(v=>f.indexOf(v.presence_ref)<0),g=d.filter(v=>h.indexOf(v.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var cp;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(cp||(cp={}));var _i;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_i||(_i={}));var jn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(jn||(jn={}));const rO=je;let eS=class To{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dh(this,gn.join,this.params,this.timeout),this.rejoinTimer=new Yk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=je.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gn.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Zk(this),this.broadcastEndpointURL=Xk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==je.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[_i.PRESENCE]&&this.bindings[_i.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(jn.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(jn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e==null||e(jn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,y=[];for(let b=0;b<v;b++){const x=g[b],{filter:{event:k,schema:w,table:S,filter:E}}=x,_=f&&f[b];if(_&&_.event===k&&To.isFilterValueEqual(_.schema,w)&&To.isFilterValueEqual(_.table,S)&&To.isFilterValueEqual(_.filter,E))y.push(Object.assign(Object.assign({},x),{id:_.id}));else{this.unsubscribe(),this.state=je.errored,e==null||e(jn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(jn.SUBSCRIBED);return}}).receive("error",f=>{this.state=je.errored,e==null||e(jn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(jn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===je.joined&&e===_i.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=je.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new dh(this,gn.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=je.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new dh(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>JA){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=gn;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var m,g,v;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(g=f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var m,g,v,y,b,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const k=f.id,w=(m=f.filter)===null||m===void 0?void 0:m.event;return k&&((g=n.ids)===null||g===void 0?void 0:g.includes(k))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(b=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return k==="*"||k===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:g,table:v,commit_timestamp:y,type:b,errors:x}=m;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:b,new:{},old:{},errors:x}),this._getPayloadRecords(m))}f.callback(h,r)})}_isClosed(){return this.state===je.closed}_isJoined(){return this.state===je.joined}_isJoining(){return this.state===je.joining}_isLeaving(){return this.state===je.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&To.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gn.close,{},e)}_onError(e){this._on(gn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=je.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=z0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=z0(e.columns,e.old_record)),n}};const hh=()=>{},Cl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sO=[1e3,2e3,5e3,1e4],iO=1e4,oO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let aO=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ip,this.transport=null,this.heartbeatIntervalMs=Cl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hh,this.ref=0,this.reconnectTimer=null,this.vsn=B0,this.logger=hh,this.conn=null,this.sendBuffer=[],this.serializer=new YA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${op.websocket}`,this.httpEndpoint=Xk(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kk.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case cs.connecting:return us.Connecting;case cs.open:return us.Open;case cs.closing:return us.Closing;default:return us.Closed}}isConnected(){return this.connectionState()===us.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new eS(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(KA,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Cl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===cs.open||this.conn.readyState===cs.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([oO],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:qA};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(gn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Yk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,c,u,d,h,f;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ip,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Cl.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:hh,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:B0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>sO[m-1]||iO,this.vsn){case Jk:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(m,g)=>g(JSON.stringify(m)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(m,g)=>g(JSON.parse(m));break;case GA:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const lO=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:rO,get REALTIME_LISTEN_TYPES(){return _i},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return cp},get REALTIME_PRESENCE_LISTEN_EVENTS(){return lp},get REALTIME_SUBSCRIBE_STATES(){return jn},RealtimeChannel:eS,RealtimeClient:aO,RealtimePresence:Zk,WebSocketFactory:Kk},Symbol.toStringTag,{value:"Module"})),tS=Ba(lO);class Wa extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ve(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class nS extends Wa{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fc extends Wa{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const og=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cO=()=>Response,up=t=>{if(Array.isArray(t))return t.map(n=>up(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=up(r)}),e},uO=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},dO=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),fh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},hO=(t,e,n)=>V(void 0,void 0,void 0,function*(){const r=yield cO();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new nS(fh(s),i,o))}).catch(s=>{e(new Fc(fh(s),s))}):e(new Fc(fh(t),t))}),fO=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(uO(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function qa(t,e,n,r,s,i){return V(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,fO(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>hO(l,a,r))})})}function xa(t,e,n,r){return V(this,void 0,void 0,function*(){return qa(t,"GET",e,n,r)})}function pn(t,e,n,r,s){return V(this,void 0,void 0,function*(){return qa(t,"POST",e,r,s,n)})}function dp(t,e,n,r,s){return V(this,void 0,void 0,function*(){return qa(t,"PUT",e,r,s,n)})}function pO(t,e,n,r){return V(this,void 0,void 0,function*(){return qa(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function ag(t,e,n,r,s){return V(this,void 0,void 0,function*(){return qa(t,"DELETE",e,r,s,n)})}class mO{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return V(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ve(e))return{data:null,error:e};throw e}})}}var rS;class gO{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[rS]="BlobDownloadBuilder",this.promise=null}asStream(){return new mO(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return V(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ve(e))return{data:null,error:e};throw e}})}}rS=Symbol.toStringTag;const yO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},F0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vO{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=og(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return V(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},F0),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield(e=="PUT"?dp:pn)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ve(i))return{data:null,error:i};throw i}})}upload(e,n,r){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return V(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:F0.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield dp(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ve(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return V(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield pn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Wa("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}})}update(e,n,r){return V(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return V(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}})}copy(e,n,r){return V(this,void 0,void 0,function*(){try{return{data:{path:(yield pn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return V(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield pn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return V(this,void 0,void 0,function*(){try{const s=yield pn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>xa(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new gO(l,this.shouldThrowOnError)}info(e){return V(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield xa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:up(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}})}exists(e){return V(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pO(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r)&&r instanceof Fc){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return V(this,void 0,void 0,function*(){try{return{data:yield ag(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}})}list(e,n,r){return V(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},yO),n),{prefix:e||""});return{data:yield pn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}})}listV2(e,n){return V(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield pn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const sS="2.87.1",iS={"X-Client-Info":`storage-js/${sS}`};class bO{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iS),n),this.fetch=og(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return V(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield xa(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}})}getBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}})}createBucket(e){return V(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield pn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ve(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return V(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ve(r))return{data:null,error:r};throw r}})}emptyBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}})}deleteBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield ag(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var wa=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function xO(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function wO(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function kO(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=xO(t.baseUrl,r,s),l=await wO(t.auth),c=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){const f=d?h:void 0,m=f==null?void 0:f.error;throw new wa((m==null?void 0:m.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:f})}return{status:c.status,headers:c.headers,data:h}}}}function _l(t){return t.join("")}var SO=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:_l(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_l(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_l(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_l(t.namespace)}`}),!0}catch(e){if(e instanceof wa&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof wa&&n.status===409)return;throw n}}};function Ks(t){return t.join("")}var EO=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ks(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ks(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ks(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ks(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ks(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ks(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof wa&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof wa&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},CO=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=kO({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new SO(this.client,e),this.tableOps=new EO(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class oS{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iS),n),this.fetch=og(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}})}listBuckets(e){return V(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield xa(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}})}deleteBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield ag(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ve(n))return{data:null,error:n};throw n}})}from(e){if(!dO(e))throw new Wa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new CO({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>V(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const a=i[o];return typeof a!="function"?a:(...l)=>V(this,void 0,void 0,function*(){try{return{data:yield a.apply(i,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}})}})}}const lg={"X-Client-Info":`storage-js/${sS}`,"Content-Type":"application/json"};class cg extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Tt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class rc extends cg{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class aS extends cg{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var hp;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(hp||(hp={}));const dd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_O=()=>Response,lS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},NO=t=>Array.from(new Float32Array(t)),TO=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},U0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),AO=(t,e,n)=>V(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new rc(U0(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new rc(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new rc(a,s,o))}}else e(new aS(U0(t),t))}),OO=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(lS(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function IO(t,e,n,r,s,i){return V(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,OO(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>AO(l,a,r))})})}function Lt(t,e,n,r,s){return V(this,void 0,void 0,function*(){return IO(t,"POST",e,r,s,n)})}class cS{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lg),n),this.fetch=dd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return V(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}getIndex(e,n){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}listIndexes(e){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return V(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tt(r))return{data:null,error:r};throw r}})}}class uS{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lg),n),this.fetch=dd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return V(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}getVectors(e){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}listVectors(e){return V(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Lt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}queryVectors(e){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}deleteVectors(e){return V(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}}class dS{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lg),n),this.fetch=dd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return V(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}getBucket(e){return V(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}listBuckets(){return V(this,arguments,void 0,function*(e={}){try{return{data:yield Lt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return V(this,void 0,void 0,function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tt(n))return{data:null,error:n};throw n}})}}class hS extends dS{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new fS(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return V(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return V(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return V(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return V(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class fS extends cS{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return V(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return V(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return V(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return V(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new pS(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class pS extends uS{constructor(e,n,r,s,i){super(e,n,i),this.vectorBucketName=r,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return V(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return V(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return V(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return V(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return V(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class jO extends bO{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new vO(this.url,this.headers,e,this.fetch)}get vectors(){return new hS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new oS(this.url+"/iceberg",this.headers,this.fetch)}}const RO=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:oS,StorageApiError:nS,StorageClient:jO,StorageError:Wa,StorageUnknownError:Fc,StorageVectorsApiError:rc,StorageVectorsClient:hS,StorageVectorsError:cg,get StorageVectorsErrorCode(){return hp},StorageVectorsUnknownError:aS,VectorBucketApi:dS,VectorBucketScope:fS,VectorDataApi:uS,VectorIndexApi:cS,VectorIndexScope:pS,isPlainObject:lS,isStorageError:ve,isStorageVectorsError:Tt,normalizeToFloat32:NO,resolveFetch:dd,resolveResponse:_O,validateVectorDimension:TO},Symbol.toStringTag,{value:"Module"})),MO=Ba(RO);var mS={},hd={};Object.defineProperty(hd,"__esModule",{value:!0});hd.version=void 0;hd.version="2.87.1";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=hd;let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(mS);var gS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=s=>s?(...i)=>s(...i):(...i)=>fetch(...i);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const r=(s,i,o)=>{const a=(0,t.resolveFetch)(o),l=(0,t.resolveHeadersConstructor)();return async(c,u)=>{var d;const h=(d=await i())!==null&&d!==void 0?d:s;let f=new l(u==null?void 0:u.headers);return f.has("apikey")||f.set("apikey",s),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),a(c,Object.assign(Object.assign({},u),{headers:f}))}};t.fetchWithAuth=r})(gS);var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.isBrowser=void 0;Gr.uuid=PO;Gr.ensureTrailingSlash=yS;Gr.applySettingDefaults=LO;Gr.validateSupabaseUrl=$O;function PO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})}function yS(t){return t.endsWith("/")?t:t+"/"}const DO=()=>typeof window<"u";Gr.isBrowser=DO;function LO(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function $O(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(yS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var fd={};const vS="2.87.1",ti=30*1e3,fp=3,ph=fp*ti,BO="http://localhost:9999",zO="supabase.auth.token",FO={"X-Client-Info":`gotrue-js/${vS}`},pp="X-Supabase-Api-Version",bS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,VO=10*60*1e3;let Bi=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let xS=class extends Bi{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function wS(t){return H(t)&&t.name==="AuthApiError"}let gr=class extends Bi{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},sr=class extends Bi{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}},Ct=class extends sr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function kS(t){return H(t)&&t.name==="AuthSessionMissingError"}let ss=class extends sr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Ao=class extends sr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Oo=class extends sr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function SS(t){return H(t)&&t.name==="AuthImplicitGrantRedirectError"}let mp=class extends sr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Uc=class extends sr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function sc(t){return H(t)&&t.name==="AuthRetryableFetchError"}let gp=class extends sr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function HO(t){return H(t)&&t.name==="AuthWeakPasswordError"}let Vc=class extends sr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),V0=` 	
\r=`.split(""),WO=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<V0.length;e+=1)t[V0[e].charCodeAt(0)]=-2;for(let e=0;e<Hc.length;e+=1)t[Hc[e].charCodeAt(0)]=e;return t})();function H0(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Hc[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Hc[r]),e.queuedBits-=6}}function ES(t,e,n){const r=WO[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function W0(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{KO(o,r,n)};for(let o=0;o<t.length;o+=1)ES(t.charCodeAt(o),s,i);return e.join("")}function qO(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function GO(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}qO(r,e)}}function KO(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ni(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ES(t.charCodeAt(s),n,r);return new Uint8Array(e)}function JO(t){const e=[];return GO(t,n=>e.push(n)),new Uint8Array(e)}function ms(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>H0(s,n,r)),H0(null,n,r),e.join("")}function YO(t){return Math.round(Date.now()/1e3)+t}function QO(){return Symbol("auth-callback")}const Xe=()=>typeof window<"u"&&typeof document<"u",Xr={tested:!1,writable:!1},CS=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xr.tested)return Xr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Xr.tested=!0,Xr.writable=!0}catch{Xr.tested=!0,Xr.writable=!1}return Xr.writable};function XO(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const _S=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ZO=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ni=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Zr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Qe=async(t,e)=>{await t.removeItem(e)};class pd{constructor(){this.promise=new pd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}pd.promiseConstructor=Promise;function mh(t){const e=t.split(".");if(e.length!==3)throw new Vc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!UO.test(e[r]))throw new Vc("JWT not in base64url format");return{header:JSON.parse(W0(e[0])),payload:JSON.parse(W0(e[1])),signature:Ni(e[2]),raw:{header:e[0],payload:e[1]}}}async function eI(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function tI(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function nI(t){return("0"+t.toString(16)).substr(-2)}function rI(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,nI).join("")}async function sI(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function iI(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await sI(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Js(t,e,n=!1){const r=rI();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ni(t,`${e}-code-verifier`,s);const i=await iI(r);return[i,r===i?"plain":"s256"]}const oI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aI(t){const e=t.headers.get(pp);if(!e||!e.match(oI))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function lI(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function cI(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ys(t){if(!uI.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gh(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dI(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function q0(t){return JSON.parse(JSON.stringify(t))}const is=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hI=[502,503,504];async function G0(t){var e;if(!ZO(t))throw new Uc(is(t),0);if(hI.includes(t.status))throw new Uc(is(t),t.status);let n;try{n=await t.json()}catch(i){throw new gr(is(i),i)}let r;const s=aI(t);if(s&&s.getTime()>=bS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new gp(is(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ct}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new gp(is(n),t.status,n.weak_password.reasons);throw new xS(is(n),t.status||500,r)}const fI=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Q(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[pp]||(i[pp]=bS["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await pI(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function pI(t,e,n,r,s,i){const o=fI(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Uc(is(l),0)}if(a.ok||await G0(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await G0(l)}}function hn(t){var e;let n=null;yI(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=YO(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function K0(t){const e=hn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function mI(t){return{data:t,error:null}}function gI(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=to(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function J0(t){return t}function yI(t){return t.access_token&&t.refresh_token&&t.expires_in}const ic=["global","local","others"];let ug=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=_S(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ic[0]){if(ic.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ic.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:yr})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=to(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:gI,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(H(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yr})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:J0});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(H(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ys(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yr})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ys(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:yr})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ys(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:yr})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ys(e.userId);try{const{data:n,error:r}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(H(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ys(e.userId),Ys(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Q(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:J0});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(H(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(H(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Q(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(H(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Q(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Q(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(H(n))return{data:null,error:n};throw n}}};function Y0(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const as={debug:!!(globalThis&&CS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let NS=class extends dg{};class vI extends dg{}async function TS(t,e,n){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),as.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{as.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw as.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new NS(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(as.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Q0={};async function bI(t,e,n){var r;const s=(r=Q0[t])!==null&&r!==void 0?r:Promise.resolve(),i=Promise.race([s.catch(()=>null),e>=0?new Promise((o,a)=>{setTimeout(()=>{a(new vI(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await n());return Q0[t]=i.catch(async o=>{if(o&&o.isAcquireTimeout)return await s,null;throw o}),await i}function xI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function AS(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function wI(t){return parseInt(t,16)}function kI(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function SI(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=AS(t.address),m=u?`${u}://${r}`:r,g=t.statement?`${t.statement}
`:"",v=`${m} wants you to sign in with your Ethereum account:
${f}

${g}`;let y=`URI: ${d}
Version: ${h}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let b=`
Resources:`;for(const x of c){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);b+=`
- ${x}`}y+=b}return`${v}
${y}`}class Re extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Wc extends Re{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function EI({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Re({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(OS(o)){if(i.rp.id!==o)return new Re({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function CI({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Re({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(OS(r)){if(n.rpId!==r)return new Re({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class _I{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const NI=new _I;function TI(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=to(t,["challenge","user","excludeCredentials"]),i=Ni(e).buffer,o=Object.assign(Object.assign({},n),{id:Ni(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Ni(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function AI(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=to(t,["challenge","allowCredentials"]),s=Ni(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Ni(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function OI(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:ms(new Uint8Array(t.response.attestationObject)),clientDataJSON:ms(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function II(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ms(new Uint8Array(s.authenticatorData)),clientDataJSON:ms(new Uint8Array(s.clientDataJSON)),signature:ms(new Uint8Array(s.signature)),userHandle:s.userHandle?ms(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function OS(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function X0(){var t,e;return!!(Xe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function jI(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wc("Browser returned unexpected credential type",e)}:{data:null,error:new Wc("Empty credential response",e)}}catch(e){return{data:null,error:EI({error:e,options:t})}}}async function RI(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wc("Browser returned unexpected credential type",e)}:{data:null,error:new Wc("Empty credential response",e)}}catch(e){return{data:null,error:CI({error:e,options:t})}}}const MI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},PI={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function qc(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=qc(a,o):r[i]=qc(o)}else r[i]=o}return r}function DI(t,e){return qc(MI,t,e||{})}function LI(t,e){return qc(PI,t,e||{})}class $I{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=s??NI.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=DI(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:d}=await jI({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=LI(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:d}=await RI(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return H(o)?{data:null,error:o}:{data:null,error:new gr("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Bi("rpId is required for WebAuthn authentication")};try{if(!X0())return{data:null,error:new gr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return H(o)?{data:null,error:o}:{data:null,error:new gr("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Bi("rpId is required for WebAuthn registration")};try{if(!X0())return{data:null,error:new gr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return H(o)?{data:null,error:o}:{data:null,error:new gr("Unexpected error in register",o)}}}}xI();const BI={url:BO,storageKey:zO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Z0(t,e,n){return await n()}const Qs={};let hg=class yp{get jwks(){var e,n;return(n=(e=Qs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Qs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},BI),e);if(this.storageKey=i.storageKey,this.instanceID=(n=yp.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,yp.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Xe()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ug({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=_S(i.fetch),this.lock=i.lock||Z0,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Xe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=TS:this.lock=Z0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $I(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:CS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Y0(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Y0(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${vS}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Xe()&&(n=XO(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Xe()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),SS(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return H(n)?this._returnResult({error:n}):this._returnResult({error:new gr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:hn}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(H(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Js(this.storage,this.storageKey)),i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},xform:hn})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:hn})}else throw new Ao("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Qe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),H(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:K0})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:K0})}else throw new Ao("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new ss;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(H(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,c,u,d,h;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:g,wallet:v,statement:y,options:b}=e;let x;if(Xe())if(typeof v=="object")x=v;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")x=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=v}const k=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),w=await x.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||w.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=AS(w[0]);let E=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const N=await x.request({method:"eth_chainId"});E=wI(N)}const _={domain:k.host,address:S,statement:y,uri:k.href,version:"1",chainId:E,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=SI(_),m=await x.request({method:"personal_sign",params:[kI(f),S]})}try{const{data:g,error:v}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:m},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:hn});if(v)throw v;if(!g||!g.session||!g.user){const y=new ss;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(H(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var n,r,s,i,o,a,l,c,u,d,h,f;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:v,wallet:y,statement:b,options:x}=e;let k;if(Xe())if(typeof y=="object")k=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))k=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=y}const w=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const S=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),b?{statement:b}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)m=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${w.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await k.signMessage(new TextEncoder().encode(m),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:v,error:y}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ms(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:hn});if(y)throw y;if(!v||!v.session||!v.user){const b=new ss;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(H(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const n=await Zr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:hn});if(await Qe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new ss;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),H(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:hn}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new ss;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(H(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Js(this.storage,this.storageKey));const{error:d}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Ao("You must provide either an email or phone number.")}catch(a){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),H(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:hn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(H(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Js(this.storage,this.storageKey));const c=await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:mI});return!((i=c.data)===null||i===void 0)&&i.url&&Xe()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),H(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ct;const{error:s}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(H(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Q(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Ao("You must provide either an email or phone number and a type")}catch(n){if(H(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Zr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ph:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Zr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=gh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=dI(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yr}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ct}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:yr})})}catch(n){if(H(n))return kS(n)&&(await this._removeSession(),await Qe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ct;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Js(this.storage,this.storageKey));const{data:c,error:u}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:yr});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),H(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ct;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=mh(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(H(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ct;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(H(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Xe())throw new Oo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Oo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new mp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Oo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new mp("No code detected.");const{data:b,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Oo("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=ti&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(r){if(H(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Zr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(wS(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Qe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=QO(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Js(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),H(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Xe()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(H(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hn}),{data:h,error:f}=d;return f?this._returnResult({data:{user:null,session:null},error:f}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new ss}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:f}))}catch(s){if(await Qe(this.storage,`${this.storageKey}-code-verifier`),H(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await tI(async s=>(s>0&&await eI(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&sc(i)&&Date.now()+o-r<ti})}catch(r){if(this._debug(n,"error",r),H(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Xe()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Zr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Zr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ni(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:gh()}else if(s&&!s.user&&!s.user){const o=await Zr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Qe(this.storage,this.storageKey+"-user"),await ni(this.storage,this.storageKey,s)):s.user=gh()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ph;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ph}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),sc(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ct;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new pd;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ct;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),H(i)){const o={data:null,error:i};return sc(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Qe(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ni(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=q0(s);await ni(this.storage,this.storageKey,i)}else{const s=q0(n);await ni(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Qe(this.storage,this.storageKey),await Qe(this.storage,this.storageKey+"-code-verifier"),await Qe(this.storage,this.storageKey+"-user"),this.userStorage&&await Qe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ti);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ti);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ti}ms, refresh threshold is ${fp} ticks`),s<=fp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Js(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?OI(e.webauthn.credential_response):II(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:TI(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:AI(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=mh(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Q(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ct})})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ct});const o=await Q(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Xe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ct});const o=await Q(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Xe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Q(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ct})})}catch(e){if(H(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await Q(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ct})})}catch(n){if(H(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+VO>s)return r;const{data:i,error:o}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:f,error:m}=await this.getSession();if(m||!f.session)return this._returnResult({data:null,error:m});r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=mh(r);n!=null&&n.allowExpired||lI(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const u=cI(s.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,JO(`${a}.${l}`)))throw new Vc("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(H(r))return this._returnResult({data:null,error:r});throw r}}};hg.nextInstanceID={};const zI=ug,FI=hg,UI=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:zI,AuthApiError:xS,AuthClient:FI,AuthError:Bi,AuthImplicitGrantRedirectError:Oo,AuthInvalidCredentialsError:Ao,AuthInvalidJwtError:Vc,AuthInvalidTokenResponseError:ss,AuthPKCEGrantCodeExchangeError:mp,AuthRetryableFetchError:Uc,AuthSessionMissingError:Ct,AuthUnknownError:gr,AuthWeakPasswordError:gp,CustomAuthError:sr,GoTrueAdminApi:ug,GoTrueClient:hg,NavigatorLockAcquireTimeoutError:NS,SIGN_OUT_SCOPES:ic,isAuthApiError:wS,isAuthError:H,isAuthImplicitGrantRedirectError:SS,isAuthRetryableFetchError:sc,isAuthSessionMissingError:kS,isAuthWeakPasswordError:HO,lockInternals:as,navigatorLock:TS,processLock:bI},Symbol.toStringTag,{value:"Module"})),IS=Ba(UI);Object.defineProperty(fd,"__esModule",{value:!0});fd.SupabaseAuthClient=void 0;const VI=IS;class HI extends VI.AuthClient{constructor(e){super(e)}}fd.SupabaseAuthClient=HI;Object.defineProperty(Lc,"__esModule",{value:!0});const WI=Dk,qI=ut,GI=tS,KI=MO,Nl=mS,JI=gS,ev=Gr,YI=fd;let QI=class{constructor(e,n,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=n;const a=(0,ev.validateSupabaseUrl)(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:Nl.DEFAULT_DB_OPTIONS,realtime:Nl.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},Nl.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:Nl.DEFAULT_GLOBAL_OPTIONS},u=(0,ev.applySettingDefaults)(r??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=(0,JI.fetchWithAuth)(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new qI.PostgrestClient(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new KI.StorageClient(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new WI.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YI.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new GI.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};Lc.default=QI;(function(t){var e=qs&&qs.__createBinding||(Object.create?function(u,d,h,f){f===void 0&&(f=h);var m=Object.getOwnPropertyDescriptor(d,h);(!m||("get"in m?!d.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,f,m)}:function(u,d,h,f){f===void 0&&(f=h),u[f]=d[h]}),n=qs&&qs.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,u,h)},r=qs&&qs.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const s=r(Lc);n(IS,t);var i=ut;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var o=Dk;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),n(tS,t);var a=Lc;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return r(a).default}});const l=(u,d,h)=>new s.default(u,d,h);t.createClient=l;function c(){if(typeof window<"u"||typeof process>"u")return!1;const u=process.version;if(u==null)return!1;const d=u.match(/^v(\d+)\./);return d?parseInt(d[1],10)<=18:!1}c()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(rg);const jS=rm(rg),XI=AN({__proto__:null,default:jS},[rg]),{PostgrestError:u8,FunctionsHttpError:d8,FunctionsFetchError:h8,FunctionsRelayError:f8,FunctionsError:p8,FunctionRegion:m8,SupabaseClient:g8,createClient:ZI,GoTrueAdminApi:y8,GoTrueClient:v8,AuthAdminApi:b8,AuthClient:x8,navigatorLock:w8,NavigatorLockAcquireTimeoutError:k8,lockInternals:S8,processLock:E8,SIGN_OUT_SCOPES:C8,AuthError:_8,AuthApiError:N8,AuthUnknownError:T8,CustomAuthError:A8,AuthSessionMissingError:O8,AuthInvalidTokenResponseError:I8,AuthInvalidCredentialsError:j8,AuthImplicitGrantRedirectError:R8,AuthPKCEGrantCodeExchangeError:M8,AuthRetryableFetchError:P8,AuthWeakPasswordError:D8,AuthInvalidJwtError:L8,isAuthError:$8,isAuthApiError:B8,isAuthSessionMissingError:z8,isAuthImplicitGrantRedirectError:F8,isAuthRetryableFetchError:U8,isAuthWeakPasswordError:V8,RealtimePresence:H8,RealtimeChannel:W8,RealtimeClient:q8,REALTIME_LISTEN_TYPES:G8,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:K8,REALTIME_PRESENCE_LISTEN_EVENTS:J8,REALTIME_SUBSCRIBE_STATES:Y8,REALTIME_CHANNEL_STATES:Q8}=jS||XI,ej="https://izpjmvgtrwxjmucebfyy.supabase.co",tj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6cGptdmd0cnd4am11Y2ViZnl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzNzk3NjksImV4cCI6MjA4MDk1NTc2OX0.r9mcolZ5zCMmwjIO3mStZot8YUId_lbxjrvlfxJ_k3s",L=ZI(ej,tj,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});typeof window<"u"&&(window.supabase=L);const de="6c4ca2f6-1e0d-47c2-b112-c4baddc9ce23",tv={globe:ba,droplets:Zf,flame:H1,sun:ak,flower2:W1,wind:ck,cloud:U1,leaf:G1,"tree-pine":ep,mountain:Q1,snowflake:ik,"moon-star":Y1,palette:Z1,brush:B1,blocks:L1,puzzle:tk,"music-4":X1,baby:D1,smile:sk,"users-round":tg,"book-open":$1,star:eg,clover:V1,sprout:ok,water:Zf,tree:ep,rainbow:nk},nv=eg,nj={red:{h:0,s:72,l:51},rose:{h:350,s:89,l:60},orange:{h:24,s:94,l:50},amber:{h:38,s:92,l:50},yellow:{h:54,s:100,l:62},lime:{h:90,s:80,l:52},green:{h:142,s:71,l:45},emerald:{h:152,s:66,l:41},teal:{h:174,s:72,l:40},cyan:{h:187,s:85,l:45},sky:{h:204,s:94,l:55},blue:{h:217,s:89,l:50},indigo:{h:244,s:75,l:60},violet:{h:262,s:83,l:58},purple:{h:271,s:52,l:45},fuchsia:{h:292,s:84,l:60},pink:{h:330,s:81,l:60},stone:{h:25,s:14,l:47},gray:{h:218,s:11,l:65},slate:{h:215,s:20,l:50},neutral:{h:0,s:0,l:50}};function rj(t){if(!t)return null;const e=t.match(/bg-([a-z]+)-[0-9]{3}/);if(!e)return null;const n=e[1];return nj[n]||null}function sj({h:t,s:e,l:n}){const r=Math.min(94,n+36),s=Math.max(28,e-40);return`hsl(${t}, ${s}%, ${r}%)`}const ij={50:97,100:94,200:86,300:77};function oj(t,e){if(!e||!t)return"bg-gray-100";const n=e.match(/(\d+)%\)$/),r=n?parseInt(n[1],10):95;let s="50",i=1/0;for(const[o,a]of Object.entries(ij)){const l=Math.abs(a-r);l<i&&(i=l,s=o)}return`bg-${t}-${s}`}function Mt(t){var o;if(!t)return{id:"unknown",name:"Unbekannt",chipClass:"bg-slate-500 text-white",headerApproxClass:"bg-slate-100",headerColor:"hsl(215,20%,94%)",Icon:nv};if(t.is_event_group===!0)return{id:t.id,name:t.name,chipClass:"bg-stone-300 text-stone-800",headerApproxClass:"bg-purple-100",headerColor:"#f3e8ff",Icon:tv.rainbow};let e=t.color||"bg-slate-500";e.includes("text-")||(e+=" text-white");const n=tv[t.icon]||nv,r=rj(e);let s="hsl(0, 0%, 95%)",i="bg-stone-100";if(r){s=sj(r);const a=(o=e.match(/bg-([a-z]+)-/))==null?void 0:o[1];i=oj(a,s)}return{id:t.id,name:t.name,chipClass:e,headerApproxClass:i,headerColor:s,Icon:n}}function Rs(t,e){return!t||!Array.isArray(t)||!e||e==="all"?null:t.find(n=>n.id===e)||null}function aj({onLogin:t}){var j;const[e,n]=C.useState(!1),[r,s]=C.useState("parent"),[i,o]=C.useState(""),[a,l]=C.useState(""),[c,u]=C.useState(""),[d,h]=C.useState(""),[f,m]=C.useState(""),[g,v]=C.useState(""),[y,b]=C.useState([]),[x,k]=C.useState(!0);(j=y.find(O=>O.id!=="event"))!=null&&j.id;const[w,S]=C.useState([]),[E,_]=C.useState(""),[N,T]=C.useState(!1);C.useEffect(()=>{async function O(){try{const{data:z,error:ee}=await L.from("groups").select("*").eq("facility_id",de).order("position");if(ee)throw ee;b(z||[])}catch(z){console.error("Fehler beim Laden der Gruppen:",z)}finally{k(!1)}}O()},[]),C.useEffect(()=>{if(y.length>0&&w.length===0){const O=y.find(z=>!z.is_event_group)||y[0];S([{id:crypto.randomUUID(),name:"",group:(O==null?void 0:O.id)||null,birthday:"",notes:""}])}},[y]);const P=()=>{const O=y.find(z=>!z.is_event_group)||y[0];S(z=>[...z,{id:crypto.randomUUID(),name:"",group:(O==null?void 0:O.id)||null,birthday:"",notes:""}])},A=O=>{S(z=>z.filter((ee,J)=>J!==O))},W=(O,z,ee)=>{S(J=>J.map((Ce,Ke)=>Ke===O?{...Ce,[z]:ee}:Ce))},se=async(O,z)=>{try{const{data:ee,error:J}=await L.rpc("validate_registration_code",{p_code:O,p_role:z,p_facility_id:de});if(J)throw J;return ee===!0}catch(ee){return console.error("Code-Validierung fehlgeschlagen:",ee),!1}},B=async O=>{var z,ee,J;O.preventDefault(),_(""),T(!0);try{if(e){if(!i||!a||!c)throw new Error("Bitte alle Pflichtfelder ausfllen.");if(a.length<6)throw new Error("Passwort muss mindestens 6 Zeichen haben.");if(!await se(r==="parent"?d:r==="team"?f:g,r))throw new Error(`Ungltiger ${r==="parent"?"Eltern":r==="team"?"Team":"Admin"}-Code.`);if(r==="parent"){if(w.length===0)throw new Error("Bitte mindestens ein Kind hinzufgen.");if(w.find(Ye=>!Ye.name||!Ye.group))throw new Error("Bitte fr jedes Kind Name und Gruppe angeben.")}const{data:Kt,error:Je}=await L.auth.signUp({email:i.toLowerCase().trim(),password:a});if(Je)throw Je.message.includes("already registered")?new Error("Diese E-Mail ist bereits registriert."):Je;const Et=(z=Kt.user)==null?void 0:z.id;if(!Et)throw new Error("Registrierung fehlgeschlagen. Bitte erneut versuchen.");const el=r==="parent"?null:((ee=y.find($n=>!$n.is_event_group))==null?void 0:ee.id)||null,{error:Ws}=await L.from("profiles").update({facility_id:de,full_name:c,role:r,primary_group:el}).eq("id",Et);if(Ws){const{error:$n}=await L.from("profiles").insert({id:Et,facility_id:de,full_name:c,role:r,primary_group:el});if($n)throw console.error("Profil-Fehler:",$n),new Error("Profil konnte nicht erstellt werden.")}if(r==="parent"&&w.length>0){console.log("[Auth] Erstelle Kinder fr User:",Et),console.log("[Auth] Kinder-Daten:",w);const $n=w.map(tl=>({facility_id:de,user_id:Et,first_name:tl.name,group_id:tl.group,birthday:tl.birthday||null,notes:tl.notes||null}));console.log("[Auth] Insert-Daten:",$n);const{data:Ye,error:Bn}=await L.from("children").insert($n).select();Bn?(console.error("[Auth] Kinder-Fehler:",Bn),console.error("[Auth] Fehler-Details:",JSON.stringify(Bn,null,2)),console.warn("[Auth] Kinder konnten nicht erstellt werden - RLS-Policy Problem?")):console.log("[Auth] Kinder erfolgreich erstellt:",Ye)}const lo=await Y(Et);t(lo)}else{const{data:Ce,error:Ke}=await L.auth.signInWithPassword({email:i.toLowerCase().trim(),password:a});if(Ke)throw Ke.message.includes("Invalid login")?new Error("Ungltige Zugangsdaten."):Ke;const Kt=(J=Ce.user)==null?void 0:J.id;if(!Kt)throw new Error("Login fehlgeschlagen.");const Je=await Y(Kt);t(Je)}}catch(Ce){_(Ce.message)}T(!1)},Y=async O=>{const{data:z,error:ee}=await L.from("profiles").select(`
        id,
        full_name,
        role,
        primary_group,
        facility_id,
        children (
          id,
          first_name,
          birthday,
          notes,
          group_id
        )
      `).eq("id",O).single();if(ee)throw ee;return{id:z.id,name:z.full_name,role:z.role,primaryGroup:z.primary_group,facilityId:z.facility_id,children:(z.children||[]).map(J=>({id:J.id,name:J.first_name,group:J.group_id,birthday:J.birthday,notes:J.notes}))}},Z=y.filter(O=>!O.is_event_group);return p.jsx("div",{className:"h-screen bg-[#fcfaf7] flex flex-col items-center justify-center p-4 overflow-y-auto",children:p.jsxs("div",{className:"w-full max-w-md py-10",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"bg-amber-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:p.jsx(ok,{className:"text-white",size:32})}),p.jsx("h1",{className:"text-2xl font-bold text-stone-800",children:"Montessori Kinderhaus"}),p.jsx("p",{className:"text-stone-500 text-sm italic mt-1",children:"Berlin-Buch"})]}),p.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-3xl shadow-xl border border-stone-100",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-xl font-bold text-stone-700",children:e?"Registrieren":"Anmelden"}),p.jsx("button",{type:"button",onClick:()=>{n(O=>!O),_("")},className:"text-xs text-amber-600 font-bold hover:underline",children:e?"Zum Login":"Konto erstellen"})]}),p.jsxs("form",{onSubmit:B,className:"space-y-5",children:[e&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-stone-400 uppercase mb-1",children:"Vollstndiger Name"}),p.jsx("input",{required:!0,type:"text",value:c,onChange:O=>u(O.target.value),className:"w-full p-3 bg-stone-50 rounded-xl border border-stone-200"})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-stone-50 p-3 rounded-xl border border-stone-200",children:[p.jsx("button",{type:"button",onClick:()=>s("parent"),className:`flex-1 py-2 rounded-lg text-sm font-bold ${r==="parent"?"bg-white shadow text-stone-800":"text-stone-400"}`,children:"Elternteil"}),p.jsx("button",{type:"button",onClick:()=>s("team"),className:`flex-1 py-2 rounded-lg text-sm font-bold ${r==="team"?"bg-white shadow text-stone-800":"text-stone-400"}`,children:"Kita-Team"}),p.jsx("button",{type:"button",onClick:()=>s("admin"),className:`flex-1 py-2 rounded-lg text-sm font-bold ${r==="admin"?"bg-white shadow text-stone-800":"text-stone-400"}`,children:"Admin"})]}),r==="parent"&&p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-bold text-stone-400 uppercase mb-1 flex items-center gap-1",children:[p.jsx(ks,{size:12})," Eltern-Code"]}),p.jsx("input",{required:!0,type:"password",value:d,onChange:O=>h(O.target.value),className:"w-full p-3 bg-stone-50 rounded-xl border border-stone-200"})]}),r==="team"&&p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-bold text-stone-400 uppercase mb-1 flex items-center gap-1",children:[p.jsx(ks,{size:12})," Team-Code"]}),p.jsx("input",{required:!0,type:"password",value:f,onChange:O=>m(O.target.value),className:"w-full p-3 bg-stone-50 rounded-xl border border-stone-200"})]}),r==="admin"&&p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-bold text-stone-400 uppercase mb-1 flex items-center gap-1",children:[p.jsx(Zm,{size:12})," Admin-Code"]}),p.jsx("input",{required:!0,type:"password",value:g,onChange:O=>v(O.target.value),className:"w-full p-3 bg-amber-50 rounded-xl border border-amber-200"})]}),r==="parent"&&!x&&p.jsxs(p.Fragment,{children:[p.jsx("label",{className:"block text-xs font-bold text-stone-400 uppercase mt-4 mb-1",children:"Ihre Kinder"}),w.map((O,z)=>{const ee=Z.find(J=>J.id===O.group);return Mt(ee),p.jsxs("div",{className:"p-4 bg-stone-50 rounded-xl border border-stone-200 space-y-3 relative",children:[w.length>1&&p.jsx("button",{type:"button",onClick:()=>A(z),className:"absolute top-2 right-2 bg-white p-1 rounded-full text-stone-400 hover:text-red-500 shadow-sm",children:p.jsx(ng,{size:14})}),p.jsx("input",{required:!0,type:"text",placeholder:"Vorname",value:O.name,onChange:J=>W(z,"name",J.target.value),className:"w-full p-2 bg-white rounded-lg text-sm border border-stone-200"}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:Z.map(J=>{const Ce=Mt(J);return p.jsxs("button",{type:"button",onClick:()=>W(z,"group",J.id),className:`p-2 rounded-lg text-xs flex items-center justify-center gap-1 border ${O.group===J.id?`${Ce.chipClass} border-transparent shadow-sm`:"bg-white border-stone-200 text-stone-500 hover:bg-stone-100"}`,children:[p.jsx(Ce.Icon,{size:12})," ",Ce.name]},J.id)})}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs text-stone-500 mb-1 flex items-center gap-1",children:[p.jsx(Xm,{size:12})," Geburtstag (optional)"]}),p.jsx("input",{type:"date",value:O.birthday||"",onChange:J=>W(z,"birthday",J.target.value),className:"w-full p-2 bg-white rounded-lg border border-stone-200 text-sm"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs text-stone-500 mb-1 flex items-center gap-1",children:[p.jsx(IA,{size:12})," Hinweise / Allergien (optional)"]}),p.jsx("textarea",{rows:2,value:O.notes||"",onChange:J=>W(z,"notes",J.target.value),className:"w-full p-2 bg-white rounded-lg border border-stone-200 text-sm resize-none",placeholder:"Allergien oder Hinweise"})]})]},O.id)}),p.jsxs("button",{type:"button",onClick:P,className:"w-full py-2 border-2 border-dashed border-amber-200 text-amber-600 text-sm font-bold rounded-xl flex justify-center items-center gap-1 hover:bg-amber-50",children:[p.jsx(Us,{size:16})," Kind hinzufgen"]})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-stone-400 uppercase mb-1",children:"E-Mail"}),p.jsx("input",{required:!0,type:"email",value:i,onChange:O=>o(O.target.value),className:"w-full p-3 bg-stone-50 rounded-xl border border-stone-200",placeholder:"name@beispiel.de"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-stone-400 uppercase mb-1",children:"Passwort"}),p.jsx("input",{required:!0,type:"password",value:a,onChange:O=>l(O.target.value),className:"w-full p-3 bg-stone-50 rounded-xl border border-stone-200",minLength:6})]})]}),E&&p.jsxs("div",{className:"bg-red-50 p-3 rounded-xl flex items-start gap-2 text-red-600 text-xs",children:[p.jsx(ad,{size:16,className:"mt-0.5"}),E]}),p.jsx("button",{disabled:N||x,type:"submit",className:"w-full bg-stone-800 text-white font-bold py-4 rounded-xl hover:bg-stone-900 mt-4 flex justify-center shadow-md disabled:opacity-50",children:N?p.jsx(ht,{className:"animate-spin"}):e?"Konto erstellen":"Anmelden"})]})]})]})})}function lj({user:t,onPasswordUpdated:e}){const[n,r]=C.useState(""),[s,i]=C.useState(""),[o,a]=C.useState(""),[l,c]=C.useState(!1),u=async d=>{if(d.preventDefault(),a(""),!n||!s){a("Bitte ein neues Passwort vergeben.");return}if(n.length<6){a("Passwort muss mindestens 6 Zeichen haben.");return}if(n!==s){a("Die Passwrter stimmen nicht berein.");return}c(!0);try{const{error:h}=await L.auth.updateUser({password:n});if(h)throw h;const{error:f}=await L.from("profiles").update({must_reset_password:!1}).eq("id",t.id);f&&console.error("Profil-Update fehlgeschlagen:",f);const m={...t,mustResetPassword:!1};e(m)}catch(h){console.error("Passwort-Reset fehlgeschlagen:",h),a(h.message||"Passwort konnte nicht gendert werden.")}c(!1)};return p.jsx("div",{className:"h-screen bg-[#fcfaf7] flex flex-col items-center justify-center p-4",children:p.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-3xl shadow-lg border border-stone-200",children:[p.jsxs("div",{className:"flex flex-col items-center mb-6",children:[p.jsx("div",{className:"bg-amber-500 p-3 rounded-full text-white shadow",children:p.jsx(xA,{size:28})}),p.jsx("h2",{className:"text-xl font-bold text-stone-800 mt-3",children:"Passwort zurcksetzen"}),p.jsx("p",{className:"text-xs text-stone-500 mt-1 text-center",children:"Bitte vergeben Sie ein neues Passwort, um fortzufahren."})]}),p.jsxs("form",{onSubmit:u,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-stone-500 uppercase",children:"Neues Passwort"}),p.jsx("input",{type:"password",value:n,onChange:d=>r(d.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl",placeholder:"Neues Passwort",minLength:6,required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-stone-500 uppercase",children:"Neues Passwort wiederholen"}),p.jsx("input",{type:"password",value:s,onChange:d=>i(d.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl",placeholder:"Passwort wiederholen",minLength:6,required:!0})]}),o&&p.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl text-xs flex items-start gap-2",children:[p.jsx(ad,{size:14,className:"mt-0.5"}),o]}),p.jsx("button",{type:"submit",disabled:l,className:"w-full bg-amber-500 text-white font-bold py-3 rounded-xl hover:bg-amber-600 flex items-center justify-center gap-2 disabled:opacity-50",children:l?p.jsx(ht,{className:"animate-spin",size:16}):p.jsxs(p.Fragment,{children:[p.jsx(rk,{size:16}),"Passwort speichern"]})})]})]})})}async function md(){const{data:t,error:e}=await L.from("groups").select("*").eq("facility_id",de).order("position",{ascending:!0});if(e)throw console.error("Fehler beim Laden der Gruppen:",e),e;return[...t].sort((r,s)=>r.is_event_group?-1:s.is_event_group?1:(r.position??999)-(s.position??999))}async function cj(t){const{data:e,error:n}=await L.from("groups").insert({facility_id:de,name:t.name,color:t.color,icon:t.icon,position:t.position||999,is_event_group:t.is_event_group||!1}).select().single();if(n)throw console.error("Fehler beim Erstellen der Gruppe:",n),n;return e}async function uj(t,e){const{data:n,error:r}=await L.from("groups").update({name:e.name,color:e.color,icon:e.icon,position:e.position}).eq("id",t).select().single();if(r)throw console.error("Fehler beim Aktualisieren der Gruppe:",r),r;return n}async function rv(t){const{error:e}=await L.from("groups").delete().eq("id",t);if(e)throw console.error("Fehler beim Lschen der Gruppe:",e),e}async function dj(t){const e=t.map((s,i)=>L.from("groups").update({position:i}).eq("id",s)),r=(await Promise.all(e)).filter(s=>s.error);if(r.length>0)throw console.error("Fehler beim Sortieren der Gruppen:",r),r[0].error}async function hj(t){const{count:e,error:n}=await L.from("children").select("*",{count:"exact",head:!0}).eq("group_id",t);return n?(console.error("Fehler beim Zhlen der Kinder:",n),0):e||0}async function fj(t){const{count:e,error:n}=await L.from("profiles").select("*",{count:"exact",head:!0}).eq("primary_group",t).in("role",["team","admin"]);return n?(console.error("Fehler beim Zhlen der Team-Mitglieder:",n),0):e||0}async function pj(t,e){const{error:n}=await L.from("children").update({group_id:e}).eq("group_id",t);if(n)throw console.error("Fehler beim Verschieben der Kinder:",n),n}async function mj(t,e){const{error:n}=await L.from("profiles").update({primary_group:e}).eq("primary_group",t).in("role",["team","admin"]);if(n)throw console.error("Fehler beim Verschieben der Team-Mitglieder:",n),n}var RS={exports:{}},MS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zi=C;function gj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yj=typeof Object.is=="function"?Object.is:gj,vj=zi.useState,bj=zi.useEffect,xj=zi.useLayoutEffect,wj=zi.useDebugValue;function kj(t,e){var n=e(),r=vj({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return xj(function(){s.value=n,s.getSnapshot=e,yh(s)&&i({inst:s})},[t,n,e]),bj(function(){return yh(s)&&i({inst:s}),t(function(){yh(s)&&i({inst:s})})},[t]),wj(n),n}function yh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yj(t,n)}catch{return!0}}function Sj(t,e){return e()}var Ej=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Sj:kj;MS.useSyncExternalStore=zi.useSyncExternalStore!==void 0?zi.useSyncExternalStore:Ej;RS.exports=MS;var fg=RS.exports;function et(t){this.content=t}et.prototype={constructor:et,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new et(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new et(n)},addToStart:function(t,e){return new et([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new et(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new et(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=et.from(t),t.size?new et(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=et.from(t),t.size?new et(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=et.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};et.from=function(t){if(t instanceof et)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new et(e)};function PS(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=PS(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function DS(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=t.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=DS(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class I{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,s+a,i||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new I(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,o=0;o<n;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),s+=a.nodeSize),o=l}return new I(r,s)}cutByIndex(e,n){return e==n?I.empty:e==0&&n==this.content.length?this:new I(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new I(s,i)}addToStart(e){return new I([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new I(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return PS(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return DS(this,e,n,r)}findIndex(e){if(e==0)return Tl(0,e);if(e==this.size)return Tl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),i=r+s.nodeSize;if(i>=e)return i==e?Tl(n+1,i):Tl(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return I.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new I(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return I.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new I(n||e,r)}static from(e){if(!e)return I.empty;if(e instanceof I)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new I([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}I.empty=new I([],0);const vh={index:0,offset:0};function Tl(t,e){return vh.index=t,vh.offset=e,vh}function Gc(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Gc(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Gc(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let he=class vp{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Gc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return vp.none;if(e instanceof vp)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};he.none=[];class Kc extends Error{}class F{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=$S(this.content,e+this.openStart,n);return r&&new F(r,this.openStart,this.openEnd)}removeBetween(e,n){return new F(LS(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return F.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new F(I.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new F(e,r,s)}}F.empty=new F(I.empty,0,0);function LS(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(s==e||i.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(LS(i.content,e-s-1,n-s-1)))}function $S(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=$S(o.content,e-i-1,n,o);return a&&t.replaceChild(s,o.copy(a))}function Cj(t,e,n){if(n.openStart>t.depth)throw new Kc("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Kc("Inconsistent open depths");return BS(t,e,n,0)}function BS(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let o=BS(t,e,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Es(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=_j(n,t);return Es(i,FS(t,o,a,e,r))}else return Es(i,Jc(t,e,r))}function zS(t,e){if(!e.type.compatibleContent(t.type))throw new Kc("Cannot join "+e.type.name+" onto "+t.type.name)}function bp(t,e,n){let r=t.node(n);return zS(r,e.node(n)),r}function Ss(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ho(t,e,n,r){let s=(e||t).node(n),i=0,o=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Ss(t.nodeAfter,r),i++));for(let a=i;a<o;a++)Ss(s.child(a),r);e&&e.depth==n&&e.textOffset&&Ss(e.nodeBefore,r)}function Es(t,e){return t.type.checkContent(e),t.copy(e)}function FS(t,e,n,r,s){let i=t.depth>s&&bp(t,e,s+1),o=r.depth>s&&bp(n,r,s+1),a=[];return Ho(null,t,s,a),i&&o&&e.index(s)==n.index(s)?(zS(i,o),Ss(Es(i,FS(t,e,n,r,s+1)),a)):(i&&Ss(Es(i,Jc(t,e,s+1)),a),Ho(e,n,s,a),o&&Ss(Es(o,Jc(n,r,s+1)),a)),Ho(r,null,s,a),new I(a)}function Jc(t,e,n){let r=[];if(Ho(null,t,n,r),t.depth>n){let s=bp(t,e,n+1);Ss(Es(s,Jc(t,e,n+1)),r)}return Ho(e,null,n,r),new I(r)}function _j(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(I.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class ka{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return he.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Yc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),c=i-l;if(r.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;i=c-1,s+=l+1}return new ka(n,r,i)}static resolveCached(e,n){let r=sv.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else sv.set(e,r=new Nj);let s=r.elts[r.i]=ka.resolve(e,n);return r.i=(r.i+1)%Tj,s}}class Nj{constructor(){this.elts=[],this.i=0}}const Tj=12,sv=new WeakMap;class Yc{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Aj=Object.create(null);class En{constructor(e,n,r,s=he.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||I.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Gc(this.attrs,n||e.defaultAttrs||Aj)&&he.sameSet(this.marks,r||he.none)}copy(e=null){return e==this.content?this:new En(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new En(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return F.empty;let s=this.resolve(e),i=this.resolve(n),o=r?0:s.sharedDepth(n),a=s.start(o),c=s.node(o).content.cut(s.pos-a,i.pos-a);return new F(c,s.depth-o,i.depth-o)}replace(e,n,r){return Cj(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return ka.resolveCached(this,e)}resolveNoCache(e){return ka.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),US(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=I.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=he.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!he.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=I.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}}En.prototype.text=void 0;class Qc extends En{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):US(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Qc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Qc(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function US(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ms{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Oj(e,n);if(r.next==null)return Ms.empty;let s=VS(r);r.next&&r.err("Unexpected trailing text");let i=Lj(Dj(s));return $j(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return I.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let h=i(d,a.concat(u));if(h)return h}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}Ms.empty=new Ms(!0);class Oj{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function VS(t){let e=[];do e.push(Ij(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Ij(t){let e=[];do e.push(jj(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function jj(t){let e=Pj(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Rj(t,e);else break;return e}function iv(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Rj(t,e){let n=iv(t),r=n;return t.eat(",")&&(t.next!="}"?r=iv(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Mj(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function Pj(t){if(t.eat("(")){let e=VS(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Mj(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Dj(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=i(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),s(i(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return s(i(o.expr,a),l),s(i(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();s(i(o.expr,l),u),l=u}if(o.max==-1)s(i(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),s(i(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function HS(t,e){return e-t}function ov(t,e){let n=[];return r(e),n.sort(HS);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Lj(t){let e=Object.create(null);return n(ov(t,0));function n(r){let s=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);ov(t,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new Ms(r.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(HS);i.next.push({type:s[o][0],next:e[a.join(",")]||n(a)})}return i}}function $j(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function WS(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function qS(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function GS(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function KS(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new zj(t,r,e[r]);return n}let av=class JS{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=KS(e,r.attrs),this.defaultAttrs=WS(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ms.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:qS(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new En(this,this.computeAttrs(e),I.from(n),he.setFrom(r))}createChecked(e=null,n,r){return n=I.from(n),this.checkContent(n),new En(this,this.computeAttrs(e),n,he.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=I.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(I.empty,!0);return i?new En(this,e,n.append(i),he.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){GS(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:he.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,o)=>r[i]=new JS(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Bj(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class zj{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Bj(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class gd{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=KS(e,s.attrs),this.excluded=null;let i=WS(this.attrs);this.instance=i?new he(this,i):null}create(e=null){return!e&&this.instance?this.instance:new he(this,qS(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new gd(i,s++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){GS(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class YS{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=et.from(e.nodes),n.marks=et.from(e.marks||{}),this.nodes=av.compile(this.spec.nodes,this),this.marks=gd.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=Ms.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?lv(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:lv(this,o.split(" "))}this.nodeFromJSON=s=>En.fromJSON(this,s),this.markFromJSON=s=>he.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof av){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Qc(r,r.defaultAttrs,e,he.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function lv(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],o=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Fj(t){return t.tag!=null}function Uj(t){return t.style!=null}class Rr{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(Fj(s))this.tags.push(s);else if(Uj(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new uv(this,n,!1);return r.addAll(e,he.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new uv(this,n,!0);return r.addAll(e,he.none,n.from,n.to),F.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(Wj(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<i)break}n.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=dv(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=dv(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Rr(e,Rr.schemaRules(e)))}}const QS={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Vj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},XS={ol:!0,ul:!0},Sa=1,xp=2,Wo=4;function cv(t,e,n){return e!=null?(e?Sa:0)|(e==="full"?xp:0):t&&t.whitespace=="pre"?Sa|xp:n&~Wo}class Al{constructor(e,n,r,s,i,o){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=he.none,this.match=i||(o&Wo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(I.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Sa)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=I.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(I.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!QS.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class uv{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,o=cv(null,n.preserveWhitespace,0)|(r?Wo:0);s?i=new Al(s.type,s.attrs,he.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new Al(null,null,he.none,!0,null,o):i=new Al(e.schema.topNodeType,null,he.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,i=s.options&xp?"full":this.localPreserveWS||(s.options&Sa)>0,{schema:o}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;XS.hasOwnProperty(o)&&this.parser.normalizeLists&&Hj(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Vj.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(QS.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(i,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,n);this.findAtPoint(e,i)}findPlace(e,n,r){let s,i;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!s||s.length>c.length+a)&&(s=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=he.none;for(let a of s.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):hv(a.type,e.type))&&(o=a.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=cv(e,i,o.options);o.options&Wo&&o.content.length==0&&(a|=Wo);let l=he.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):hv(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Al(e,n,l,s,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Sa)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Hj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&XS.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Wj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function dv(t){let e={};for(let n in t)e[n]=t[n];return e}function hv(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}class Vs{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=bh(n).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(i.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=oc(bh(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&oc(bh(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return oc(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Vs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=fv(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return fv(e.marks)}}function fv(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bh(t){return t.document||window.document}const pv=new WeakMap;function qj(t){let e=pv.get(t);return e===void 0&&pv.set(t,e=Gj(t)),e}function Gj(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function oc(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=qj(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let a,l=n?t.createElementNS(n,s):t.createElement(s),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):d=="style"&&l.style?l.style.cssText=c[d]:l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:m}=oc(t,h,n,r);if(l.appendChild(f),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const ZS=65535,eE=Math.pow(2,16);function Kj(t,e){return t+e*eE}function mv(t){return t&ZS}function Jj(t){return(t-(t&ZS))/eE}const tE=1,nE=2,ac=4,rE=8;class wp{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&rE)>0}get deletedBefore(){return(this.delInfo&(tE|ac))>0}get deletedAfter(){return(this.delInfo&(nE|ac))>0}get deletedAcross(){return(this.delInfo&ac)>0}}class $t{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&$t.empty)return $t.empty}recover(e){let n=0,r=mv(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+Jj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,f=l+s+(h<0?0:u);if(r)return f;let m=e==(n<0?l:d)?null:Kj(a/3,e-l),g=e==l?nE:e==d?tE:ac;return(n<0?e!=l:e!=d)&&(g|=rE),new wp(f,g,m)}s+=u-c}return r?e+s:new wp(e+s,0,null)}touches(e,n){let r=0,s=mv(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==s*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),c=this.ranges[s+n],u=this.ranges[s+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new $t(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?$t.empty:new $t(e<0?[0,-e,0]:[0,0,e])}}$t.empty=new $t([]);class Ea{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Ea(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new Ea;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new wp(e,s,null)}}const xh=Object.create(null);class pt{getMap(){return $t.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=xh[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xh)throw new RangeError("Duplicate use of step JSON ID "+e);return xh[e]=n,n.prototype.jsonID=e,n}}class Pe{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Pe(e,null)}static fail(e){return new Pe(null,e)}static fromReplace(e,n,r,s){try{return Pe.ok(e.replace(n,r,s))}catch(i){if(i instanceof Kc)return Pe.fail(i.message);throw i}}}function pg(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(pg(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return I.fromArray(r)}class kr extends pt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new F(pg(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return Pe.fromReplace(e,this.from,this.to,i)}invert(){return new xn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new kr(n.pos,r.pos,this.mark)}merge(e){return e instanceof kr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new kr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new kr(n.from,n.to,e.markFromJSON(n.mark))}}pt.jsonID("addMark",kr);class xn extends pt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new F(pg(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Pe.fromReplace(e,this.from,this.to,r)}invert(){return new kr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xn(n.pos,r.pos,this.mark)}merge(e){return e instanceof xn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new xn(n.from,n.to,e.markFromJSON(n.mark))}}pt.jsonID("removeMark",xn);class Sr extends pt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Pe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Pe.fromReplace(e,this.pos,this.pos+1,new F(I.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new Sr(this.pos,n.marks[s]);return new Sr(this.pos,this.mark)}}return new Ps(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Sr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Sr(n.pos,e.markFromJSON(n.mark))}}pt.jsonID("addNodeMark",Sr);class Ps extends pt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Pe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Pe.fromReplace(e,this.pos,this.pos+1,new F(I.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Sr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ps(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ps(n.pos,e.markFromJSON(n.mark))}}pt.jsonID("removeNodeMark",Ps);class Fe extends pt{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&kp(e,this.from,this.to)?Pe.fail("Structure replace would overwrite content"):Pe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new $t([this.from,this.to-this.from,this.slice.size])}invert(e){return new Fe(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Fe(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Fe)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?F.empty:new F(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Fe(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?F.empty:new F(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Fe(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Fe(n.from,n.to,F.fromJSON(e,n.slice),!!n.structure)}}pt.jsonID("replace",Fe);class He extends pt{constructor(e,n,r,s,i,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(kp(e,this.from,this.gapFrom)||kp(e,this.gapTo,this.to)))return Pe.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Pe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Pe.fromReplace(e,this.from,this.to,r):Pe.fail("Content does not fit in gap")}getMap(){return new $t([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new He(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new He(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new He(n.from,n.to,n.gapFrom,n.gapTo,F.fromJSON(e,n.slice),n.insert,!!n.structure)}}pt.jsonID("replaceAround",He);function kp(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function Yj(t,e,n,r){let s=[],i=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),m=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(m)||(o&&o.to==h&&o.mark.eq(d[g])?o.to=f:s.push(o=new xn(h,f,d[g])));a&&a.to==h?a.to=f:i.push(a=new kr(h,f,r))}}),s.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function Qj(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(r instanceof gd){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let f=0;f<s.length;f++){let m=s[f];m.step==i-1&&d.eq(s[f].style)&&(h=m)}h?(h.to=c,h.step=i):s.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),s.forEach(o=>t.step(new xn(o.from,o.to,o.style)))}function mg(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Fe(a,u,F.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new xn(a,u,c.marks[h]));if(s&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,m;for(;h=f.exec(c.text);)m||(m=new F(I.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Fe(a+h.index,a+h.index+h[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(I.empty,!0);t.replace(a,a,new F(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function Xj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function so(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,s=0,i=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+s,l=t.$to.indexAfter(r)-i;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!Xj(o,a,l))break;a&&(s=1),l<o.childCount&&(i=1)}return null}function Zj(t,e,n){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),a=s.after(i+1),l=o,c=a,u=I.empty,d=0;for(let m=i,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,u=I.from(r.node(m).copy(u)),d++):l--;let h=I.empty,f=0;for(let m=i,g=!1;m>n;m--)g||s.after(m+1)<s.end(m)?(g=!0,h=I.from(s.node(m).copy(h)),f++):c++;t.step(new He(l,c,o,a,new F(u.append(h),d,f),u.size-d,!0))}function gg(t,e,n=null,r=t){let s=eR(t,e),i=s&&tR(r,e);return i?s.map(gv).concat({type:e,attrs:n}).concat(i.map(gv)):null}function gv(t){return{type:t,attrs:null}}function eR(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return n.canReplaceWith(r,s,o)?i:null}function tR(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function nR(t,e,n){let r=I.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=I.from(n[o].type.create(n[o].attrs,r))}let s=e.start,i=e.end;t.step(new He(s,i,s,i,new F(r,0,0),n.length,!0))}function rR(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,l)&&sR(t.doc,t.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!m?c=!1:!f&&m&&(c=!0)}c===!1&&iE(t,o,a,i),mg(t,t.mapping.slice(i).map(a,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return t.step(new He(d,h,d+1,h-1,new F(I.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&sE(t,o,a,i),!1}})}function sE(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=t.mapping.slice(r).map(n+1+i+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function iE(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function sR(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function iR(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new He(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new F(I.from(o),0,0),1,!0))}function Qn(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>i;c--,u--){let d=s.node(c),h=s.index(c);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),m=r&&r[u+1];m&&(f=f.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!g.type.validContent(f))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function oR(t,e,n=1,r){let s=t.doc.resolve(e),i=I.empty,o=I.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){i=I.from(s.node(a).copy(i));let u=r&&r[c];o=I.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}t.step(new Fe(e,e,new F(i.append(o),n,n),!0))}function Kr(t,e){let n=t.resolve(e),r=n.index();return oE(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function aR(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function oE(t,e){return!!(t&&e&&!t.isLeaf&&aR(t,e))}function yd(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,o,a=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),a++,o=r.node(s).maybeChild(a)):(i=r.node(s).maybeChild(a-1),o=r.node(s+1)),i&&!i.isTextblock&&oE(i,o)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function lR(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),o=i.node().type;if(s&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(s);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);iE(t,u.node(),u.before(),a)}o.inlineContent&&mg(t,e+n-1,o,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Fe(c,l.map(e+n,-1),F.empty,!0)),r===!0){let u=t.doc.resolve(c);sE(t,u.node(),u.before(),t.steps.length)}return t}function cR(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function aE(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(i==1)u=c.canReplace(l,l,s);else{let d=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function vd(t,e,n=e,r=F.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return lE(s,i,r)?new Fe(e,n,r):new uR(s,i,r).fit()}function lE(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class uR{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=I.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=I.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new F(i,o,a);return e>-1?new He(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Fe(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=wh(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(I.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=wh(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new F(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=wh(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new F(Io(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new F(Io(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let g=0;g<i.length;g++)this.openFrontierNode(i[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(s){for(let g=0;g<s.childCount;g++)u.push(s.child(g));d=d.matchFragment(s)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),v=d.matchType(g.type);if(!v)break;c++,(c>1||l==0||g.content.size)&&(d=v,u.push(cE(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let m=c==a.childCount;m||(f=-1),this.placed=jo(this.placed,n,I.from(u)),this.frontier[n].match=d,m&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<f;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?F.empty:new F(Io(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new F(Io(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!kh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=kh(e,n,s,r,i);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=kh(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=jo(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=jo(this.placed,this.depth,I.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(I.empty,!0);n.childCount&&(this.placed=jo(this.placed,this.frontier.length,n))}}function Io(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Io(t.firstChild.content,e-1,n)))}function jo(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(jo(t.lastChild.content,e-1,n)))}function wh(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function cE(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,cE(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(I.empty,!0)))),t.copy(r)}function kh(t,e,n,r,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!dR(n,i.content,o)?a:null}function dR(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function hR(t){return t.spec.defining||t.spec.definingForContent}function fR(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(lE(s,i,r))return t.step(new Fe(e,n,r));let o=dE(s,i);o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let h=s.depth,f=s.pos-1;h>0;h--,f--){let m=s.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(h)>-1?a=h:s.before(h)==f&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,f=0;;f++){let m=h.firstChild;if(c.push(m),f==r.openStart)break;h=m.content}for(let h=u-1;h>=0;h--){let f=c[h],m=hR(f.type);if(m&&!f.sameMarkup(s.node(Math.abs(a)-1)))u=h;else if(m||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+u+1)%(r.openStart+1),m=c[f];if(m)for(let g=0;g<o.length;g++){let v=o[(g+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let b=s.node(v-1),x=s.index(v-1);if(b.canReplaceWith(x,x,m.type,m.marks))return t.replace(s.before(v),y?i.after(v):n,new F(uE(r.content,0,r.openStart,f),f,r.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let f=o[h];f<0||(e=s.before(f),n=i.after(f))}}function uE(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(uE(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(I.empty,!0))}return t}function pR(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=cR(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new F(I.from(r),0,0))}function mR(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=dE(r,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return t.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function dE(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class Ti extends pt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Pe.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Pe.fromReplace(e,this.pos,this.pos+1,new F(I.from(s),0,n.isLeaf?0:1))}getMap(){return $t.empty}invert(e){return new Ti(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ti(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ti(n.pos,n.attr,n.value)}}pt.jsonID("attr",Ti);class Ca extends pt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Pe.ok(r)}getMap(){return $t.empty}invert(e){return new Ca(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ca(n.attr,n.value)}}pt.jsonID("docAttr",Ca);let Fi=class extends Error{};Fi=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Fi.prototype=Object.create(Error.prototype);Fi.prototype.constructor=Fi;Fi.prototype.name="TransformError";class hE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ea}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Fi(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=F.empty){let s=vd(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new F(I.from(r),0,0))}delete(e,n){return this.replace(e,n,F.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return fR(this,e,n,r),this}replaceRangeWith(e,n,r){return pR(this,e,n,r),this}deleteRange(e,n){return mR(this,e,n),this}lift(e,n){return Zj(this,e,n),this}join(e,n=1){return lR(this,e,n),this}wrap(e,n){return nR(this,e,n),this}setBlockType(e,n=e,r,s=null){return rR(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return iR(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Ti(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ca(e,n)),this}addNodeMark(e,n){return this.step(new Sr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof he)n.isInSet(r.marks)&&this.step(new Ps(e,n));else{let s=r.marks,i,o=[];for(;i=n.isInSet(s);)o.push(new Ps(e,i)),s=i.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return oR(this,e,n,r),this}addMark(e,n,r){return Yj(this,e,n,r),this}removeMark(e,n,r){return Qj(this,e,n,r),this}clearIncompatible(e,n,r){return mg(this,e,n,r),this}}const Sh=Object.create(null);class ne{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new gR(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=F.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?F.empty:n),a==0&&bv(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),bv(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new X(e):ri(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=n<0?ri(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):ri(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ut(e.node(0))}static atStart(e){return ri(e,e,0,0,1)||new Ut(e)}static atEnd(e){return ri(e,e,e.content.size,e.childCount,-1)||new Ut(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Sh[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Sh)throw new RangeError("Duplicate use of selection JSON ID "+e);return Sh[e]=n,n.prototype.jsonID=e,n}getBookmark(){return X.between(this.$anchor,this.$head).getBookmark()}}ne.prototype.visible=!0;class gR{constructor(e,n){this.$from=e,this.$to=n}}let yv=!1;function vv(t){!yv&&!t.parent.inlineContent&&(yv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class X extends ne{constructor(e,n=e){vv(e),vv(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ne.near(r);let s=e.resolve(n.map(this.anchor));return new X(s.parent.inlineContent?s:r,r)}replace(e,n=F.empty){if(super.replace(e,n),n==F.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof X&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new bd(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new X(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=ne.findFrom(n,r,!0)||ne.findFrom(n,-r,!0);if(i)n=i.$head;else return ne.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(ne.findFrom(e,-r,!0)||ne.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new X(e,n)}}ne.jsonID("text",X);class bd{constructor(e,n){this.anchor=e,this.head=n}map(e){return new bd(e.map(this.anchor),e.map(this.head))}resolve(e){return X.between(e.resolve(this.anchor),e.resolve(this.head))}}class K extends ne{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?ne.near(i):new K(i)}content(){return new F(I.from(this.node),0,0)}eq(e){return e instanceof K&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new yg(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new K(e.resolve(n.anchor))}static create(e,n){return new K(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}K.prototype.visible=!1;ne.jsonID("node",K);class yg{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new bd(r,r):new yg(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&K.isSelectable(r)?new K(n):ne.near(n)}}class Ut extends ne{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=F.empty){if(n==F.empty){e.delete(0,e.doc.content.size);let r=ne.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ut(e)}map(e){return new Ut(e)}eq(e){return e instanceof Ut}getBookmark(){return yR}}ne.jsonID("all",Ut);const yR={map(){return this},resolve(t){return new Ut(t)}};function ri(t,e,n,r,s,i=!1){if(e.inlineContent)return X.create(t,n);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&K.isSelectable(a))return K.create(t,n-(s<0?a.nodeSize:0))}else{let l=ri(t,a,n+s,s<0?a.childCount:0,s,i);if(l)return l}n+=a.nodeSize*s}return null}function bv(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof Fe||s instanceof He))return;let i=t.mapping.maps[r],o;i.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(ne.near(t.doc.resolve(o),n))}const xv=1,Ol=2,wv=4;class vR extends hE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|xv)&~Ol,this.storedMarks=null,this}get selectionSet(){return(this.updated&xv)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ol,this}ensureMarks(e){return he.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ol)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Ol,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||he.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(ne.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=wv,this}get scrolledIntoView(){return(this.updated&wv)>0}}function kv(t,e){return!e||!t?t:t.bind(e)}class Ro{constructor(e,n,r){this.name=e,this.init=kv(n.init,r),this.apply=kv(n.apply,r)}}const bR=[new Ro("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ro("selection",{init(t,e){return t.selection||ne.atStart(e.doc)},apply(t){return t.selection}}),new Ro("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ro("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Eh{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=bR.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ro(r.key,r.spec.state,r))})}}class bi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new bi(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new vR(this)}static create(e){let n=new Eh(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new bi(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new Eh(this.schema,e.plugins),r=n.fields,s=new bi(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Eh(e.schema,e.plugins),i=new bi(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=En.fromJSON(e.schema,n.doc);else if(o.name=="selection")i.selection=ne.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[o.name]=c.fromJSON.call(l,e,n[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function fE(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=fE(s,e,{})),n[r]=s}return n}class Ee{constructor(e){this.spec=e,this.props={},e.props&&fE(e.props,this,this.props),this.key=e.key?e.key.key:pE("plugin")}getState(e){return e[this.key]}}const Ch=Object.create(null);function pE(t){return t in Ch?t+"$"+ ++Ch[t]:(Ch[t]=0,t+"$")}class Be{constructor(e="key"){this.key=pE(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const vg=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function mE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const gE=(t,e,n)=>{let r=mE(t,n);if(!r)return!1;let s=bg(r);if(!s){let o=r.blockRange(),a=o&&so(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(CE(t,s,e,-1))return!0;if(r.parent.content.size==0&&(Ui(i,"end")||K.isSelectable(i)))for(let o=r.depth;;o--){let a=vd(t.doc,r.before(o),r.after(o),F.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ui(i,"end")?ne.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):K.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},xR=(t,e,n)=>{let r=mE(t,n);if(!r)return!1;let s=bg(r);return s?yE(t,s,e):!1},wR=(t,e,n)=>{let r=bE(t,n);if(!r)return!1;let s=xg(r);return s?yE(t,s,e):!1};function yE(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=vd(t.doc,i,l,F.empty);if(!c||c.from!=i||c instanceof Fe&&c.slice.size>=l-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(X.create(u.doc,i)),n(u.scrollIntoView())}return!0}function Ui(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const vE=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=bg(r)}let o=i&&i.nodeBefore;return!o||!K.isSelectable(o)?!1:(e&&e(t.tr.setSelection(K.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function bg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function bE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const xE=(t,e,n)=>{let r=bE(t,n);if(!r)return!1;let s=xg(r);if(!s)return!1;let i=s.nodeAfter;if(CE(t,s,e,1))return!0;if(r.parent.content.size==0&&(Ui(i,"start")||K.isSelectable(i))){let o=vd(t.doc,r.before(),r.after(),F.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ui(i,"start")?ne.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):K.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},wE=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=xg(r)}let o=i&&i.nodeAfter;return!o||!K.isSelectable(o)?!1:(e&&e(t.tr.setSelection(K.create(t.doc,i.pos)).scrollIntoView()),!0)};function xg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const kR=(t,e)=>{let n=t.selection,r=n instanceof K,s;if(r){if(n.node.isTextblock||!Kr(t.doc,n.from))return!1;s=n.from}else if(s=yd(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(K.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},SR=(t,e)=>{let n=t.selection,r;if(n instanceof K){if(n.node.isTextblock||!Kr(t.doc,n.to))return!1;r=n.to}else if(r=yd(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},ER=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&so(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},kE=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function wg(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const CR=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=wg(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(ne.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},SE=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof Ut||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=wg(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=t.tr.insert(o,i.createAndFill());a.setSelection(X.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},EE=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Qn(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&so(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function _R(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof K&&e.selection.node.isBlock)return!r.parentOffset||!Qn(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],o,a,l=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){l=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),a=wg(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),i.unshift(l&&a?{type:a}:null),o=f;break}else{if(f==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof X||e.selection instanceof Ut)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=Qn(u.doc,d,i.length,i);if(h||(i[0]=a?{type:a}:null,h=Qn(u.doc,d,i.length,i)),!h)return!1;if(u.split(d,i.length,i),!l&&c&&r.node(o).type!=a){let f=u.mapping.map(r.before(o)),m=u.doc.resolve(f);a&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const NR=_R(),TR=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(K.create(t.doc,s))),!0)};function AR(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||Kr(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function CE(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,o,a,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&AR(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(n){let f=e.pos+i.nodeSize,m=I.empty;for(let y=o.length-1;y>=0;y--)m=I.from(o[y].create(null,m));m=I.from(s.copy(m));let g=t.tr.step(new He(e.pos-1,f,e.pos,f,new F(m,1,0),o.length,!0)),v=g.doc.resolve(f+2*o.length);v.nodeAfter&&v.nodeAfter.type==s.type&&Kr(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:ne.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&so(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&Ui(i,"start",!0)&&Ui(s,"end")){let f=s,m=[];for(;m.push(f),!f.isTextblock;)f=f.lastChild;let g=i,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let y=I.empty;for(let x=m.length-1;x>=0;x--)y=I.from(m[x].copy(y));let b=t.tr.step(new He(e.pos-m.length,e.pos+i.nodeSize,e.pos+v,e.pos+i.nodeSize-v,new F(y,m.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function _E(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(X.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const OR=_E(-1),IR=_E(1);function jR(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),a=o&&gg(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Sv(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let u=n.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function kg(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}kg(vg,gE,vE);kg(vg,xE,wE);kg(kE,SE,EE,NR);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function RR(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let a=r?n.tr:null;return MR(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function MR(t,e,n,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);i=new Yc(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Yc(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=gg(i,n,r,e);return a?(t&&PR(t,e,a,s,n),!0):!1}function PR(t,e,n,r,s){let i=I.empty;for(let u=n.length-1;u>=0;u--)i=I.from(n[u].type.create(n[u].attrs,i));t.step(new He(e.start-(r?2:0),e.end,e.start,e.end,new F(i,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==s&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Qn(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function DR(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?LR(e,n,t,i):$R(e,n,i):!0:!1}}function LR(t,e,n,r){let s=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new He(i-1,o,i,o,new F(I.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Yc(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=so(r);if(a==null)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return Kr(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function $R(t,e,n){let r=t.tr,s=n.parent;for(let f=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)f-=s.child(m).nodeSize,r.delete(f-1,f+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?I.empty:I.from(s))))return!1;let d=i.pos,h=d+o.nodeSize;return r.step(new He(d-(a?1:0),h+(l?1:0),d+1,h-1,new F((a?I.empty:I.from(s.copy(I.empty))).append(l?I.empty:I.from(s.copy(I.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function BR(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=I.from(c?t.create():null),d=new F(I.from(t.create(null,I.from(a.type.create(null,u)))),c?3:1,0),h=i.start,f=i.end;n(e.tr.step(new He(h-(c?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}const tt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Vi=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Sp=null;const Wn=function(t,e,n){let r=Sp||(Sp=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},zR=function(){Sp=null},Ds=function(t,e,n,r){return n&&(Ev(t,e,n,r,-1)||Ev(t,e,n,r,1))},FR=/^(img|br|input|textarea|hr)$/i;function Ev(t,e,n,r,s){for(var i;;){if(t==n&&e==r)return!0;if(e==(s<0?0:tn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Ga(t)||FR.test(t.nodeName)||t.contentEditable=="false")return!1;e=tt(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?tn(t):0}else return!1}}function tn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function UR(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=tn(t)}else if(t.parentNode&&!Ga(t))e=tt(t),t=t.parentNode;else return null}}function VR(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Ga(t))e=tt(t)+1,t=t.parentNode;else return null}}function HR(t,e,n){for(let r=e==0,s=e==tn(t);r||s;){if(t==n)return!0;let i=tt(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==tn(t)}}function Ga(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const xd=function(t){return t.focusNode&&Ds(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ds(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function WR(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function qR(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(tn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(tn(r.startContainer),r.startOffset)}}}const Dn=typeof navigator<"u"?navigator:null,Cv=typeof document<"u"?document:null,Jr=Dn&&Dn.userAgent||"",Ep=/Edge\/(\d+)/.exec(Jr),NE=/MSIE \d/.exec(Jr),Cp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jr),Rt=!!(NE||Cp||Ep),Mr=NE?document.documentMode:Cp?+Cp[1]:Ep?+Ep[1]:0,on=!Rt&&/gecko\/(\d+)/i.test(Jr);on&&+(/Firefox\/(\d+)/.exec(Jr)||[0,0])[1];const _p=!Rt&&/Chrome\/(\d+)/.exec(Jr),Ue=!!_p,TE=_p?+_p[1]:0,ft=!Rt&&!!Dn&&/Apple Computer/.test(Dn.vendor),Hi=ft&&(/Mobile\/\w+/.test(Jr)||!!Dn&&Dn.maxTouchPoints>2),Xt=Hi||(Dn?/Mac/.test(Dn.platform):!1),AE=Dn?/Win/.test(Dn.platform):!1,Jn=/Android \d/.test(Jr),Ka=!!Cv&&"webkitFontSmoothing"in Cv.documentElement.style,GR=Ka?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function KR(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function zn(t,e){return typeof t=="number"?t:t[e]}function JR(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function _v(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Vi(o);continue}let a=o,l=a==i.body,c=l?KR(i):JR(a),u=0,d=0;if(e.top<c.top+zn(r,"top")?d=-(c.top-e.top+zn(s,"top")):e.bottom>c.bottom-zn(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+zn(s,"top")-c.top:e.bottom-c.bottom+zn(s,"bottom")),e.left<c.left+zn(r,"left")?u=-(c.left-e.left+zn(s,"left")):e.right>c.right-zn(r,"right")&&(u=e.right-c.right+zn(s,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,m=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-f,v=a.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:Vi(o)}}function YR(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(i,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:OE(t.dom)}}function OE(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Vi(r));return e}function QR({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;IE(n,r==0?0:r-e)}function IE(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Xs=null;function XR(t){if(t.setActive)return t.setActive();if(Xs)return t.focus(Xs);let e=OE(t);t.focus(Xs==null?{get preventScroll(){return Xs={preventScroll:!0},!0}}:void 0),Xs||(Xs=!1,IE(e,0))}function jE(t,e){let n,r=2e8,s,i=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Wn(u).getClientRects();else continue;for(let f=0;f<h.length;f++){let m=h[f];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=u,r=g,s=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&g&&(i=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=d+1)}}return!n&&l&&(n=l,s=c,r=0),n&&n.nodeType==3?ZR(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:jE(n,s)}function ZR(t,e){let n=t.nodeValue.length,r=document.createRange(),s;for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=lr(r,1);if(o.top!=o.bottom&&Sg(e,o)){s={node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),s||{node:t,offset:0}}function Sg(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function eM(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function tM(t,e,n){let{node:r,offset:s}=jE(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function nM(t,e,n,r){let s=-1;for(let i=e,o=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?s=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function RE(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Sg(e,c))return RE(o,e,c)}}if((i=(i+1)%r)==s)break}return t}function rM(t,e){let n=t.dom.ownerDocument,r,s=0,i=qR(n,e.left,e.top);i&&({node:r,offset:s}=i);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!Sg(e,c)||(o=RE(t.dom,e,c),!o))return null}if(ft)for(let c=o;r&&c;c=Vi(c))c.draggable&&(r=void 0);if(o=eM(o,e),r){if(on&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let c;Ka&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=nM(t,r,s,e))}a==null&&(a=tM(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Nv(t){return t.top<t.bottom||t.left<t.right}function lr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Nv(r))return r}return Array.prototype.find.call(n,Nv)||t.getBoundingClientRect()}const sM=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ME(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),o=Ka||on;if(r.nodeType==3)if(o&&(sM.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=lr(Wn(r,s,s),n);if(on&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=lr(Wn(r,s-1,s-1),-1);if(c.top==l.top){let u=lr(Wn(r,s,s+1),-1);if(u.top!=l.top)return vo(u,u.left<c.left)}}return l}else{let l=s,c=s,u=n<0?1:-1;return n<0&&!s?(c++,u=-1):n>=0&&s==r.nodeValue.length?(l--,u=1):n<0?l--:c++,vo(lr(Wn(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==tn(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return _h(l.getBoundingClientRect(),!1)}if(i==null&&s<tn(r)){let l=r.childNodes[s];if(l.nodeType==1)return _h(l.getBoundingClientRect(),!0)}return _h(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==tn(r))){let l=r.childNodes[s-1],c=l.nodeType==3?Wn(l,tn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return vo(lr(c,1),!1)}if(i==null&&s<tn(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Wn(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return vo(lr(c,-1),!0)}return vo(lr(r.nodeType==3?Wn(r):r,-n),n>=0)}function vo(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function _h(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function PE(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function iM(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return PE(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=ME(t,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Wn(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const oM=/[\u0590-\u08ac]/;function aM(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=t.domSelection();return a?!oM.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:o:PE(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!f.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let Tv=null,Av=null,Ov=!1;function lM(t,e,n){return Tv==e&&Av==n?Ov:(Tv=e,Av=n,Ov=n=="up"||n=="down"?iM(t,e,n):aM(t,e,n))}const an=0,Iv=1,gs=2,Ln=3;class Ja{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=an,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>tt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>e||o instanceof LE){s=e-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof DE&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?tt(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?tt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(s==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){s=tt(h.dom)+1;break}e-=h.size}s==-1&&(s=0)}if(s>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=tt(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),o=Math.max(e,n);for(let f=0,m=0;f<this.children.length;f++){let g=this.children[f],v=m+g.size;if(i>m&&o<v)return g.setSelection(e-m-g.border,n-m-g.border,r,s);m=v}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((on||ft)&&e==n){let{node:f,offset:m}=a;if(f.nodeType==3){if(d=!!(m&&f.nodeValue[m-1]==`
`),d&&m==f.nodeValue.length)for(let g=f,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:tt(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=f.childNodes[m-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(on&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(s=!0)}if(!(s||d&&ft)&&Ds(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Ds(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!(d&&on)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let m=a;a=l,l=m}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+i.border,l=o-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?gs:Iv,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Ln:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?gs:Ln}r=o}this.dirty=gs}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?gs:Iv;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class DE extends Ja{constructor(e,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==an&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class cM extends Ja{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ls extends Ja{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=Vs.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Ls(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ln||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ln&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=an){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=an}}slice(e,n,r){let s=Ls.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=Tp(i,n,o,r)),e>0&&(i=Tp(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Pr extends Ja{constructor(e,n,r,s,i,o,a,l,c){super(e,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,n,r,s,i,o){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Vs.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=zE(u,r,n),c?l=new uM(e,n,r,s,u,d||null,h,c,i,o+1):n.isText?new wd(e,n,r,s,u,h,i):new Pr(e,n,r,s,u,d||null,h,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>I.empty)}return e}matchesNode(e,n,r){return this.dirty==an&&e.eq(this.node)&&Xc(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new hM(this,o&&o.node,e);mM(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?he.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,s)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(f=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,f,e)||l.updateNextNode(c,u,d,e,h,s)||l.addNode(c,u,d,e,s),s+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==gs)&&(o&&this.protectLocalComposition(e,o),$E(this.contentDOM,this.children,e),Hi&&gM(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof X)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=yM(this.node.content,o,r-n,s-n);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new cM(this,i,n,s);e.input.compositionNodes.push(o),this.children=Tp(this.children,r,r+s.length,e,o)}update(e,n,r,s){return this.dirty==Ln||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=an}updateOuterDeco(e){if(Xc(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=BE(this.dom,this.nodeDOM,Np(this.outerDeco,this.node,n),Np(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function jv(t,e,n,r,s){zE(r,e,t);let i=new Pr(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class wd extends Pr{constructor(e,n,r,s,i,o,a){super(e,n,r,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==Ln||this.dirty!=an&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=an||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=an,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new wd(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ln)}get domAtom(){return!1}isText(e){return this.node.text==e}}class LE extends Ja{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==an&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uM extends Pr{constructor(e,n,r,s,i,o,a,l,c,u){super(e,n,r,s,i,o,a,c,u),this.spec=l}update(e,n,r,s){if(this.dirty==Ln)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function $E(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=Rv(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(a,r);if(o instanceof Ls){let l=r?r.previousSibling:t.lastChild;$E(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Rv(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const qo=function(t){t&&(this.nodeName=t)};qo.prototype=Object.create(null);const ys=[new qo];function Np(t,e,n){if(t.length==0)return ys;let r=n?ys[0]:new qo,s=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(r=new qo(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&s.length==1&&s.push(r=new qo(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function BE(t,e,n,r){if(n==ys&&r==ys)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=ys[0]),s=l}dM(s,a||ys[0],o)}return s}function dM(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function zE(t,e,n){return BE(t,t,ys,Np(e,n,t.nodeType!=1))}function Xc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Rv(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class hM{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=fM(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=an,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ls.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let o=this.top.children[s];return o.dirty==Ln&&o.dom==o.contentDOM&&(o.dirty=gs),o.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Pr){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ln&&Xc(n,l.outerDeco));if(!h&&l.update(e,n,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=gs,d.updateChildren(s,o+1),d.dirty=an),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Xc(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=Pr.create(this.top,n,r,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,s,i){let o=Pr.create(this.top,e,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new DE(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Ls;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof wd)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ft||Ue)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new LE(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function fM(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Ls)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function pM(t,e){return t.type.side-e.type.side}function mM(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,s,e.forChild(i,u),c),i+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<s.length&&s[o].to==i;){let v=s[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(pM);for(let v=0;v<d.length;v++)n(d[v],c,!!l)}else n(u,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=i&&a.splice(v--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let m=i+h.nodeSize;if(h.isText){let v=m;o<s.length&&s[o].from<v&&(v=s[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<m&&(l=h.cut(v-i),h=h.cut(0,v-i),m=v,f=-1)}else for(;o<s.length&&s[o].to<m;)o++;let g=h.isInline&&!h.isLeaf?a.filter(v=>!v.inline):a.slice();r(h,g,e.forChild(i,h),f),i=m}}function gM(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function yM(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let o=t.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<t.childCount;){let c=t.child(s++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Tp(t,e,n,r,s){let i=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),s&&(i.push(s),s=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function Eg(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(xd(n)){for(l=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&K.isSelectable(d)&&s.parent&&!(d.isInline&&HR(n.focusNode,n.focusOffset,s.dom))){let h=s.posBefore;c=new K(o==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,h=o;for(let f=0;f<n.rangeCount;f++){let m=n.getRangeAt(f);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[l,o]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=Cg(t,u,a,d)}return c}function FE(t){return t.editable?t.hasFocus():VE(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Xn(t,e=!1){let n=t.state.selection;if(UE(t,n),!!FE(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ue){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Ds(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)bM(t);else{let{anchor:r,head:s}=n,i,o;Mv&&!(n instanceof X)&&(n.$from.parent.inlineContent||(i=Pv(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Pv(t,n.to))),t.docView.setSelection(r,s,t,e),Mv&&(i&&Dv(i),o&&Dv(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&vM(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Mv=ft||Ue&&TE<63;function Pv(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(ft&&s&&s.contentEditable=="false")return Nh(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Nh(s);if(i)return Nh(i)}}function Nh(t){return t.contentEditable="true",ft&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Dv(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function vM(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!FE(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function bM(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,tt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Rt&&Mr<=11&&(n.disabled=!0,n.disabled=!1)}function UE(t,e){if(e instanceof K){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Lv(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Lv(t)}function Lv(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Cg(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||X.between(e,n,r)}function $v(t){return t.editable&&!t.hasFocus()?!1:VE(t)}function VE(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xM(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ds(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Ap(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&ne.findFrom(i,e)}function dr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Bv(t,e,n){let r=t.state.selection;if(r instanceof X)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return dr(t,new X(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=Ap(t.state,e);return s&&s instanceof K?dr(t,s):!1}else if(!(Xt&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?K.isSelectable(i)?dr(t,new K(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):Ka?dr(t,new X(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof K&&r.node.isInline)return dr(t,new X(e>0?r.$to:r.$from));{let s=Ap(t.state,e);return s?dr(t,s):!1}}}function Zc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Go(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Zs(t,e){return e<0?wM(t):kM(t)}function wM(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,o=!1;for(on&&n.nodeType==1&&r<Zc(n)&&Go(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Go(a,-1))s=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(HE(n))break;{let a=n.previousSibling;for(;a&&Go(a,-1);)s=n.parentNode,i=tt(a),a=a.previousSibling;if(a)n=a,r=Zc(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Op(t,n,r):s&&Op(t,s,i)}function kM(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Zc(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Go(a,1))i=n,o=++r;else break}else{if(HE(n))break;{let a=n.nextSibling;for(;a&&Go(a,1);)i=a.parentNode,o=tt(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=Zc(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&Op(t,i,o)}function HE(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function SM(t,e){for(;t&&e==t.childNodes.length&&!Ga(t);)e=tt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function EM(t,e){for(;t&&!e&&!Ga(t);)e=tt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Op(t,e,n){if(e.nodeType!=3){let i,o;(o=SM(e,n))?(e=o,n=0):(i=EM(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(xd(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Xn(t)},50)}function zv(t,e){let n=t.state.doc.resolve(e);if(!(Ue||AE)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Fv(t,e,n){let r=t.state.selection;if(r instanceof X&&!r.empty||n.indexOf("s")>-1||Xt&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Ap(t.state,e);if(o&&o instanceof K)return dr(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=r instanceof Ut?ne.near(o,e):ne.findFrom(o,e);return a?dr(t,a):!1}return!1}function Uv(t,e){if(!(t.state.selection instanceof X))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),t.dispatch(o),!0}return!1}function Vv(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function CM(t){if(!ft||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Vv(t,r,"true"),setTimeout(()=>Vv(t,r,"false"),20)}return!1}function _M(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function NM(t,e){let n=e.keyCode,r=_M(e);if(n==8||Xt&&n==72&&r=="c")return Uv(t,-1)||Zs(t,-1);if(n==46&&!e.shiftKey||Xt&&n==68&&r=="c")return Uv(t,1)||Zs(t,1);if(n==13||n==27)return!0;if(n==37||Xt&&n==66&&r=="c"){let s=n==37?zv(t,t.state.selection.from)=="ltr"?-1:1:-1;return Bv(t,s,r)||Zs(t,s)}else if(n==39||Xt&&n==70&&r=="c"){let s=n==39?zv(t,t.state.selection.from)=="ltr"?1:-1:1;return Bv(t,s,r)||Zs(t,s)}else{if(n==38||Xt&&n==80&&r=="c")return Fv(t,-1,r)||Zs(t,-1);if(n==40||Xt&&n==78&&r=="c")return CM(t)||Fv(t,1,r)||Zs(t,1);if(r==(Xt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function _g(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||Vs.fromSchema(t.state.schema),a=YE(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=JE[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let m=a.createElement(u[f]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function WE(t,e,n,r,s){let i=s.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,i||r,t)}),i)return a=new F(I.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{a=h(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",h=>h(e,s,r,t));if(d)a=d;else{let h=s.marks(),{schema:f}=t.state,m=Vs.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=IM(n),Ka&&jM(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Rr.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!TM.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=RM(Hv(a,+u[1],+u[2]),u[4]);else if(a=F.maxOpen(AM(a.content,s),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=Hv(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const TM=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function AM(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&i.length&&GE(l,i,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=KE(o[o.length-1],i.length));let u=qE(a,l);o.push(u),s=s.matchType(u.type),i=l}}),o)return I.from(o)}return t}function qE(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,I.from(t));return t}function GE(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=GE(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(I.from(qE(n,t,s+1))))}}function KE(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,KE(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(I.empty,!0);return t.copy(n.append(r))}function Ip(t,e,n,r,s,i){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(i=0),s<r-1&&(a=Ip(a,e,n,r,s+1,i)),s>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(I.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function Hv(t,e,n){return e<t.openStart&&(t=new F(Ip(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new F(Ip(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const JE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Wv=null;function YE(){return Wv||(Wv=document.implementation.createHTMLDocument("title"))}let Th=null;function OM(t){let e=window.trustedTypes;return e?(Th||(Th=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Th.createHTML(t)):t}function IM(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=YE().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&JE[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=OM(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function jM(t){let e=t.querySelectorAll(Ue?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function RM(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=I.from(l.create(r[a+1],s)),i++,o++}return new F(s,i,o)}const xt={},wt={},MM={touchstart:!0,touchmove:!0};class PM{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function DM(t){for(let e in xt){let n=xt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{$M(t,r)&&!Ng(t,r)&&(t.editable||!(r.type in wt))&&n(t,r)},MM[e]?{passive:!0}:void 0)}ft&&t.dom.addEventListener("input",()=>null),jp(t)}function Er(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function LM(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function jp(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Ng(t,r))})}function Ng(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function $M(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function BM(t,e){!Ng(t,e)&&xt[e.type]&&(t.editable||!(e.type in wt))&&xt[e.type](t,e)}wt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!XE(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Jn&&Ue&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Hi&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,ds(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||NM(t,n)?n.preventDefault():Er(t,"key")};wt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};wt.keypress=(t,e)=>{let n=e;if(XE(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Xt&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof X)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,s,i))&&t.dispatch(i()),n.preventDefault()}};function kd(t){return{left:t.clientX,top:t.clientY}}function zM(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Tg(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,a=>o>i.depth?a(t,n,i.nodeAfter,i.before(o),s,!0):a(t,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function Ai(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function FM(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&K.isSelectable(r)?(Ai(t,new K(n)),!0):!1}function UM(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof K&&(r=n.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(K.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(Ai(t,K.create(t.state.doc,s)),!0):!1}function VM(t,e,n,r,s){return Tg(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?UM(t,n):FM(t,n))}function HM(t,e,n,r){return Tg(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function WM(t,e,n,r){return Tg(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||qM(t,n,r)}function qM(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ai(t,X.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)Ai(t,X.create(r,a+1,a+1+o.content.size));else if(K.isSelectable(o))Ai(t,K.create(r,a));else continue;return!0}}function Ag(t){return eu(t)}const QE=Xt?"metaKey":"ctrlKey";xt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Ag(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&zM(n,t.input.lastClick)&&!n[QE]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=t.posAtCoords(kd(n));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new GM(t,o,n,!!r)):(i=="doubleClick"?HM:WM)(t,o.pos,o.inside,n)?n.preventDefault():Er(t,"pointer"))};class GM{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[QE],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,o=u.depth?u.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof K&&c.from<=o&&c.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&on&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Er(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(kd(e))),this.updateAllowDefault(e),this.allowDefault||!n?Er(this.view,"pointer"):VM(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ft&&this.mightDrag&&!this.mightDrag.node.isAtom||Ue&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ai(this.view,ne.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Er(this.view,"pointer")}move(e){this.updateAllowDefault(e),Er(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}xt.touchstart=t=>{t.input.lastTouch=Date.now(),Ag(t),Er(t,"pointer")};xt.touchmove=t=>{t.input.lastTouch=Date.now(),Er(t,"pointer")};xt.contextmenu=t=>Ag(t);function XE(t,e){return t.composing?!0:ft&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const KM=Jn?5e3:-1;wt.compositionstart=wt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof X&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Ue&&AE&&JM(t)))t.markCursor=t.state.storedMarks||n.marks(),eu(t,!0),t.markCursor=null;else if(eu(t,!e.selection.empty),on&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}ZE(t,KM)};function JM(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}wt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,ZE(t,20))};function ZE(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>eu(t),e))}function eC(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=QM());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function YM(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=UR(e.focusNode,e.focusOffset),r=VR(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function QM(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function eu(t,e=!1){if(!(Jn&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),eC(t),e||t.docView&&t.docView.dirty){let n=Eg(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function XM(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const _a=Rt&&Mr<15||Hi&&GR<604;xt.copy=wt.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=_a?null:n.clipboardData,o=r.content(),{dom:a,text:l}=_g(t,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):XM(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZM(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function eP(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Na(t,r.value,null,s,e):Na(t,r.textContent,r.innerHTML,s,e)},50)}function Na(t,e,n,r,s){let i=WE(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,i||F.empty)))return!0;if(!i)return!1;let o=ZM(i),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function tC(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}wt.paste=(t,e)=>{let n=e;if(t.composing&&!Jn)return;let r=_a?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Na(t,tC(r),r.getData("text/html"),s,n)?n.preventDefault():eP(t,n)};class nC{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const tP=Xt?"altKey":"ctrlKey";function rC(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[tP]}xt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(kd(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof K?s.to-1:s.to))){if(r&&r.mightDrag)o=K.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=K.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=_g(t,a);(!n.dataTransfer.files.length||!Ue||TE>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(_a?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",_a||n.dataTransfer.setData("text/plain",c),t.dragging=new nC(u,rC(t,n),o)};xt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};wt.dragover=wt.dragenter=(t,e)=>e.preventDefault();wt.drop=(t,e)=>{try{nP(t,e,t.dragging)}finally{t.dragging=null}};function nP(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(kd(e));if(!r)return;let s=t.state.doc.resolve(r.pos),i=n&&n.slice;i?t.someProp("transformPasted",f=>{i=f(i,t,!1)}):i=WE(t,tC(e.dataTransfer),_a?null:e.dataTransfer.getData("text/html"),!1,s);let o=!!(n&&rC(t,e));if(t.someProp("handleDrop",f=>f(t,e,i||F.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let a=i?aE(t.state.doc,s.pos,i):s.pos;a==null&&(a=s.pos);let l=t.state.tr;if(o){let{node:f}=n;f?f.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,d=l.doc;if(u?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(d))return;let h=l.doc.resolve(c);if(u&&K.isSelectable(i.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new K(h));else{let f=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,v,y)=>f=y),l.setSelection(Cg(t,h,l.doc.resolve(f)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}xt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Xn(t)},20))};xt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};xt.beforeinput=(t,e)=>{if(Ue&&Jn&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,ds(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in wt)xt[t]=wt[t];function Ta(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class tu{constructor(e,n){this.toDOM=e,this.spec=n||Cs,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:o}=e.mapResult(n.from+s,this.side<0?-1:1);return o?null:new vt(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof tu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ta(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Dr{constructor(e,n){this.attrs=e,this.spec=n||Cs}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new vt(i,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Dr&&Ta(this.attrs,e.attrs)&&Ta(this.spec,e.spec)}static is(e){return e.type instanceof Dr}destroy(){}}class Og{constructor(e,n){this.attrs=e,this.spec=n||Cs}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let o=e.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new vt(i.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof Og&&Ta(this.attrs,e.attrs)&&Ta(this.spec,e.spec)}destroy(){}}class vt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new vt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new vt(e,e,new tu(n,r))}static inline(e,n,r,s){return new vt(e,n,new Dr(r,s))}static node(e,n,r,s){return new vt(e,n,new Og(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Dr}get widget(){return this.type instanceof tu}}const si=[],Cs={};class we{constructor(e,n){this.local=e.length?e:si,this.children=n.length?n:si}static create(e,n){return n.length?nu(n,e,0,Cs):lt}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,s+a,i)}}map(e,n,r){return this==lt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Cs)}mapInner(e,n,r,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(n,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?rP(this.children,o||[],e,n,r,s,i):o?new we(o.sort(_s),si):lt}add(e,n){return n.length?this==lt?we.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=iC(n,a,c)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,u,c+1):s.splice(i,0,l,l+a.nodeSize,nu(u,a,c+1,Cs)),i+=3}});let o=sC(i?oC(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new we(o.length?this.local.concat(o).sort(_s):this.local,s||this.children)}remove(e){return e.length==0||this==lt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+n,l=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(o,a+1);c!=lt?r[i+2]=c:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new we(s,r):lt}forChild(e,n){if(this==lt)return this;if(n.isLeaf)return we.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,o=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof Dr){let c=Math.max(i,l.from)-i,u=Math.min(o,l.to)-i;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new we(s.sort(_s),si);return r?new vr([a,r]):a}return r||lt}eq(e){if(this==e)return!0;if(!(e instanceof we)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Ig(this.localsInner(e))}localsInner(e){if(this==lt)return si;if(e.inlineContent||!this.local.some(Dr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Dr||n.push(this.local[r]);return n}forEachSet(e){e(this)}}we.empty=new we([],[]);we.removeOverlap=Ig;const lt=we.empty;class vr{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,Cs));return vr.from(r)}forChild(e,n){if(n.isLeaf)return we.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=lt&&(i instanceof vr?r=r.concat(i.members):r.push(i))}return vr.from(r)}eq(e){if(!(e instanceof vr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?Ig(r?n:n.sort(_s)):si}static from(e){switch(e.length){case 0:return lt;case 1:return e[0];default:return new vr(e.every(n=>n instanceof we)?e:e.reduce((n,r)=>n.concat(r instanceof we?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function rP(t,e,n,r,s,i,o){let a=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,f,m,g)=>{let v=g-m-(f-h);for(let y=0;y<a.length;y+=3){let b=a[y+1];if(b<0||h>b+u-d)continue;let x=a[y]+u-d;f>=x?a[y+1]=h<=x?-2:-1:h>=u&&v&&(a[y]+=v,a[y+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-s;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+i,-1),f=h-s,{index:m,offset:g}=r.content.findIndex(d),v=r.maybeChild(m);if(v&&g==d&&g+v.nodeSize==f){let y=a[c+2].mapInner(n,v,u+1,t[c]+i+1,o);y!=lt?(a[c]=d,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=sP(a,t,e,n,s,i,o),u=nu(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let f=u.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new we(e.sort(_s),a)}function sC(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new vt(s.from+e,s.to+e,s.type))}return n}function sP(t,e,n,r,s,i,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,s,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function iC(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),t[i]=null);return s}function oC(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function nu(t,e,n,r){let s=[],i=!1;e.forEach((a,l)=>{let c=iC(t,a,l+n);if(c){i=!0;let u=nu(c,a,n+l+1,r);u!=lt&&s.push(l,l+a.nodeSize,u)}});let o=sC(i?oC(t):t,-n).sort(_s);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new we(o,s):lt}function _s(t,e){return t.from-e.from||t.to-e.to}function Ig(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),qv(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),qv(e,s,r.copy(i.from,r.to)));break}}}return e}function qv(t,e,n){for(;e<t.length&&_s(n,t[e])>0;)e++;t.splice(e,0,n)}function Ah(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=lt&&e.push(r)}),t.cursorWrapper&&e.push(we.create(t.state.doc,[t.cursorWrapper.deco])),vr.from(e)}const iP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},oP=Rt&&Mr<=11;class aP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class lP{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new aP,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Rt&&Mr<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),oP&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,iP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if($v(this.view)){if(this.suppressingSelectionUpdates)return Xn(this.view);if(Rt&&Mr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ds(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=Vi(i))n.add(i);for(let i=e.anchorNode;i;i=Vi(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&$v(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(on&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||dP(e,d)!=f)&&h.remove()}}}else if((Ue||ft)&&l.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let d=u.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&xd(r)&&(c=Eg(e))&&c.eq(ne.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xn(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),cP(e)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Xn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Rt&&Mr<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h)}let o=s&&s.parentNode==e.target?tt(s)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?tt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Gv=new WeakMap,Kv=!1;function cP(t){if(!Gv.has(t)&&(Gv.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=on,Kv)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Kv=!0}}function Jv(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Ds(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function uP(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return Jv(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Jv(t,n):null}function dP(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function hP(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],xd(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Ue&&t.input.lastKeyCode===8)for(let v=i;v>s;v--){let y=r.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){i=v;break}if(!b||b.size)break}let d=t.state.doc,h=t.someProp("domParser")||Rr.fromSchema(t.state.schema),f=d.resolve(o),m=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:s,to:i,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:fP,context:f});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:a}}function fP(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ft&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||ft&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const pP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function mP(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=Eg(t,E);if(_&&!t.state.selection.eq(_)){if(Ue&&Jn&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",T=>T(t,ds(13,"Enter"))))return;let N=t.state.tr.setSelection(_);E=="pointer"?N.setMeta("pointer",!0):E=="key"&&N.scrollIntoView(),i&&N.setMeta("composition",i),t.dispatch(N)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=hP(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let m=vP(d.content,c.doc.content,c.from,h,f);if(m&&t.input.domChangeCount++,(Hi&&t.input.lastIOSEnter>Date.now()-225||Jn)&&s.some(E=>E.nodeType==1&&!pP.test(E.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",E=>E(t,ds(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof X&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let E=Yv(t,t.state.doc,c.sel);if(E&&!E.eq(t.state.selection)){let _=t.state.tr.setSelection(E);i&&_.setMeta("composition",i),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof X&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Rt&&Mr<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),y=u.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if((Hi&&t.input.lastIOSEnter>Date.now()-225&&(!b||s.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!b&&g.pos<c.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(c.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",E=>E(t,ds(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&yP(u,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",E=>E(t,ds(8,"Backspace")))){Jn&&Ue&&t.domObserver.suppressSelectionUpdates();return}Ue&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Jn&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,ds(13,"Enter"))})},20));let x=m.start,k=m.endA,w=E=>{let _=E||t.state.tr.replace(x,k,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let N=Yv(t,_.doc,c.sel);N&&!(Ue&&t.composing&&N.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(N.head==x||N.head==_.mapping.map(k)-1)||Rt&&N.empty&&N.head==x)&&_.setSelection(N)}return i&&_.setMeta("composition",i),_.scrollIntoView()},S;if(b)if(g.pos==v.pos){Rt&&Mr<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xn(t),20));let E=w(t.state.tr.delete(x,k)),_=u.resolve(m.start).marksAcross(u.resolve(m.endA));_&&E.ensureMarks(_),t.dispatch(E)}else if(m.endA==m.endB&&(S=gP(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let E=w(t.state.tr);S.type=="add"?E.addMark(x,k,S.mark):E.removeMark(x,k,S.mark),t.dispatch(E)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let E=g.parent.textBetween(g.parentOffset,v.parentOffset),_=()=>w(t.state.tr.insertText(E,x,k));t.someProp("handleTextInput",N=>N(t,x,k,E,_))||t.dispatch(_())}else t.dispatch(w());else t.dispatch(w())}function Yv(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Cg(t,e.resolve(n.anchor),e.resolve(n.head))}function gP(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,o,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(I.from(c).eq(t))return{mark:a,type:o}}function yP(t,e,n,r,s){if(n-e<=s.pos-r.pos||Oh(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(Oh(i,!0,!0));return!o.parent.isTextblock||o.pos>n||Oh(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Oh(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function vP(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));r-=o+l-i}if(o<i&&t.size<e.size){let l=r<=i&&r>=o?i-r:0;i-=l,i&&i<e.size&&Qv(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&Qv(t.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function Qv(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class aC{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new PM,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(nb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=eb(this),Zv(this),this.nodeViews=tb(this),this.docView=jv(this.state.doc,Xv(this),Ah(this),this.dom,this),this.domObserver=new lP(this,(r,s,i,o)=>mP(this,r,s,i,o)),this.domObserver.start(),DM(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&jp(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(nb),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(eC(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=tb(this);xP(f,this.nodeViews)&&(this.nodeViews=f,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&jp(this),this.editable=eb(this),Zv(this);let l=Ah(this),c=Xv(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(s.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&YR(this);if(o){this.domObserver.stop();let f=d&&(Rt||Ue)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&bP(s.selection,e.selection);if(d){let m=Ue?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=YM(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=jv(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xM(this))?Xn(this,f):(UE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&QR(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof K){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&_v(this,n.getBoundingClientRect(),e)}else _v(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new nC(e.slice,e.move,s<0?void 0:K.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=n?n(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(Rt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&XR(this.dom),Xn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rM(this,e)}coordsAtPos(e,n=1){return ME(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return lM(this,n||this.state,e)}pasteHTML(e,n){return Na(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Na(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return _g(this,e)}destroy(){this.docView&&(LM(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ah(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,zR())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return BM(this,e)}domSelectionRange(){let e=this.domSelection();return e?ft&&this.root.nodeType===11&&WR(this.dom.ownerDocument)==this.dom&&uP(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}aC.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Xv(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[vt.node(0,t.state.doc.content.size,e)]}function Zv(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:vt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function eb(t){return!t.someProp("editable",e=>e(t.state)===!1)}function bP(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function tb(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function xP(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function nb(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Fr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ru={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},wP=typeof navigator<"u"&&/Mac/.test(navigator.platform),kP=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var nt=0;nt<10;nt++)Fr[48+nt]=Fr[96+nt]=String(nt);for(var nt=1;nt<=24;nt++)Fr[nt+111]="F"+nt;for(var nt=65;nt<=90;nt++)Fr[nt]=String.fromCharCode(nt+32),ru[nt]=String.fromCharCode(nt);for(var Ih in Fr)ru.hasOwnProperty(Ih)||(ru[Ih]=Fr[Ih]);function SP(t){var e=wP&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||kP&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ru:Fr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const EP=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),CP=typeof navigator<"u"&&/Win/.test(navigator.platform);function _P(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))EP?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function NP(t){let e=Object.create(null);for(let n in t)e[_P(n)]=t[n];return e}function jh(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function TP(t){return new Ee({props:{handleKeyDown:lC(t)}})}function lC(t){let e=NP(t);return function(n,r){let s=SP(r),i,o=e[jh(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[jh(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(CP&&r.ctrlKey&&r.altKey)&&(i=Fr[r.keyCode])&&i!=s){let a=e[jh(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var AP=Object.defineProperty,jg=(t,e)=>{for(var n in e)AP(t,n,{get:e[n],enumerable:!0})};function Sd(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var Ed=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const u=a(...c)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o=[],a=!!t,l=t||s.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),o.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(n).map(([d,h])=>[d,(...m)=>{const g=this.buildProps(l,e),v=h(...m)(g);return o.push(v),u}])),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o={tr:t,editor:r,view:i,state:Sd({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},cC={};jg(cC,{blur:()=>OP,clearContent:()=>IP,clearNodes:()=>jP,command:()=>RP,createParagraphNear:()=>MP,cut:()=>PP,deleteCurrentNode:()=>DP,deleteNode:()=>LP,deleteRange:()=>$P,deleteSelection:()=>BP,enter:()=>zP,exitCode:()=>FP,extendMarkRange:()=>UP,first:()=>VP,focus:()=>WP,forEach:()=>qP,insertContent:()=>GP,insertContentAt:()=>YP,joinBackward:()=>ZP,joinDown:()=>XP,joinForward:()=>eD,joinItemBackward:()=>tD,joinItemForward:()=>nD,joinTextblockBackward:()=>rD,joinTextblockForward:()=>sD,joinUp:()=>QP,keyboardShortcut:()=>oD,lift:()=>aD,liftEmptyBlock:()=>lD,liftListItem:()=>cD,newlineInCode:()=>uD,resetAttributes:()=>dD,scrollIntoView:()=>hD,selectAll:()=>fD,selectNodeBackward:()=>pD,selectNodeForward:()=>mD,selectParentNode:()=>gD,selectTextblockEnd:()=>yD,selectTextblockStart:()=>vD,setContent:()=>bD,setMark:()=>BD,setMeta:()=>zD,setNode:()=>FD,setNodeSelection:()=>UD,setTextDirection:()=>VD,setTextSelection:()=>HD,sinkListItem:()=>WD,splitBlock:()=>qD,splitListItem:()=>GD,toggleList:()=>KD,toggleMark:()=>JD,toggleNode:()=>YD,toggleWrap:()=>QD,undoInputRule:()=>XD,unsetAllMarks:()=>ZD,unsetMark:()=>eL,unsetTextDirection:()=>tL,updateAttributes:()=>nL,wrapIn:()=>rL,wrapInList:()=>sL});var OP=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),IP=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),jP=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),f=d.blockRange(h);if(!f)return;const m=so(f);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,g)}(m||m===0)&&e.lift(f,m)})}),!0},RP=t=>e=>t(e),MP=()=>({state:t,dispatch:e})=>SE(t,e),PP=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new X(r.doc.resolve(Math.max(o-1,0)))),!0},DP=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const a=s.before(i),l=s.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1};function De(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var LP=t=>({tr:e,state:n,dispatch:r})=>{const s=De(t,n.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const l=i.before(o),c=i.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},$P=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},BP=()=>({state:t,dispatch:e})=>vg(t,e),zP=()=>({commands:t})=>t.keyboardShortcut("Enter"),FP=()=>({state:t,dispatch:e})=>CR(t,e);function Rg(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function su(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:Rg(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function uC(t,e,n={}){return t.find(r=>r.type===e&&su(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function rb(t,e,n={}){return!!uC(t,e,n)}function Mg(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!uC([...s.node.marks],e,n)))return;let o=s.index,a=t.start()+s.offset,l=o+1,c=a+s.node.nodeSize;for(;o>0&&rb([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&rb([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function ir(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var UP=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=ir(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const d=Mg(l,i,e);if(d&&d.from<=c&&d.to>=u){const h=X.create(o,d.from,d.to);n.setSelection(h)}}return!0},VP=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function dC(t){return t instanceof X}function vs(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function hC(t,e=null){if(!e)return null;const n=ne.atStart(t),r=ne.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?X.create(t,vs(0,s,i),vs(t.content.size,s,i)):X.create(t,vs(e,s,i),vs(e,s,i))}function HP(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Pg(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var WP=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(Pg()||HP())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!dC(n.state.selection))return o(),!0;const a=hC(s.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},qP=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),GP=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),fC=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&fC(r)}return t};function Il(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return fC(n)}function Aa(t,e,n){if(t instanceof En||t instanceof I)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return I.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Aa("",e,n)}if(s){if(n.errorOnInvalidContent){let o=!1,a="";const l=new YS({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Rr.fromSchema(l).parseSlice(Il(t),n.parseOptions):Rr.fromSchema(l).parse(Il(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Rr.fromSchema(e);return n.slice?i.parseSlice(Il(t),n.parseOptions).content:i.parse(Il(t),n.parseOptions)}return Aa("",e,n)}function KP(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof Fe||s instanceof He))return;const i=t.mapping.maps[r];let o=0;i.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(ne.near(t.doc.resolve(o),n))}var JP=t=>!("type"in t),YP=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=v=>{i.emit("contentError",{editor:i,error:v,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Aa(e,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=Aa(e,i.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(v){return l(v),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,f=!0;if((JP(a)?a:[a]).forEach(v=>{v.check(),h=h?v.isText&&v.marks.length===0:!1,f=f?v.isBlock:!1}),u===d&&f){const{parent:v}=r.doc.resolve(u);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(u-=1,d+=1)}let g;if(h){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof I){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,u,d)}else{g=a;const v=r.doc.resolve(u),y=v.node(),b=v.parentOffset===0,x=y.isText||y.isTextblock,k=y.content.size>0;b&&x&&k&&(u=Math.max(0,u-1)),r.replaceWith(u,d,g)}n.updateSelection&&KP(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:g})}return!0},QP=()=>({state:t,dispatch:e})=>kR(t,e),XP=()=>({state:t,dispatch:e})=>SR(t,e),ZP=()=>({state:t,dispatch:e})=>gE(t,e),eD=()=>({state:t,dispatch:e})=>xE(t,e),tD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=yd(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},nD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=yd(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},rD=()=>({state:t,dispatch:e})=>xR(t,e),sD=()=>({state:t,dispatch:e})=>wR(t,e);function pC(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function iD(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Pg()||pC()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}var oD=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=iD(t).split(/-(?!$)/),o=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function Ur(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,o=e?De(e,t.schema):null,a=[];t.doc.nodesBetween(r,s,(d,h)=>{if(d.isText)return;const f=Math.max(r,h),m=Math.min(s,h+d.nodeSize);a.push({node:d,from:f,to:m})});const l=s-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>su(d.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}var aD=(t,e={})=>({state:n,dispatch:r})=>{const s=De(t,n.schema);return Ur(n,s,e)?ER(n,r):!1},lD=()=>({state:t,dispatch:e})=>EE(t,e),cD=t=>({state:e,dispatch:n})=>{const r=De(t,e.schema);return DR(r)(e,n)},uD=()=>({state:t,dispatch:e})=>kE(t,e);function Cd(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function sb(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var dD=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=Cd(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=De(t,r.schema)),a==="mark"&&(o=ir(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{i&&i===u.type&&(l=!0,s&&n.setNodeMarkup(d,void 0,sb(u.attrs,e))),o&&u.marks.length&&u.marks.forEach(h=>{o===h.type&&(l=!0,s&&n.addMark(d,d+u.nodeSize,o.create(sb(h.attrs,e))))})})}),l},hD=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),fD=()=>({tr:t,dispatch:e})=>{if(e){const n=new Ut(t.doc);t.setSelection(n)}return!0},pD=()=>({state:t,dispatch:e})=>vE(t,e),mD=()=>({state:t,dispatch:e})=>wE(t,e),gD=()=>({state:t,dispatch:e})=>TR(t,e),yD=()=>({state:t,dispatch:e})=>IR(t,e),vD=()=>({state:t,dispatch:e})=>OR(t,e);function Rp(t,e,n={},r={}){return Aa(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var bD=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{const{doc:l}=i;if(r.preserveWhitespace!=="full"){const c=Rp(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return o&&i.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return o&&i.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function mC(t,e){const n=ir(e,t.schema),{from:r,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function gC(t,e){const n=new hE(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function xD(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function wD(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function kD(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function _d(t){return e=>kD(e.$from,t)}function G(t,e,n){return t.config[e]===void 0&&t.parent?G(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?G(t.parent,e,n):null}):t.config[e]}function Dg(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=G(e,"addExtensions",n);return r?[e,...Dg(r())]:e}).flat(10)}function Lg(t,e){const n=Vs.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function yC(t){return typeof t=="function"}function ce(t,e=void 0,...n){return yC(t)?e?t.bind(e)(...n):t(...n):t}function SD(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Wi(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function vC(t){const e=[],{nodeExtensions:n,markExtensions:r}=Wi(t),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=G(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,f])=>{e.push({type:d,name:h,attribute:{...i,...f}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=G(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...i,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function Oe(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),r[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[s]=i}),r},{})}function iu(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Oe(n,r),{})}function ED(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function ib(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):ED(n.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...r,...s}}}}function ob(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&SD(n)?!1:n!=null))}function ab(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function CD(t,e){var n;const r=vC(t),{nodeExtensions:s,markExtensions:i}=Wi(t),o=(n=s.find(c=>G(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,b)=>{const x=G(b,"extendNodeSchema",d);return{...y,...x?x(c):{}}},{}),f=ob({...h,content:ce(G(c,"content",d)),marks:ce(G(c,"marks",d)),group:ce(G(c,"group",d)),inline:ce(G(c,"inline",d)),atom:ce(G(c,"atom",d)),selectable:ce(G(c,"selectable",d)),draggable:ce(G(c,"draggable",d)),code:ce(G(c,"code",d)),whitespace:ce(G(c,"whitespace",d)),linebreakReplacement:ce(G(c,"linebreakReplacement",d)),defining:ce(G(c,"defining",d)),isolating:ce(G(c,"isolating",d)),attrs:Object.fromEntries(u.map(ab))}),m=ce(G(c,"parseHTML",d));m&&(f.parseDOM=m.map(y=>ib(y,u)));const g=G(c,"renderHTML",d);g&&(f.toDOM=y=>g({node:y,HTMLAttributes:iu(y,u)}));const v=G(c,"renderText",d);return v&&(f.toText=v),[c.name,f]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,y)=>{const b=G(y,"extendMarkSchema",d);return{...v,...b?b(c):{}}},{}),f=ob({...h,inclusive:ce(G(c,"inclusive",d)),excludes:ce(G(c,"excludes",d)),group:ce(G(c,"group",d)),spanning:ce(G(c,"spanning",d)),code:ce(G(c,"code",d)),attrs:Object.fromEntries(u.map(ab))}),m=ce(G(c,"parseHTML",d));m&&(f.parseDOM=m.map(v=>ib(v,u)));const g=G(c,"renderHTML",d);return g&&(f.toDOM=v=>g({mark:v,HTMLAttributes:iu(v,u)})),[c.name,f]}));return new YS({topNode:o,nodes:a,marks:l})}function _D(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function $g(t){return t.sort((n,r)=>{const s=G(n,"priority")||100,i=G(r,"priority")||100;return s>i?-1:s<i?1:0})}function bC(t){const e=$g(Dg(t)),n=_D(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function xC(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,s,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=i);const f=o==null?void 0:o[l.type.name];if(f)return u&&(a+=f({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)==null?void 0:h.slice(Math.max(r,c)-c,s-c))}),a}function ND(t,e){const n={from:0,to:t.content.size};return xC(t,n,e)}function wC(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function TD(t,e){const n=De(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function kC(t,e){const n=Cd(typeof e=="string"?e:e.name,t.schema);return n==="node"?TD(t,e):n==="mark"?mC(t,e):{}}function AD(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function OD(t){const e=AD(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function SC(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),u=e.slice(i).map(l),d=e.invert().map(c,-1),h=e.invert().map(u);r.push({oldRange:{from:d,to:h},newRange:{from:c,to:u}})})}),OD(r)}function Bg(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),o=Mg(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}var ID=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let i=r,o=null;for(;i>0&&o===null;){const a=s.node(i);(a==null?void 0:a.type.name)===e?o=a:i-=1}return[o,i]};function Rh(t,e){return e.nodes[t]||e.marks[t]||null}function lc(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}var jD=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)==null?void 0:c.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-i))}),n};function Mp(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?ir(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>su(d.attrs,n,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:d,$to:h})=>{const f=d.pos,m=h.pos;t.doc.nodesBetween(f,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(f,v),b=Math.min(m,v+g.nodeSize),x=b-y;o+=x,a.push(...g.marks.map(k=>({mark:k,from:y,to:b})))})}),o===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>su(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=o}function RD(t,e,n={}){if(!e)return Ur(t,null,n)||Mp(t,null,n);const r=Cd(e,t.schema);return r==="node"?Ur(t,e,n):r==="mark"?Mp(t,e,n):!1}var MD=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const i=_d(a=>a.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return s.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},PD=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function lb(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function cb(t,e){const{nodeExtensions:n}=Wi(e),r=n.find(o=>o.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=ce(G(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function Nd(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(Nd(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function EC(t){return t instanceof K}var CC=class _C{constructor(e){this.position=e}static fromJSON(e){return new _C(e.position)}toJSON(){return{position:this.position}}};function DD(t,e){const n=e.mapping.mapResult(t.position);return{position:new CC(n.pos),mapResult:n}}function LD(t){return new CC(t)}function $D(t,e,n){var r;const{selection:s}=e;let i=null;if(dC(s)&&(i=s.$cursor),i){const a=(r=t.storedMarks)!=null?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const f=!h||h.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=f&&m}return!c}),c})}var BD=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:a}=i,l=ir(t,r.schema);if(s)if(o){const c=mC(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,f)=>{const m=Math.max(f,u),g=Math.min(f+h.nodeSize,d);h.marks.find(y=>y.type===l)?h.marks.forEach(y=>{l===y.type&&n.addMark(m,g,l.create({...y.attrs,...e}))}):n.addMark(m,g,l.create(e))})});return $D(r,n,l)},zD=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),FD=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=De(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>Sv(i,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Sv(i,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},UD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=vs(t,0,r.content.size),i=K.create(r,s);e.setSelection(i)}return!0},VD=(t,e)=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=r;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=i.from,a=i.to),s&&n.doc.nodesBetween(o,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},HD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=X.atStart(r).from,a=X.atEnd(r).to,l=vs(s,o,a),c=vs(i,o,a),u=X.create(r,l,c);e.setSelection(u)}return!0},WD=t=>({state:e,dispatch:n})=>{const r=De(t,e.schema);return BR(r)(e,n)};function ub(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}var qD=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,c=s.extensionManager.attributes,u=lc(c,a.node().type.name,a.node().attrs);if(i instanceof K&&i.node.isBlock)return!a.parentOffset||!Qn(o,a.pos)?!1:(r&&(t&&ub(n,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:xD(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&h?[{type:h,attrs:u}]:void 0,m=Qn(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!m&&Qn(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(m=!0,f=h?[{type:h,attrs:u}]:void 0),r){if(m&&(i instanceof X&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),v=e.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&ub(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},GD=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const a=De(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let y=I.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-b;_>=l.depth-3;_-=1)y=I.from(l.node(_).copy(y));const x=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...lc(h,l.node().type.name,l.node().attrs),...e},w=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(k))||void 0;y=y.append(I.from(a.createAndFill(null,w)||void 0));const S=l.before(l.depth-(b-1));n.replace(S,l.after(-x),new F(y,4-b,0));let E=-1;n.doc.nodesBetween(S,n.doc.content.size,(_,N)=>{if(E>-1)return!1;_.isTextblock&&_.content.size===0&&(E=N+1)}),E>-1&&n.setSelection(X.near(n.doc.resolve(E))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,m={...lc(h,d.type.name,d.attrs),...e},g={...lc(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const v=f?[{type:a,attrs:m},{type:f,attrs:g}]:[{type:a,attrs:m}];if(!Qn(n.doc,l.pos,2))return!1;if(s){const{selection:y,storedMarks:b}=r,{splittableMarks:x}=i.extensionManager,k=b||y.$to.parentOffset&&y.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!k||!s)return!0;const w=k.filter(S=>x.includes(S.type.name));n.ensureMarks(w)}return!0},Mh=(t,e)=>{const n=_d(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Kr(t.doc,n.pos)&&t.join(n.pos),!0},Ph=(t,e)=>{const n=_d(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Kr(t.doc,r)&&t.join(r),!0},KD=(t,e,n,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=s.extensionManager,f=De(t,o.schema),m=De(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:b}=g,x=y.blockRange(b),k=v||g.$to.parentOffset&&g.$from.marks();if(!x)return!1;const w=_d(S=>cb(S.type.name,d))(g);if(x.depth>=1&&w&&x.depth-w.depth<=1){if(w.node.type===f)return c.liftListItem(m);if(cb(w.node.type.name,d)&&f.validContent(w.node.content)&&a)return l().command(()=>(i.setNodeMarkup(w.pos,f),!0)).command(()=>Mh(i,f)).command(()=>Ph(i,f)).run()}return!n||!k||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>Mh(i,f)).command(()=>Ph(i,f)).run():l().command(()=>{const S=u().wrapInList(f,r),E=k.filter(_=>h.includes(_.type.name));return i.ensureMarks(E),S?!0:c.clearNodes()}).wrapInList(f,r).command(()=>Mh(i,f)).command(()=>Ph(i,f)).run()},JD=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=ir(t,r.schema);return Mp(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},YD=(t,e,n={})=>({state:r,commands:s})=>{const i=De(t,r.schema),o=De(e,r.schema),a=Ur(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...n})},QD=(t,e={})=>({state:n,commands:r})=>{const s=De(t,n.schema);return Ur(n,s,e)?r.lift(s):r.wrapIn(s,e)},XD=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},ZD=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},eL=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=ir(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&o){let{from:h,to:f}=a;const m=(i=c.marks().find(v=>v.type===l))==null?void 0:i.attrs,g=Mg(c,l,m);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},tL=t=>({tr:e,state:n,dispatch:r})=>{const{selection:s}=n;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=s.from,o=s.to),r&&e.doc.nodesBetween(i,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},nL=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=Cd(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=De(t,r.schema)),a==="mark"&&(o=ir(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;let h,f,m,g;n.selection.empty?r.doc.nodesBetween(u,d,(v,y)=>{i&&i===v.type&&(l=!0,m=Math.max(y,u),g=Math.min(y+v.nodeSize,d),h=y,f=v)}):r.doc.nodesBetween(u,d,(v,y)=>{y<u&&i&&i===v.type&&(l=!0,m=Math.max(y,u),g=Math.min(y+v.nodeSize,d),h=y,f=v),y>=u&&y<=d&&(i&&i===v.type&&(l=!0,s&&n.setNodeMarkup(y,void 0,{...v.attrs,...e})),o&&v.marks.length&&v.marks.forEach(b=>{if(o===b.type&&(l=!0,s)){const x=Math.max(y,u),k=Math.min(y+v.nodeSize,d);n.addMark(x,k,o.create({...b.attrs,...e}))}}))}),f&&(h!==void 0&&s&&n.setNodeMarkup(h,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(v=>{o===v.type&&s&&n.addMark(m,g,o.create({...v.attrs,...e}))}))}),l},rL=(t,e={})=>({state:n,dispatch:r})=>{const s=De(t,n.schema);return jR(s,e)(n,r)},sL=(t,e={})=>({state:n,dispatch:r})=>{const s=De(t,n.schema);return RR(s,e)(n,r)},iL=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Td=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},oL=(t,e)=>{if(Rg(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function jl(t){var e;const{editor:n,from:r,to:s,text:i,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=jD(c)+i;return o.forEach(h=>{if(u)return;const f=oL(d,h.find);if(!f)return;const m=l.state.tr,g=Sd({state:l.state,transaction:m}),v={from:r-(f[0].length-i.length),to:s},{commands:y,chain:b,can:x}=new Ed({editor:n,state:g});h.handler({state:g,range:v,match:f,commands:y,chain:b,can:x})===null||!m.steps.length||(h.undoable&&m.setMeta(a,{transform:m,from:r,to:s,text:i}),l.dispatch(m),u=!0)}),u}function aL(t){const{editor:e,rules:n}=t,r=new Ee({state:{init(){return null},apply(s,i,o){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=Lg(I.from(u),o.schema);const{from:d}=l,h=d+u.length;jl({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return jl({editor:e,from:i,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&jl({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?jl({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function lL(t){return Object.prototype.toString.call(t).slice(8,-1)}function Rl(t){return lL(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function NC(t,e){const n={...t};return Rl(t)&&Rl(e)&&Object.keys(e).forEach(r=>{Rl(e[r])&&Rl(t[r])?n[r]=NC(t[r],e[r]):n[r]=e[r]}),n}var zg=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...ce(G(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ce(G(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>NC(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Yr=class TC extends zg{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new TC(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function cL(t){return typeof t=="number"}var uL=class{constructor(t){this.find=t.find,this.handler=t.handler}},dL=(t,e,n)=>{if(Rg(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function hL(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Ed({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(f,m)=>{var g,v,y,b,x;if((v=(g=f.type)==null?void 0:g.spec)!=null&&v.code||!(f.isText||f.isTextblock||f.isInline))return;const k=(x=(b=(y=f.content)==null?void 0:y.size)!=null?b:f.nodeSize)!=null?x:0,w=Math.max(r,m),S=Math.min(s,m+k);if(w>=S)return;const E=f.isText?f.text||"":f.textBetween(w-m,S-m,void 0,"");dL(E,i.find,o).forEach(N=>{if(N.index===void 0)return;const T=w+N.index+1,P=T+N[0].length,A={from:n.tr.mapping.map(T),to:n.tr.mapping.map(P)},W=i.handler({state:n,range:A,match:N,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(W)})}),d.every(f=>f!==null)}var Ml=null,fL=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function pL(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:f,pasteEvt:m})=>{const g=u.tr,v=Sd({state:u,transaction:g});if(!(!hL({editor:e,state:v,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new Ee({view(d){const h=m=>{var g;r=(g=d.dom.parentElement)!=null&&g.contains(m.target)?d.dom.parentElement:null,r&&(Ml=e)},f=()=>{Ml&&(Ml=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(i=r===d.dom.parentElement,a=h,!i){const f=Ml;f!=null&&f.isEditable&&setTimeout(()=>{const m=f.state.selection;m&&f.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,h)=>{var f;const m=(f=h.clipboardData)==null?void 0:f.getData("text/html");return o=h,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,f)=>{const m=d[0],g=m.getMeta("uiEvent")==="paste"&&!s,v=m.getMeta("uiEvent")==="drop"&&!i,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:w}=y;typeof w=="string"?w=w:w=Lg(I.from(w),f.schema);const{from:S}=y,E=S+w.length,_=fL(w);return l({rule:u,state:f,from:S,to:{b:E},pasteEvt:_})}const x=h.doc.content.findDiffStart(f.doc.content),k=h.doc.content.findDiffEnd(f.doc.content);if(!(!cL(x)||!k||x===k.b))return l({rule:u,state:f,from:x,to:k,pasteEvt:o})}}))}var Ad=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=bC(t),this.schema=CD(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Rh(e.name,this.schema)},r=G(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return $g([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Rh(r.name,this.schema)},i=[],o=G(r,"addKeyboardShortcuts",s);let a={};if(r.type==="mark"&&G(r,"exitable",s)&&(a.ArrowRight=()=>Yr.handleExit({editor:t,mark:r})),o){const h=Object.fromEntries(Object.entries(o()).map(([f,m])=>[f,()=>m({editor:t})]));a={...a,...h}}const l=TP(a);i.push(l);const c=G(r,"addInputRules",s);if(lb(r,t.options.enableInputRules)&&c){const h=c();if(h&&h.length){const f=aL({editor:t,rules:h}),m=Array.isArray(f)?f:[f];i.push(...m)}}const u=G(r,"addPasteRules",s);if(lb(r,t.options.enablePasteRules)&&u){const h=u();if(h&&h.length){const f=pL({editor:t,rules:h});i.push(...f)}}const d=G(r,"addProseMirrorPlugins",s);if(d){const h=d();i.push(...h)}return i})}get attributes(){return vC(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Wi(this.extensions);return Object.fromEntries(e.filter(n=>!!G(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:De(n.name,this.schema)},i=G(n,"addNodeView",s);if(!i)return[];const o=i();if(!o)return[];const a=(l,c,u,d,h)=>{const f=iu(l,r);return o({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:t,extension:n,HTMLAttributes:f})};return[n.name,a]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Wi(this.extensions);return Object.fromEntries(e.filter(n=>!!G(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ir(n.name,this.schema)},i=G(n,"addMarkView",s);if(!i)return[];const o=(a,l,c)=>{const u=iu(a,r);return i()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:u,updateAttributes:d=>{AL(a,t,d)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Rh(e.name,this.schema)};e.type==="mark"&&((n=ce(G(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=G(e,"onBeforeCreate",r),i=G(e,"onCreate",r),o=G(e,"onUpdate",r),a=G(e,"onSelectionUpdate",r),l=G(e,"onTransaction",r),c=G(e,"onFocus",r),u=G(e,"onBlur",r),d=G(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}};Ad.resolve=bC;Ad.sort=$g;Ad.flatten=Dg;var mL={};jg(mL,{ClipboardTextSerializer:()=>OC,Commands:()=>IC,Delete:()=>jC,Drop:()=>RC,Editable:()=>MC,FocusEvents:()=>DC,Keymap:()=>LC,Paste:()=>$C,Tabindex:()=>BC,TextDirection:()=>zC,focusEventsPluginKey:()=>PC});var Ie=class AC extends zg{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new AC(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},OC=Ie.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ee({key:new Be("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=wC(n);return xC(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),IC=Ie.create({name:"commands",addCommands(){return{...cC}}}),jC=Ie.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const i=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const u=gC(t.before,[t,...e]);SC(u).forEach(f=>{u.mapping.mapResult(f.oldRange.from).deletedAfter&&u.mapping.mapResult(f.oldRange.to).deletedBefore&&u.before.nodesBetween(f.oldRange.from,f.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=f.oldRange.from<=g&&v<=f.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:u.mapping.map(g),newTo:u.mapping.map(v),deletedRange:f.oldRange,newRange:f.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:u})})});const h=u.mapping;u.steps.forEach((f,m)=>{var g,v;if(f instanceof xn){const y=h.slice(m).map(f.from,-1),b=h.slice(m).map(f.to),x=h.invert().map(y,-1),k=h.invert().map(b),w=(g=u.doc.nodeAt(y-1))==null?void 0:g.marks.some(E=>E.eq(f.mark)),S=(v=u.doc.nodeAt(b))==null?void 0:v.marks.some(E=>E.eq(f.mark));this.editor.emit("delete",{type:"mark",mark:f.mark,from:f.from,to:f.to,deletedRange:{from:x,to:k},newRange:{from:y,to:b},partial:!!(S||w),editor:this.editor,transaction:t,combinedTransform:u})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(i,0):i()}}),RC=Ie.create({name:"drop",addProseMirrorPlugins(){return[new Ee({key:new Be("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),MC=Ie.create({name:"editable",addProseMirrorPlugins(){return[new Ee({key:new Be("editable"),props:{editable:()=>this.editor.options.editable}})]}}),PC=new Be("focusEvents"),DC=Ie.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ee({key:PC,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),LC=Ie.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:f}=d,m=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,g=m.parent.type.spec.isolating,v=d.pos-d.parentOffset,y=g&&m.parent.childCount===1?v===d.pos:ne.atStart(c).from===h;return!u||!f.type.isTextblock||f.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Pg()||pC()?i:s},addProseMirrorPlugins(){return[new Ee({key:new Be("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),s=t.some(g=>g.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:a}=e.selection,l=ne.atStart(e.doc).from,c=ne.atEnd(e.doc).to;if(i||!(o===l&&a===c)||!Nd(n.doc))return;const h=n.tr,f=Sd({state:n,transaction:h}),{commands:m}=new Ed({editor:this.editor,state:f});if(m.clearNodes(),!!h.steps.length)return h}})]}}),$C=Ie.create({name:"paste",addProseMirrorPlugins(){return[new Ee({key:new Be("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),BC=Ie.create({name:"tabindex",addProseMirrorPlugins(){return[new Ee({key:new Be("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),zC=Ie.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Wi(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Ee({key:new Be("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),gL=class ii{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ii(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ii(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ii(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=this.pos+r+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!s&&a.depth<=this.depth)return;const l=new ii(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),e.push(new ii(a,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(i[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(l=>n[l]===o.node.attrs[l])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},yL=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function vL(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var bL=class extends iL{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:DD,createMappablePosition:LD},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:i})=>this.options.onDrop(r,s,i)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=hC(e,this.options.autofocus);this.editorState=bi.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=vL(yL,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=yC(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;n=n.filter(o=>!o.key.startsWith(i))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[MC,OC.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),IC,DC,LC,BC,RC,$C,jC,zC.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Ad(r,this)}createCommandManager(){this.commandManager=new Ed({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Rp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Rp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new aC(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return kC(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return RD(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Lg(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return ND(this.state.doc,{blockSeparator:e,textSerializers:{...wC(this.schema),...n}})}get isEmpty(){return Nd(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new gL(e,this)}get $doc(){return this.$pos(0)}};function qi(t){return new Td({find:t.find,handler:({state:e,range:n,match:r})=>{const s=ce(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(Bg(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+l,c);const h=n.from+l+o.length;i.addMark(n.from+l,h,t.type.create(s||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function FC(t){return new Td({find:t.find,handler:({state:e,range:n,match:r})=>{const s=ce(t.getAttributes,void 0,r)||{},{tr:i}=e,o=n.from;let a=n.to;const l=t.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,o+r[0].length-1),i.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;i.insert(c,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()},undoable:t.undoable})}function Pp(t){return new Td({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),i=ce(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)},undoable:t.undoable})}function Gi(t){return new Td({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const i=ce(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&gg(l,t.type,i);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:f}=t.editor.extensionManager,m=h||d.$to.parentOffset&&d.$from.marks();if(m){const g=m.filter(v=>f.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Kr(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)},undoable:t.undoable})}var xL=t=>"touches"in t,wL=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.clientX-this.startX,c=a.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.touches[0];if(!l)return;const c=l.clientX-this.startX,u=l.clientY-this.startY;this.handleResize(c,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(a,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,n,r,s,i,o;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(n=t.options)!=null&&n.max&&(this.maxSize=t.options.max),(r=t==null?void 0:t.options)!=null&&r.directions&&(this.directions=t.options.directions),(s=t.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(o=t.options)!=null&&o.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,n){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const n=e.includes("top"),r=e.includes("bottom"),s=e.includes("left"),i=e.includes("right");n&&(t.style.top="0"),r&&(t.style.bottom="0"),s&&(t.style.left="0"),i&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",n=>this.handleResizeStart(n,t)),e.addEventListener("touchstart",n=>this.handleResizeStart(n,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,xL(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:s}=this.calculateNewDimensions(this.activeHandle,t,e),i=this.applyConstraints(r,s,n);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,e,n){let r=this.startWidth,s=this.startHeight;const i=t.includes("right"),o=t.includes("left"),a=t.includes("bottom"),l=t.includes("top");return i?r=this.startWidth+e:o&&(r=this.startWidth-e),a?s=this.startHeight+n:l&&(s=this.startHeight-n),(t==="right"||t==="left")&&(r=this.startWidth+(i?e:-e)),(t==="top"||t==="bottom")&&(s=this.startHeight+(a?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,s,t):{width:r,height:s}}applyConstraints(t,e,n){var r,s,i,o;if(!n){let c=Math.max(this.minSize.width,t),u=Math.max(this.minSize.height,e);return(r=this.maxSize)!=null&&r.width&&(c=Math.min(this.maxSize.width,c)),(s=this.maxSize)!=null&&s.height&&(u=Math.min(this.maxSize.height,u)),{width:c,height:u}}let a=t,l=e;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(t,e,n){const r=n==="left"||n==="right",s=n==="top"||n==="bottom";return r?{width:t,height:t/this.aspectRatio}:s?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function kL(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof K){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}var SL={};jg(SL,{createAtomBlockMarkdownSpec:()=>EL,createBlockMarkdownSpec:()=>CL,createInlineMarkdownSpec:()=>TL,parseAttributes:()=>Fg,parseIndentedBlocks:()=>Dp,renderNestedMarkdownContent:()=>Vg,serializeAttributes:()=>Ug});function Fg(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const c=s.map(u=>u.trim().slice(1));e.class=c.join(" ")}const i=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,c,u])=>{var d;const h=parseInt(((d=u.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),f=n[h];f&&(e[c]=f.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function Ug(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function EL(t){const{nodeName:e,name:n,parseAttributes:r=Fg,serializeAttributes:s=Ug,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:a}=t,l=n||e,c=u=>{if(!a)return u;const d={};return a.forEach(h=>{h in u&&(d[h]=u[h])}),d};return{parseMarkdown:(u,d)=>{const h={...i,...u.attributes};return d.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(u){var d;const h=new RegExp(`^:::${l}(?:\\s|$)`,"m"),f=(d=u.match(h))==null?void 0:d.index;return f!==void 0?f:-1},tokenize(u,d,h){const f=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=u.match(f);if(!m)return;const g=m[1]||"",v=r(g);if(!o.find(b=>!(b in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:u=>{const d=c(u.attrs||{}),h=s(d),f=h?` {${h}}`:"";return`:::${l}${f} :::`}}}function CL(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=Fg,serializeAttributes:i=Ug,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=n||e,u=d=>{if(!l)return d;const h={};return l.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{let f;if(r){const g=r(d);f=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?f=h.parseChildren(d.tokens||[]):f=h.parseInline(d.tokens||[]);const m={...o,...d.attributes};return h.createNode(e,m,f)},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${c}`,"m"),m=(h=d.match(f))==null?void 0:h.index;return m!==void 0?m:-1},tokenize(d,h,f){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=d.match(g);if(!v)return;const[y,b=""]=v,x=s(b);let k=1;const w=y.length;let S="";const E=/^:::([\w-]*)(\s.*)?/gm,_=d.slice(w);for(E.lastIndex=0;;){const N=E.exec(_);if(N===null)break;const T=N.index,P=N[1];if(!((m=N[2])!=null&&m.endsWith(":::"))){if(P)k+=1;else if(k-=1,k===0){const A=_.slice(0,T);S=A.trim();const W=d.slice(0,w+T+N[0].length);let se=[];if(S)if(a==="block")for(se=f.blockTokens(A),se.forEach(B=>{B.text&&(!B.tokens||B.tokens.length===0)&&(B.tokens=f.inlineTokens(B.text))});se.length>0;){const B=se[se.length-1];if(B.type==="paragraph"&&(!B.text||B.text.trim()===""))se.pop();else break}else se=f.inlineTokens(S);return{type:e,raw:W,attributes:x,content:S,tokens:se}}}}}},renderMarkdown:(d,h)=>{const f=u(d.attrs||{}),m=i(f),g=m?` {${m}}`:"",v=h.renderChildren(d.content||[],`

`);return`:::${c}${g}

${v}

:::`}}}function _L(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,i,o]=r;e[s]=i||o,r=n.exec(t)}return e}function NL(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function TL(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=_L,serializeAttributes:i=NL,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=n||e,u=h=>{if(!l)return h;const f={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,v=typeof m=="string"?void 0:m.skipIfDefault;if(g in h){const y=h[g];if(v!==void 0&&y===v)return;f[g]=y}}),f},d=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,f)=>{const m={...o,...h.attributes};if(a)return f.createNode(e,m);const g=r?r(h):h.content||"";return g?f.createNode(e,m,[f.createTextNode(g)]):f.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(h){const f=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),m=h.match(f),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(h,f,m){const g=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),v=h.match(g);if(!v)return;let y="",b="";if(a){const[,k]=v;b=k}else{const[,k,w]=v;b=k,y=w||""}const x=s(b.trim());return{type:e,raw:v[0],content:y.trim(),attributes:x}}},renderMarkdown:h=>{let f="";r?f=r(h):h.content&&h.content.length>0&&(f=h.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=u(h.attrs||{}),g=i(m),v=g?` ${g}`:"";return a?`[${c}${v}]`:`[${c}${v}]${f}[/${c}]`}}}function Dp(t,e,n){var r,s,i,o;const a=t.split(`
`),l=[];let c="",u=0;const d=e.baseIndentSize||2;for(;u<a.length;){const h=a[u],f=h.match(e.itemPattern);if(!f){if(l.length>0)break;if(h.trim()===""){u+=1,c=`${c}${h}
`;continue}else return}const m=e.extractItemData(f),{indentLevel:g,mainContent:v}=m;c=`${c}${h}
`;const y=[v];for(u+=1;u<a.length;){const w=a[u];if(w.trim()===""){const E=a.slice(u+1).findIndex(T=>T.trim()!=="");if(E===-1)break;if((((s=(r=a[u+1+E].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>g){y.push(w),c=`${c}${w}
`,u+=1;continue}else break}if((((o=(i=w.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>g)y.push(w),c=`${c}${w}
`,u+=1;else break}let b;const x=y.slice(1);if(x.length>0){const w=x.map(S=>S.slice(g+d)).join(`
`);w.trim()&&(e.customNestedParser?b=e.customNestedParser(w):b=n.blockTokens(w))}const k=e.createToken(m,b);l.push(k)}if(l.length!==0)return{items:l,raw:c}}function Vg(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[i,...o]=t.content,a=e.renderChildren([i]),l=[`${s}${a}`];return o&&o.length>0&&o.forEach(c=>{const u=e.renderChildren([c]);if(u){const d=u.split(`
`).map(h=>h?e.indent(h):"").join(`
`);l.push(d)}}),l.join(`
`)}function AL(t,e,n={}){const{state:r}=e,{doc:s,tr:i}=r,o=t;s.descendants((a,l)=>{const c=i.mapping.map(l),u=i.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(f=>{if(f!==o)return!1;d=f}),!d)return;let h=!1;if(Object.keys(n).forEach(f=>{n[f]!==d.attrs[f]&&(h=!0)}),h){const f=t.type.create({...t.attrs,...n});i.removeMark(c,u,t.type),i.addMark(c,u,f)}}),i.docChanged&&e.view.dispatch(i)}var Pt=class UC extends zg{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new UC(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function $s(t){return new uL({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=ce(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(Bg(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>d).length)return null;h<n.to&&o.delete(h,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}var OL=Object.getOwnPropertyNames,IL=Object.getOwnPropertySymbols,jL=Object.prototype.hasOwnProperty;function db(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function Pl(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var i=s.cache,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);var l=t(n,r,s);return i.delete(n),i.delete(r),l}}function RL(t){return t!=null?t[Symbol.toStringTag]:void 0}function hb(t){return OL(t).concat(IL(t))}var ML=Object.hasOwn||function(t,e){return jL.call(t,e)};function Hs(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var PL="__v",DL="__o",LL="_owner",fb=Object.getOwnPropertyDescriptor,pb=Object.keys;function $L(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function BL(t,e){return Hs(t.getTime(),e.getTime())}function zL(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function FL(t,e){return t===e}function mb(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.entries(),o,a,l=0;(o=i.next())&&!o.done;){for(var c=e.entries(),u=!1,d=0;(a=c.next())&&!a.done;){if(s[d]){d++;continue}var h=o.value,f=a.value;if(n.equals(h[0],f[0],l,d,t,e,n)&&n.equals(h[1],f[1],h[0],f[0],t,e,n)){u=s[d]=!0;break}d++}if(!u)return!1;l++}return!0}var UL=Hs;function VL(t,e,n){var r=pb(t),s=r.length;if(pb(e).length!==s)return!1;for(;s-- >0;)if(!VC(t,e,n,r[s]))return!1;return!0}function bo(t,e,n){var r=hb(t),s=r.length;if(hb(e).length!==s)return!1;for(var i,o,a;s-- >0;)if(i=r[s],!VC(t,e,n,i)||(o=fb(t,i),a=fb(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function HL(t,e){return Hs(t.valueOf(),e.valueOf())}function WL(t,e){return t.source===e.source&&t.flags===e.flags}function gb(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.values(),o,a;(o=i.next())&&!o.done;){for(var l=e.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!s[u]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function qL(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function GL(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function VC(t,e,n,r){return(r===LL||r===DL||r===PL)&&(t.$$typeof||e.$$typeof)?!0:ML(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var KL="[object Arguments]",JL="[object Boolean]",YL="[object Date]",QL="[object Error]",XL="[object Map]",ZL="[object Number]",e3="[object Object]",t3="[object RegExp]",n3="[object Set]",r3="[object String]",s3="[object URL]",i3=Array.isArray,yb=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,vb=Object.assign,o3=Object.prototype.toString.call.bind(Object.prototype.toString);function a3(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,i=t.areMapsEqual,o=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,u=t.areSetsEqual,d=t.areTypedArraysEqual,h=t.areUrlsEqual,f=t.unknownTagComparators;return function(g,v,y){if(g===v)return!0;if(g==null||v==null)return!1;var b=typeof g;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?o(g,v,y):b==="function"?s(g,v,y):!1;var x=g.constructor;if(x!==v.constructor)return!1;if(x===Object)return a(g,v,y);if(i3(g))return e(g,v,y);if(yb!=null&&yb(g))return d(g,v,y);if(x===Date)return n(g,v,y);if(x===RegExp)return c(g,v,y);if(x===Map)return i(g,v,y);if(x===Set)return u(g,v,y);var k=o3(g);if(k===YL)return n(g,v,y);if(k===t3)return c(g,v,y);if(k===XL)return i(g,v,y);if(k===n3)return u(g,v,y);if(k===e3)return typeof g.then!="function"&&typeof v.then!="function"&&a(g,v,y);if(k===s3)return h(g,v,y);if(k===QL)return r(g,v,y);if(k===KL)return a(g,v,y);if(k===JL||k===ZL||k===r3)return l(g,v,y);if(f){var w=f[k];if(!w){var S=RL(g);S&&(w=f[S])}if(w)return w(g,v,y)}return!1}}function l3(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?bo:$L,areDatesEqual:BL,areErrorsEqual:zL,areFunctionsEqual:FL,areMapsEqual:r?db(mb,bo):mb,areNumbersEqual:UL,areObjectsEqual:r?bo:VL,arePrimitiveWrappersEqual:HL,areRegExpsEqual:WL,areSetsEqual:r?db(gb,bo):gb,areTypedArraysEqual:r?bo:qL,areUrlsEqual:GL,unknownTagComparators:void 0};if(n&&(s=vb({},s,n(s))),e){var i=Pl(s.areArraysEqual),o=Pl(s.areMapsEqual),a=Pl(s.areObjectsEqual),l=Pl(s.areSetsEqual);s=vb({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return s}function c3(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function u3(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,i=t.strict;if(r)return function(l,c){var u=r(),d=u.cache,h=d===void 0?e?new WeakMap:void 0:d,f=u.meta;return n(l,c,{cache:h,equals:s,meta:f,strict:i})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(l,c){return n(l,c,o)}}var d3=Qr();Qr({strict:!0});Qr({circular:!0});Qr({circular:!0,strict:!0});Qr({createInternalComparator:function(){return Hs}});Qr({strict:!0,createInternalComparator:function(){return Hs}});Qr({circular:!0,createInternalComparator:function(){return Hs}});Qr({circular:!0,createInternalComparator:function(){return Hs},strict:!0});function Qr(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,i=t.strict,o=i===void 0?!1:i,a=l3(t),l=a3(a),c=r?r(l):c3(l);return u3({circular:n,comparator:l,createState:s,equals:c,strict:o})}var HC={exports:{}},WC={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od=C,h3=fg;function f3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var p3=typeof Object.is=="function"?Object.is:f3,m3=h3.useSyncExternalStore,g3=Od.useRef,y3=Od.useEffect,v3=Od.useMemo,b3=Od.useDebugValue;WC.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=g3(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=v3(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var m=o.value;if(s(m,f))return d=m}return d=f}if(m=d,p3(u,f))return m;var g=r(f);return s!==void 0&&s(m,g)?(u=f,m):(u=f,d=g)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,s]);var a=m3(t,i[0],i[1]);return y3(function(){o.hasValue=!0,o.value=a},[a]),b3(a),a};HC.exports=WC;var x3=HC.exports,w3=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},k3=({contentComponent:t})=>{const e=fg.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return p.jsx(p.Fragment,{children:Object.values(e)})};function S3(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:P1.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var E3=class extends ae.Component{constructor(t){var e;super(t),this.editorContentRef=ae.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=S3(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return p.jsxs(p.Fragment,{children:[p.jsx("div",{ref:w3(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&p.jsx(k3,{contentComponent:t.contentComponent})]})}},C3=C.forwardRef((t,e)=>{const n=ae.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ae.createElement(E3,{key:n,innerRef:e,...t})}),_3=ae.memo(C3),N3=typeof window<"u"?C.useLayoutEffect:C.useEffect,T3=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function A3(t){var e;const[n]=C.useState(()=>new T3(t.editor)),r=x3.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:d3);return N3(()=>n.watch(t.editor),[t.editor,n]),C.useDebugValue(r),r}var O3=!1,Lp=typeof window>"u",I3=Lp||!!(typeof window<"u"&&window.next),j3=class qC{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Lp||I3?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...r)},onDelete:(...r)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...r)}};return new bL(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=n.extensions)==null?void 0:o[i])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?qC.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function R3(t={},e=[]){const n=C.useRef(t);n.current=t;const[r]=C.useState(()=>new j3(n)),s=fg.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return C.useDebugValue(s),C.useEffect(r.onRender(e)),A3({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),s}var M3=C.createContext({editor:null});M3.Consumer;var P3=C.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),D3=()=>C.useContext(P3);ae.forwardRef((t,e)=>{const{onDragStart:n}=D3(),r=t.as||"div";return p.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});ae.createContext({markViewContentRef:()=>{}});var ou=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},L3=/^\s*>\s$/,$3=Pt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return ou("blockquote",{...Oe(this.options.HTMLAttributes,t),children:ou("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(s=>{const a=e.renderChildren([s]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Gi({find:L3,type:this.type})]}}),B3=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,z3=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,F3=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,U3=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,V3=Yr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return ou("strong",{...Oe(this.options.HTMLAttributes,t),children:ou("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[qi({find:B3,type:this.type}),qi({find:F3,type:this.type})]},addPasteRules(){return[$s({find:z3,type:this.type}),$s({find:U3,type:this.type})]}}),H3=/(^|[^`])`([^`]+)`(?!`)$/,W3=/(^|[^`])`([^`]+)`(?!`)/g,q3=Yr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Oe(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[qi({find:H3,type:this.type})]},addPasteRules(){return[$s({find:W3,type:this.type})]}}),Dh=4,G3=/^```([a-z]+)?[\s\n]$/,K3=/^~~~([a-z]+)?[\s\n]$/,J3=Pt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Dh,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Oe(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Dh,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:u}=s,f=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,u,r.schema.text(f)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Dh,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=i,u=i.start(),d=i.end(),f=r.doc.textBetween(u,d,`
`,`
`).split(`
`);let m=0,g=0;const v=c-u;for(let S=0;S<f.length;S+=1){if(g+f[S].length>=v){m=S;break}g+=f[S].length+1}const b=((l=f[m].match(/^ */))==null?void 0:l[0])||"",x=Math.min(b.length,n);if(x===0)return!0;let k=u;for(let S=0;S<m;S+=1)k+=f[S].length+1;return a.delete(k,k+x),c-k<=x&&a.setSelection(X.create(a.doc,k)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=s,h=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(f=>{var m;const g=((m=f.match(/^ */))==null?void 0:m[0])||"",v=Math.min(g.length,n);return f.slice(v)}).join(`
`);return a.replaceWith(l,c,r.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(ne.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[Pp({find:G3,type:this.type,getAttributes:t=>({language:t[1]})}),Pp({find:K3,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Ee({key:new Be("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(X.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Y3=Pt.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Q3=Pt.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Oe(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),X3=Pt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Oe(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Pp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),Z3=Pt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Oe(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!kL(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return EC(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(X.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(K.create(o.doc,l.pos)):o.setSelection(X.create(o.doc,l.pos));else{const u=i.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=u==null?void 0:u.create();d&&(o.insert(c,d),o.setSelection(X.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[FC({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),e4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,t4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,n4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,r4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,s4=Yr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Oe(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[qi({find:e4,type:this.type}),qi({find:n4,type:this.type})]},addPasteRules(){return[$s({find:t4,type:this.type}),$s({find:r4,type:this.type})]}});const i4="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",o4="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",$p="numeric",Bp="ascii",zp="alpha",Ko="asciinumeric",Mo="alphanumeric",Fp="domain",GC="emoji",a4="scheme",l4="slashscheme",Lh="whitespace";function c4(t,e){return t in e||(e[t]=[]),e[t]}function bs(t,e,n){e[$p]&&(e[Ko]=!0,e[Mo]=!0),e[Bp]&&(e[Ko]=!0,e[zp]=!0),e[Ko]&&(e[Mo]=!0),e[zp]&&(e[Mo]=!0),e[Mo]&&(e[Fp]=!0),e[GC]&&(e[Fp]=!0);for(const r in e){const s=c4(r,n);s.indexOf(t)<0&&s.push(t)}}function u4(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Nt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Nt.groups={};Nt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||Nt.groups;let s;return e&&e.j?s=e:(s=new Nt(e),n&&r&&bs(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||Nt.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,a=s.go(t);if(a?(o=new Nt,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Nt,i){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(u4(o.t,r),n);bs(i,l,r)}else n&&bs(i,n,r);o.t=i}return s.j[t]=o,o}};const te=(t,e,n,r,s)=>t.ta(e,n,r,s),_e=(t,e,n,r,s)=>t.tr(e,n,r,s),bb=(t,e,n,r,s)=>t.ts(e,n,r,s),R=(t,e,n,r,s)=>t.tt(e,n,r,s),Vn="WORD",Up="UWORD",KC="ASCIINUMERICAL",JC="ALPHANUMERICAL",Oa="LOCALHOST",Vp="TLD",Hp="UTLD",cc="SCHEME",oi="SLASH_SCHEME",Hg="NUM",Wp="WS",Wg="NL",Jo="OPENBRACE",Yo="CLOSEBRACE",au="OPENBRACKET",lu="CLOSEBRACKET",cu="OPENPAREN",uu="CLOSEPAREN",du="OPENANGLEBRACKET",hu="CLOSEANGLEBRACKET",fu="FULLWIDTHLEFTPAREN",pu="FULLWIDTHRIGHTPAREN",mu="LEFTCORNERBRACKET",gu="RIGHTCORNERBRACKET",yu="LEFTWHITECORNERBRACKET",vu="RIGHTWHITECORNERBRACKET",bu="FULLWIDTHLESSTHAN",xu="FULLWIDTHGREATERTHAN",wu="AMPERSAND",ku="APOSTROPHE",Su="ASTERISK",hr="AT",Eu="BACKSLASH",Cu="BACKTICK",_u="CARET",br="COLON",qg="COMMA",Nu="DOLLAR",An="DOT",Tu="EQUALS",Gg="EXCLAMATION",Qt="HYPHEN",Qo="PERCENT",Au="PIPE",Ou="PLUS",Iu="POUND",Xo="QUERY",Kg="QUOTE",YC="FULLWIDTHMIDDLEDOT",Jg="SEMI",On="SLASH",Zo="TILDE",ju="UNDERSCORE",QC="EMOJI",Ru="SYM";var XC=Object.freeze({__proto__:null,ALPHANUMERICAL:JC,AMPERSAND:wu,APOSTROPHE:ku,ASCIINUMERICAL:KC,ASTERISK:Su,AT:hr,BACKSLASH:Eu,BACKTICK:Cu,CARET:_u,CLOSEANGLEBRACKET:hu,CLOSEBRACE:Yo,CLOSEBRACKET:lu,CLOSEPAREN:uu,COLON:br,COMMA:qg,DOLLAR:Nu,DOT:An,EMOJI:QC,EQUALS:Tu,EXCLAMATION:Gg,FULLWIDTHGREATERTHAN:xu,FULLWIDTHLEFTPAREN:fu,FULLWIDTHLESSTHAN:bu,FULLWIDTHMIDDLEDOT:YC,FULLWIDTHRIGHTPAREN:pu,HYPHEN:Qt,LEFTCORNERBRACKET:mu,LEFTWHITECORNERBRACKET:yu,LOCALHOST:Oa,NL:Wg,NUM:Hg,OPENANGLEBRACKET:du,OPENBRACE:Jo,OPENBRACKET:au,OPENPAREN:cu,PERCENT:Qo,PIPE:Au,PLUS:Ou,POUND:Iu,QUERY:Xo,QUOTE:Kg,RIGHTCORNERBRACKET:gu,RIGHTWHITECORNERBRACKET:vu,SCHEME:cc,SEMI:Jg,SLASH:On,SLASH_SCHEME:oi,SYM:Ru,TILDE:Zo,TLD:Vp,UNDERSCORE:ju,UTLD:Hp,UWORD:Up,WORD:Vn,WS:Wp});const Fn=/[a-z]/,xo=new RegExp("\\p{L}","u"),$h=new RegExp("\\p{Emoji}","u"),Un=/\d/,Bh=/\s/,xb="\r",zh=`
`,d4="",h4="",Fh="";let Dl=null,Ll=null;function f4(t=[]){const e={};Nt.groups=e;const n=new Nt;Dl==null&&(Dl=wb(i4)),Ll==null&&(Ll=wb(o4)),R(n,"'",ku),R(n,"{",Jo),R(n,"}",Yo),R(n,"[",au),R(n,"]",lu),R(n,"(",cu),R(n,")",uu),R(n,"<",du),R(n,">",hu),R(n,"",fu),R(n,"",pu),R(n,"",mu),R(n,"",gu),R(n,"",yu),R(n,"",vu),R(n,"",bu),R(n,"",xu),R(n,"&",wu),R(n,"*",Su),R(n,"@",hr),R(n,"`",Cu),R(n,"^",_u),R(n,":",br),R(n,",",qg),R(n,"$",Nu),R(n,".",An),R(n,"=",Tu),R(n,"!",Gg),R(n,"-",Qt),R(n,"%",Qo),R(n,"|",Au),R(n,"+",Ou),R(n,"#",Iu),R(n,"?",Xo),R(n,'"',Kg),R(n,"/",On),R(n,";",Jg),R(n,"~",Zo),R(n,"_",ju),R(n,"\\",Eu),R(n,"",YC);const r=_e(n,Un,Hg,{[$p]:!0});_e(r,Un,r);const s=_e(r,Fn,KC,{[Ko]:!0}),i=_e(r,xo,JC,{[Mo]:!0}),o=_e(n,Fn,Vn,{[Bp]:!0});_e(o,Un,s),_e(o,Fn,o),_e(s,Un,s),_e(s,Fn,s);const a=_e(n,xo,Up,{[zp]:!0});_e(a,Fn),_e(a,Un,i),_e(a,xo,a),_e(i,Un,i),_e(i,Fn),_e(i,xo,i);const l=R(n,zh,Wg,{[Lh]:!0}),c=R(n,xb,Wp,{[Lh]:!0}),u=_e(n,Bh,Wp,{[Lh]:!0});R(n,Fh,u),R(c,zh,l),R(c,Fh,u),_e(c,Bh,u),R(u,xb),R(u,zh),_e(u,Bh,u),R(u,Fh,u);const d=_e(n,$h,QC,{[GC]:!0});R(d,"#"),_e(d,$h,d),R(d,d4,d);const h=R(d,h4);R(h,"#"),_e(h,$h,d);const f=[[Fn,o],[Un,s]],m=[[Fn,null],[xo,a],[Un,i]];for(let g=0;g<Dl.length;g++)ar(n,Dl[g],Vp,Vn,f);for(let g=0;g<Ll.length;g++)ar(n,Ll[g],Hp,Up,m);bs(Vp,{tld:!0,ascii:!0},e),bs(Hp,{utld:!0,alpha:!0},e),ar(n,"file",cc,Vn,f),ar(n,"mailto",cc,Vn,f),ar(n,"http",oi,Vn,f),ar(n,"https",oi,Vn,f),ar(n,"ftp",oi,Vn,f),ar(n,"ftps",oi,Vn,f),bs(cc,{scheme:!0,ascii:!0},e),bs(oi,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],b=t[g][1]?{[a4]:!0}:{[l4]:!0};v.indexOf("-")>=0?b[Fp]=!0:Fn.test(v)?Un.test(v)?b[Ko]=!0:b[Bp]=!0:b[$p]=!0,bb(n,v,v,b)}return bb(n,"localhost",Oa,{ascii:!0}),n.jd=new Nt(Ru),{start:n,tokens:Object.assign({groups:e},XC)}}function ZC(t,e){const n=p4(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let a=t,l=null,c=0,u=null,d=-1,h=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,h=0,u=a):d>=0&&(d+=n[o].length,h++),c+=n[o].length,i+=n[o].length,o++;i-=d,o-=h,c-=d,s.push({t:u.t,v:e.slice(i-c,i),s:i-c,e:i})}return s}function p4(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function ar(t,e,n,r,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new Nt(r),i.jr=s.slice(),t.j[l]=i),t=i}return i=new Nt(n),i.jr=s.slice(),t.j[e[o-1]]=i,i}function wb(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(t[r]),r++}return e}const Ia={defaultProtocol:"http",events:null,format:kb,formatHref:kb,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Yg(t,e=null){let n=Object.assign({},Ia);t&&(n=Object.assign(n,t instanceof Yg?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}Yg.prototype={o:Ia,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Ia[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function kb(t){return t}function e_(t,e){this.t="token",this.v=t,this.tk=e}e_.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Ia.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Object.assign(o,u),{tagName:s,attributes:o,content:i,eventListeners:d}}};function Id(t,e){class n extends e_{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Sb=Id("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Eb=Id("text"),m4=Id("nl"),$l=Id("url",{isLink:!0,toHref(t=Ia.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Oa&&t[1].t===br}}),Jt=t=>new Nt(t);function g4({groups:t}){const e=t.domain.concat([wu,Su,hr,Eu,Cu,_u,Nu,Tu,Qt,Hg,Qo,Au,Ou,Iu,On,Ru,Zo,ju]),n=[ku,br,qg,An,Gg,Qo,Xo,Kg,Jg,du,hu,Jo,Yo,lu,au,cu,uu,fu,pu,mu,gu,yu,vu,bu,xu],r=[wu,ku,Su,Eu,Cu,_u,Nu,Tu,Qt,Jo,Yo,Qo,Au,Ou,Iu,Xo,On,Ru,Zo,ju],s=Jt(),i=R(s,Zo);te(i,r,i),te(i,t.domain,i);const o=Jt(),a=Jt(),l=Jt();te(s,t.domain,o),te(s,t.scheme,a),te(s,t.slashscheme,l),te(o,r,i),te(o,t.domain,o);const c=R(o,hr);R(i,hr,c),R(a,hr,c),R(l,hr,c);const u=R(i,An);te(u,r,i),te(u,t.domain,i);const d=Jt();te(c,t.domain,d),te(d,t.domain,d);const h=R(d,An);te(h,t.domain,d);const f=Jt(Sb);te(h,t.tld,f),te(h,t.utld,f),R(c,Oa,f);const m=R(d,Qt);R(m,Qt,m),te(m,t.domain,d),te(f,t.domain,d),R(f,An,h),R(f,Qt,m);const g=R(f,br);te(g,t.numeric,Sb);const v=R(o,Qt),y=R(o,An);R(v,Qt,v),te(v,t.domain,o),te(y,r,i),te(y,t.domain,o);const b=Jt($l);te(y,t.tld,b),te(y,t.utld,b),te(b,t.domain,o),te(b,r,i),R(b,An,y),R(b,Qt,v),R(b,hr,c);const x=R(b,br),k=Jt($l);te(x,t.numeric,k);const w=Jt($l),S=Jt();te(w,e,w),te(w,n,S),te(S,e,w),te(S,n,S),R(b,On,w),R(k,On,w);const E=R(a,br),_=R(l,br),N=R(_,On),T=R(N,On);te(a,t.domain,o),R(a,An,y),R(a,Qt,v),te(l,t.domain,o),R(l,An,y),R(l,Qt,v),te(E,t.domain,w),R(E,On,w),R(E,Xo,w),te(T,t.domain,w),te(T,e,w),R(T,On,w);const P=[[Jo,Yo],[au,lu],[cu,uu],[du,hu],[fu,pu],[mu,gu],[yu,vu],[bu,xu]];for(let A=0;A<P.length;A++){const[W,se]=P[A],B=R(w,W);R(S,W,B),R(B,se,w);const Y=Jt($l);te(B,e,Y);const Z=Jt();te(B,n),te(Y,e,Y),te(Y,n,Z),te(Z,e,Y),te(Z,n,Z),R(Y,se,w),R(Z,se,w)}return R(s,Oa,b),R(s,Wg,m4),{start:s,tokens:XC}}function y4(t,e,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let a=t,l=null,c=null,u=0,d=null,h=-1;for(;s<r&&!(l=a.go(n[s].t));)o.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(h=0,d=a):h>=0&&h++,s++,u++;if(h<0)s-=u,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(Uh(Eb,e,o)),o=[]),s-=h,u-=h;const f=d.t,m=n.slice(s-u,s);i.push(Uh(f,e,m))}}return o.length>0&&i.push(Uh(Eb,e,o)),i}function Uh(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const v4=typeof console<"u"&&console&&console.warn||(()=>{}),b4="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ge={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function x4(){return Nt.groups={},ge.scanner=null,ge.parser=null,ge.tokenQueue=[],ge.pluginQueue=[],ge.customSchemes=[],ge.initialized=!1,ge}function Cb(t,e=!1){if(ge.initialized&&v4(`linkifyjs: already initialized - will not register custom scheme "${t}" ${b4}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ge.customSchemes.push([t,e])}function w4(){ge.scanner=f4(ge.customSchemes);for(let t=0;t<ge.tokenQueue.length;t++)ge.tokenQueue[t][1]({scanner:ge.scanner});ge.parser=g4(ge.scanner.tokens);for(let t=0;t<ge.pluginQueue.length;t++)ge.pluginQueue[t][1]({scanner:ge.scanner,parser:ge.parser});return ge.initialized=!0,ge}function Qg(t){return ge.initialized||w4(),y4(ge.parser.start,t,ZC(ge.scanner.start,t))}Qg.scan=ZC;function t_(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Yg(n),s=Qg(t),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}var Xg="[\0- -\u2029]",k4=new RegExp(Xg),S4=new RegExp(`${Xg}$`),E4=new RegExp(Xg,"g");function C4(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function _4(t){return new Ee({key:new Be("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,a=gC(n.doc,[...e]);if(SC(a).forEach(({newRange:c})=>{const u=wD(r.doc,c,f=>f.isTextblock);let d,h;if(u.length>1)d=u[0],h=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(u.length){const f=r.doc.textBetween(c.from,c.to," "," ");if(!S4.test(f))return;d=u[0],h=r.doc.textBetween(d.pos,c.to,void 0," ")}if(d&&h){const f=h.split(k4).filter(Boolean);if(f.length<=0)return!1;const m=f[f.length-1],g=d.pos+h.lastIndexOf(m);if(!m)return!1;const v=Qg(m).map(y=>y.toObject(t.defaultProtocol));if(!C4(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{Bg(y.from,y.to,r.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function N4(t){return new Ee({key:new Be("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let d=r.target;const h=[];for(;d.nodeName!=="DIV";)h.push(d),d=d.parentNode;a=h.find(f=>f.nodeName==="A")}if(!a)return o;const l=kC(e.state,t.type.name),c=(s=a==null?void 0:a.href)!=null?s:l.href,u=(i=a==null?void 0:a.target)!=null?i:l.target;a&&c&&(window.open(c,u),o=!0)}return o}}})}function T4(t){return new Ee({key:new Be("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=t_(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||s!==void 0&&!s(c.href)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function es(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(E4,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var A4=Yr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Cb(t);return}Cb(t.scheme,t.optionalSlashes)})},onDestroy(){x4()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!es(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!es(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!es(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Oe(this.options.HTMLAttributes,t),0]:["a",Oe(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!es(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!es(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[$s({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=t_(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!es(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(_4({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!es(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(N4({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(T4({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),O4=Object.defineProperty,I4=(t,e)=>{for(var n in e)O4(t,n,{get:e[n],enumerable:!0})},j4="listItem",_b="textStyle",Nb=/^\s*([-+*])\s$/,n_=Pt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Oe(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(j4,this.editor.getAttributes(_b)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Gi({find:Nb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Gi({find:Nb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(_b),editor:this.editor})),[t]}}),r_=Pt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Oe(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Vg(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),R4={};I4(R4,{findListItemPos:()=>Ya,getNextListDepth:()=>Zg,handleBackspace:()=>qp,handleDelete:()=>Gp,hasListBefore:()=>s_,hasListItemAfter:()=>M4,hasListItemBefore:()=>i_,listItemHasSubList:()=>o_,nextListIsDeeper:()=>a_,nextListIsHigher:()=>l_});var Ya=(t,e)=>{const{$from:n}=e.selection,r=De(t,e.schema);let s=null,i=n.depth,o=n.pos,a=null;for(;i>0&&a===null;)s=n.node(i),s.type===r?a=i:(i-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},Zg=(t,e)=>{const n=Ya(t,e);if(!n)return!1;const[,r]=ID(e,t,n.$pos.pos+4);return r},s_=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),i=t.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},i_=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},o_=(t,e,n)=>{if(!n)return!1;const r=De(t,e.schema);let s=!1;return n.descendants(i=>{i.type===r&&(s=!0)}),s},qp=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Ur(t.state,e)&&s_(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((h,f)=>{h.type.name===e&&c.push({node:h,pos:f})});const u=c.at(-1);if(!u)return!1;const d=t.state.doc.resolve(l.start()+u.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Ur(t.state,e)||!PD(t.state))return!1;const r=Ya(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=o_(e,t.state,i);return i_(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},a_=(t,e)=>{const n=Zg(t,e),r=Ya(t,e);return!r||!n?!1:n>r.depth},l_=(t,e)=>{const n=Zg(t,e),r=Ya(t,e);return!r||!n?!1:n<r.depth},Gp=(t,e)=>{if(!Ur(t.state,e)||!MD(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:a_(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():l_(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},M4=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},c_=Ie.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Gp(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Gp(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&qp(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&qp(t,n,r)&&(e=!0)}),e}}}}),Tb=/^(\s*)(\d+)\.\s+(.*)$/,P4=/^\s/;function D4(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],i=s.match(Tb);if(!i)break;const[,o,a,l]=i,c=o.length;let u=l,d=n+1;const h=[s];for(;d<t.length;){const f=t[d];if(f.match(Tb))break;if(f.trim()==="")h.push(f),u+=`
`,d+=1;else if(f.match(P4))h.push(f),u+=`
${f.slice(c+2)}`,d+=1;else break}e.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:h.join(`
`)}),r=d,n=d}return[e,r]}function u_(t,e,n){var r;const s=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const f=n.blockTokens(u);c.push(...f)}let d=i+1;const h=[];for(;d<t.length&&t[d].indent>e;)h.push(t[d]),d+=1;if(h.length>0){const f=Math.min(...h.map(g=>g.indent)),m=u_(h,f,n);c.push({type:"list",ordered:!0,start:h[0].number,items:m,raw:h.map(g=>g.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:c}),i=d}else i+=1}return s}function L4(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=e.parseChildren([s]);r.push({type:"paragraph",content:i})}else{const i=e.parseChildren([s]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var $4="listItem",Ab="textStyle",Ob=/^(\d+)\.\s$/,d_=Pt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Oe(this.options.HTMLAttributes,n),0]:["ol",Oe(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?L4(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[i,o]=D4(s);if(i.length===0)return;const a=u_(i,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:a,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($4,this.editor.getAttributes(Ab)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Gi({find:Ob,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Gi({find:Ob,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Ab)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),B4=/^\s*(\[([( |x])?\])\s$/,z4=Pt.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Oe(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Vg(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=u=>{var d,h;a.ariaLabel=((h=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:h.call(d,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return c(t),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:d}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const f=n();if(typeof f!="number")return!1;const m=h.doc.nodeAt(f);return h.setNodeMarkup(f,void 0,{...m==null?void 0:m.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,d)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,d])=>{s.setAttribute(u,d)}),s.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,i.append(a,o),s.append(i,l),Object.entries(e).forEach(([u,d])=>{s.setAttribute(u,d)}),{dom:s,contentDOM:l,update:u=>u.type!==this.type?!1:(s.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(u),!0)}}},addInputRules(){return[Gi({find:B4,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),F4=Pt.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Oe(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=i=>{const o=Dp(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(i)},s=Dp(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ie.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(n_.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(r_.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(c_.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(d_.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(z4.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(F4.configure(this.options.taskList)),t}});var U4=Pt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Oe(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),V4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,H4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,W4=Yr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Oe(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[qi({find:V4,type:this.type})]},addPasteRules(){return[$s({find:H4,type:this.type})]}}),q4=Pt.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),G4=Yr.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Oe(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function K4(t={}){return new Ee({view(e){return new J4(e,t)}})}class J4{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(n){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let f=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(f){let m=f.getBoundingClientRect(),g=d?m.bottom:m.top;d&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;r={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,f=d.height/l.offsetHeight;c=d.left-l.scrollLeft*h,u=d.top-l.scrollTop*f}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=aE(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Te extends ne{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Te.valid(r)?new Te(r):ne.near(r)}content(){return F.empty}eq(e){return e instanceof Te&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Te(e.resolve(n.pos))}getBookmark(){return new ey(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Y4(e)||!Q4(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Te.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let l=e.doc.resolve(s);if(Te.valid(l))return l}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!K.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let a=e.doc.resolve(s);if(Te.valid(a))return a}return null}}}Te.prototype.visible=!1;Te.findFrom=Te.findGapCursorFrom;ne.jsonID("gapcursor",Te);class ey{constructor(e){this.pos=e}map(e){return new ey(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Te.valid(n)?new Te(n):ne.near(n)}}function h_(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Y4(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||h_(s.type))return!0;if(s.inlineContent)return!1}}return!0}function Q4(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||h_(s.type))return!0;if(s.inlineContent)return!1}}return!0}function X4(){return new Ee({props:{decorations:n$,createSelectionBetween(t,e,n){return e.pos==n.pos&&Te.valid(n)?new Te(n):null},handleClick:e$,handleKeyDown:Z4,handleDOMEvents:{beforeinput:t$}}})}const Z4=lC({ArrowLeft:Bl("horiz",-1),ArrowRight:Bl("horiz",1),ArrowUp:Bl("vert",-1),ArrowDown:Bl("vert",1)});function Bl(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof X){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Te.findGapCursorFrom(a,e,l);return c?(s&&s(r.tr.setSelection(new Te(c))),!0):!1}}function e$(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Te.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&K.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Te(r))),!0)}function t$(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Te))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=I.empty;for(let o=r.length-1;o>=0;o--)s=I.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new F(s,0,0));return i.setSelection(X.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function n$(t){if(!(t.selection instanceof Te))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",we.create(t.doc,[vt.widget(t.selection.head,e,{key:"gapcursor"})])}var Mu=200,We=function(){};We.prototype.append=function(e){return e.length?(e=We.from(e),!this.length&&e||e.length<Mu&&this.leafAppend(e)||this.length<Mu&&e.leafPrepend(this)||this.appendInner(e)):this};We.prototype.prepend=function(e){return e.length?We.from(e).append(this):this};We.prototype.appendInner=function(e){return new r$(this,e)};We.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?We.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};We.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};We.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};We.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};We.from=function(e){return e instanceof We?e:e&&e.length?new f_(e):We.empty};var f_=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Mu)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Mu)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(We);We.empty=new f_([]);var r$=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(We);const s$=500;class bn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){s||(s=this.remapping(r,h+1),i=s.maps.length),i--,u.push(d);return}if(s){u.push(new In(d.map));let f=d.step.map(s.slice(i)),m;f&&o.maybeStep(f).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new In(m,void 0,void 0,c.length+u.length))),i--,m&&s.appendMap(m,i)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(i)):d.selection,l=new bn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new In(e.mapping.maps[u],d,n),f;(f=l&&l.merge(h))&&(h=f,u?i.pop():a=a.slice(0,a.length-1)),i.push(h),n&&(o++,n=void 0),s||(l=h)}let c=o-r.depth;return c>o$&&(a=i$(a,c),o-=c),new bn(a.append(i),o)}remapping(e,n){let r=new Ea;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new bn(this.items.append(e.map(n=>new In(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},s);let l=n;this.items.forEach(h=>{let f=i.getMirror(--l);if(f==null)return;o=Math.min(o,f);let m=i.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),v=h.selection&&h.selection.map(i.slice(l+1,f));v&&a++,r.push(new In(m,g,v))}else r.push(new In(m))},s);let c=[];for(let h=n;h<o;h++)c.push(new In(i.maps[h]));let u=this.items.slice(0,s).append(c).append(r),d=new bn(u,a);return d.emptyItemCount()>s$&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&i++;let d=new In(c.invert(),l,u),h,f=s.length-1;(h=s.length&&s[f].merge(d))?s[f]=h:s.push(d)}}else o.map&&r--},this.items.length,0),new bn(We.from(s.reverse()),i)}}bn.empty=new bn(We.empty,0);function i$(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class In{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new In(n.getMap().invert(),n,this.selection)}}}class fr{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const o$=20;function a$(t,e,n,r){let s=n.getMeta(Ns),i;if(s)return s.historyState;n.getMeta(u$)&&(t=new fr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Ns))return o.getMeta(Ns).redo?new fr(t.done.addTransform(n,void 0,r,uc(e)),t.undone,Ib(n.mapping.maps),t.prevTime,t.prevComposition):new fr(t.done,t.undone.addTransform(n,void 0,r,uc(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!l$(n,t.prevRanges)),c=o?Vh(t.prevRanges,n.mapping):Ib(n.mapping.maps);return new fr(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,uc(e)),bn.empty,c,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new fr(t.done.rebased(n,i),t.undone.rebased(n,i),Vh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new fr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Vh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function l$(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function Ib(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function Vh(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function c$(t,e,n){let r=uc(e),s=Ns.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),l=new fr(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(Ns,{redo:n,historyState:l})}let Hh=!1,jb=null;function uc(t){let e=t.plugins;if(jb!=e){Hh=!1,jb=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Hh=!0;break}}return Hh}const Ns=new Be("history"),u$=new Be("closeHistory");function d$(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ee({key:Ns,state:{init(){return new fr(bn.empty,bn.empty,null,0,-1)},apply(e,n,r){return a$(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?m_:r=="historyRedo"?g_:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function p_(t,e){return(n,r)=>{let s=Ns.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=c$(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const m_=p_(!1,!0),g_=p_(!0,!0);Ie.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Ee({key:new Be("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-r,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}});var h$=Ie.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[K4(this.options)]}});Ie.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ee({key:new Be("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,i=[];if(!n||!r)return we.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(s>=c&&s<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(s>=c&&s<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(vt.node(c,c+l.nodeSize,{class:this.options.className}))}),we.create(t,i)}}})]}});var f$=Ie.create({name:"gapCursor",addProseMirrorPlugins(){return[X4()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ce(G(t,"allowGapCursor",n)))!=null?e:null}}}),p$=Ie.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ee({key:new Be("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const i=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,c=!o.isLeaf&&Nd(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];i&&u.push(this.options.emptyEditorClass);const d=vt.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});s.push(d)}return this.options.includeChildren}),we.create(t,s)}}})]}});Ie.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Ee({key:new Be("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||EC(n.selection)||t.view.dragging?null:we.create(n.doc,[vt.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function Rb({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var m$=Ie.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Be(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new Ee({key:e,appendTransaction:(s,i,o)=>{const{doc:a,tr:l,schema:c}=o,u=e.getState(o),d=a.content.size,h=c.nodes[n];if(u)return l.insert(d,h.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!Rb({node:o,types:r})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!Rb({node:o,types:r})}}})]}}),g$=Ie.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>m_(t,e),redo:()=>({state:t,dispatch:e})=>g_(t,e)}},addProseMirrorPlugins(){return[d$(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),y$=Ie.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(V3.configure(this.options.bold)),this.options.blockquote!==!1&&s.push($3.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(n_.configure(this.options.bulletList)),this.options.code!==!1&&s.push(q3.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(J3.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(Y3.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(h$.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(f$.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(Q3.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(X3.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(g$.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(Z3.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(s4.configure(this.options.italic)),this.options.listItem!==!1&&s.push(r_.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(c_.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(A4.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(d_.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(U4.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(W4.configure(this.options.strike)),this.options.text!==!1&&s.push(q4.configure(this.options.text)),this.options.underline!==!1&&s.push(G4.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(m$.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),v$=y$,b$=p$,x$=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,w$=Pt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Oe(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,s,i,o;const a=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",l=(s=(r=t.attrs)==null?void 0:r.alt)!=null?s:"",c=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"";return c?`![${l}](${a} "${c}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:i,HTMLAttributes:o,editor:a})=>{const l=document.createElement("img");Object.entries(o).forEach(([d,h])=>{if(h!=null)switch(d){case"width":case"height":break;default:l.setAttribute(d,h);break}}),l.src=o.src;const c=new wL({element:l,editor:a,node:s,getPos:i,onResize:(d,h)=>{l.style.width=`${d}px`,l.style.height=`${h}px`},onCommit:(d,h)=>{const f=i();f!==void 0&&this.editor.chain().setNodeSelection(f).updateAttributes(this.name,{width:d,height:h}).run()},onUpdate:(d,h,f)=>d.type===s.type,options:{directions:t,min:{width:e,height:n},preserveAspectRatio:r===!0}}),u=c.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",l.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},c}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[FC({find:x$,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),k$=w$;const S$=Yr.create({name:"customUnderline",parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1}]},renderHTML(){return["u",{},0]},addCommands(){return{toggleCustomUnderline:()=>({commands:t})=>t.toggleMark(this.name)}}});function E$({user:t,groups:e,selectedGroupId:n,onGroupChange:r,onSubmit:s}){const[i,o]=C.useState([]),a=n??(t.role==="team"&&t.primaryGroup)??"all",l=a!=="all"?e.find(w=>w.id===a):null,c=Mt(l),u=l?c.chipClass:"bg-stone-200 text-stone-700",d=a==="all"?"Alle":l?l.name:"Alle",[h,f]=C.useState(0),m=R3({extensions:[v$.configure({heading:{levels:[2]},link:{autolink:!0,openOnClick:!0}}),S$,k$.configure({inline:!0}),b$.configure({placeholder:"Kurze Info fr Eltern oder Team..."})],content:"",onUpdate(){f(w=>w+1)},onSelectionUpdate(){f(w=>w+1)}}),g=w=>{if(!m)return;const S=m.chain().focus();switch(w){case"bold":S.toggleBold().run();break;case"italic":S.toggleItalic().run();break;case"underline":S.toggleCustomUnderline().run();break;case"bulletList":S.toggleBulletList().run();break;case"orderedList":S.toggleOrderedList().run();break;case"heading":m.isActive("heading",{level:2})?S.setParagraph().run():S.setHeading({level:2}).run();break;case"hr":S.setHorizontalRule().run();break;default:return}f(E=>E+1)},v=(w,S={})=>m?m.isActive(w,S):!1,y=w=>{var _;const S=(_=w.target.files)==null?void 0:_[0];if(!S||!m)return;const E=new FileReader;E.onload=()=>{m.chain().focus().setImage({src:E.result}).run()},E.readAsDataURL(S),w.target.value=""},b=w=>{const S=Array.from(w.target.files||[]);if(!S.length)return;const E=S.map(_=>({name:_.name,size:_.size,type:_.type,file:_}));o(_=>[..._,...E]),w.target.value=""},x=w=>{o(S=>S.filter((E,_)=>_!==w))},k=()=>{if(!m)return;const w=m.getHTML();if(!m.getText().trim())return;const E={id:crypto.randomUUID(),text:w,date:new Date().toISOString(),groupId:a==="all"?null:a,target:a==="all"?"all":"group",attachments:i,createdBy:t.username};s(E),m.commands.setContent(""),o([])};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"p-5 rounded-3xl border shadow-sm text-stone-800 transition-colors duration-300",style:{backgroundColor:c.headerColor},children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`${u} p-2 rounded-2xl shadow transition-colors duration-300`,children:p.jsx(c.Icon,{size:18})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-bold",children:"News"}),p.jsx("p",{className:"text-xs opacity-80",children:"Neue Mitteilung an Eltern senden"})]})]}),p.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[p.jsx("button",{onClick:()=>r("all"),className:`px-3 py-1.5 rounded-full text-xs font-semibold border transition-all ${a==="all"?"bg-stone-800 text-white border-transparent":"bg-white/50 text-stone-600 border-stone-300 hover:bg-white"}`,children:"Alle"}),e.filter(w=>w.id!=="event").map(w=>{const S=Mt(w),E=a===w.id;return p.jsxs("button",{onClick:()=>r(w.id),className:`px-3 py-1.5 rounded-full text-xs font-semibold border flex items-center gap-1 transition-all ${E?`${S.chipClass} border-transparent shadow-sm`:"bg-white/50 text-stone-600 border-stone-300 hover:bg-white"}`,children:[E&&p.jsx(S.Icon,{size:12}),w.name]},w.id)})]})]}),p.jsxs("div",{className:"rounded-2xl border border-stone-300 bg-white overflow-hidden shadow-sm",children:[m&&p.jsxs("div",{className:"flex items-center gap-1 px-3 py-2 border-b bg-stone-50",children:[p.jsx("button",{onClick:()=>g("bold"),className:`p-1.5 rounded-md hover:bg-stone-200 ${v("bold")?"bg-stone-300":""}`,children:p.jsx(oA,{size:16})}),p.jsx("button",{onClick:()=>g("italic"),className:`p-1.5 rounded-md hover:bg-stone-200 ${v("italic")?"bg-stone-300":""}`,children:p.jsx(gA,{size:16})}),p.jsx("button",{onClick:()=>g("underline"),className:`p-1.5 rounded-md hover:bg-stone-200 ${v("customUnderline")?"bg-stone-300":""}`,children:p.jsx(RA,{size:16})}),p.jsx("span",{className:"w-px h-5 bg-stone-300 mx-1"}),p.jsx("button",{onClick:()=>g("bulletList"),className:`p-1.5 rounded-md hover:bg-stone-200 ${v("bulletList")?"bg-stone-300":""}`,children:p.jsx(bA,{size:16})}),p.jsx("button",{onClick:()=>g("orderedList"),className:`p-1.5 rounded-md hover:bg-stone-200 ${v("orderedList")?"bg-stone-300":""}`,children:p.jsx(vA,{size:16})}),p.jsx("button",{onClick:()=>g("heading"),className:`p-1.5 rounded-md hover:bg-stone-200 ${v("heading",{level:2})?"bg-stone-300":""}`,children:p.jsx(jA,{size:16})}),p.jsxs("label",{className:"p-1.5 rounded-md hover:bg-stone-200 cursor-pointer",children:[p.jsx(mA,{size:16}),p.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:y})]}),p.jsx("button",{onClick:()=>g("hr"),className:"p-1.5 rounded-md hover:bg-stone-200",children:p.jsx(SA,{size:16})}),p.jsx("div",{className:"flex-1"}),p.jsxs("label",{className:"p-1.5 rounded-md hover:bg-stone-200 cursor-pointer",children:[p.jsx(EA,{size:16}),p.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:b})]})]}),p.jsx(_3,{editor:m,className:"ProseMirror min-h-[140px] px-3 py-2 focus:outline-none text-sm"})]}),i.length>0&&p.jsx("div",{className:"space-y-1 text-xs",children:i.map((w,S)=>p.jsxs("div",{className:"flex items-center justify-between bg-stone-50 border border-stone-200 rounded-xl p-2",children:[p.jsx("span",{className:"truncate",children:w.name}),p.jsx("button",{onClick:()=>x(S),className:"p-1 text-red-500 hover:text-red-700",children:p.jsx(_n,{size:14})})]},S))}),p.jsxs("button",{onClick:k,className:"w-full py-3 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 active:scale-95 flex items-center justify-center gap-2 text-sm shadow-md transition-transform",children:[p.jsx(CA,{size:18}),`Mitteilung an ${d} senden`]})]})}function C$({user:t,news:e,groups:n,onDelete:r}){const s=Array.isArray(e)?e:[],i=Array.isArray(n)?n:[],o=l=>l?new Date(l).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",a=l=>{if(!l)return null;const c=l.trim();return c.startsWith("<")?p.jsx("div",{className:"prose prose-sm max-w-none text-stone-800",dangerouslySetInnerHTML:{__html:c}}):p.jsx("p",{className:"text-sm text-stone-800 leading-snug whitespace-pre-wrap",children:c})};return s.length?p.jsx("div",{className:"space-y-4",children:s.map(l=>{const c=l.groupId?i.find(d=>d.id===l.groupId):null,u=Mt(c);return p.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-amber-200 shadow-sm space-y-3",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("div",{className:"bg-stone-100 text-stone-700 rounded-full p-2",children:p.jsx(kA,{size:16})}),p.jsxs("div",{className:"flex flex-col items-end gap-1",children:[c?p.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-semibold ${u.chipClass}`,children:[p.jsx(u.Icon,{size:10}),p.jsx("span",{children:u.name})]}):p.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-semibold bg-stone-100 text-stone-700",children:"Alle"}),p.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-stone-500",children:[p.jsx(lA,{size:12}),o(l.date)]})]})]}),a(l.text),l.attachments&&l.attachments.length>0&&p.jsx("div",{className:"space-y-1",children:l.attachments.map((d,h)=>{const f=d.url||d.data||"#";return p.jsxs("a",{href:f,download:d.name,className:"text-xs text-blue-600 underline",children:[" ",d.name]},h)})}),r&&p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{type:"button",onClick:()=>r(l.id),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100",title:"Ausblenden",children:p.jsx(_n,{size:14})})})]},l.id)})}):p.jsx("p",{className:"text-xs text-stone-500 text-center py-6",children:"Keine Mitteilungen vorhanden."})}const Mb="news-attachments";function _$({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,o]=C.useState([]),[a,l]=C.useState(()=>t.role==="team"&&t.primaryGroup?t.primaryGroup:"all"),[c,u]=C.useState(!0);C.useEffect(()=>{let b=!1;async function x(){try{const k=await md();!b&&Array.isArray(k)&&o(k)}catch(k){console.error("Gruppen laden fehlgeschlagen:",k)}}return x(),()=>{b=!0}},[]);const d=async()=>{u(!0);try{const{data:b,error:x}=await L.from("news").select("*").order("date",{ascending:!1});if(x)console.error("Fehler beim Laden der News:",x),n([]);else{const S=(b||[]).map(E=>({id:E.id,text:E.text,date:E.date,groupId:E.group_id||null,target:E.target||(E.group_id?"group":"all"),attachments:Array.isArray(E.attachments)?E.attachments:[],createdBy:E.created_by}));n(S)}const{data:k,error:w}=await L.from("news_hidden").select("news_id").eq("username",t.username);w?(console.error("Fehler beim Laden der versteckten News:",w),s([])):s((k||[]).map(S=>S.news_id))}catch(b){console.error("Unerwarteter Fehler beim Laden der News:",b),n([]),s([])}finally{u(!1)}};C.useEffect(()=>{d()},[t.username]);const h=async(b,x)=>{if(!x||!x.length)return[];const k=[];for(const w of x){if(!w.file)continue;const S=`${t.username}/${b}/${w.name}`,{error:E}=await L.storage.from(Mb).upload(S,w.file,{upsert:!0});if(E){console.error("Fehler beim Upload eines Anhangs:",E);continue}const{data:_}=L.storage.from(Mb).getPublicUrl(S),N=_==null?void 0:_.publicUrl;N&&k.push({name:w.name,size:w.size,type:w.type,url:N})}return k},f=async b=>{try{const x=b.id||crypto.randomUUID(),k=await h(x,b.attachments||[]),w={id:x,text:b.text,date:b.date,group_id:b.groupId||null,target:b.target||(b.groupId?"group":"all"),attachments:k,created_by:b.createdBy||t.username,facility_id:null},{data:S,error:E}=await L.from("news").insert(w).select("*").single();if(E){console.error("Fehler beim Speichern der News:",E);return}const _={id:S.id,text:S.text,date:S.date,groupId:S.group_id||null,target:S.target||(S.group_id?"group":"all"),attachments:Array.isArray(S.attachments)?S.attachments:[],createdBy:S.created_by};n(N=>[_,...N])}catch(x){console.error("Unerwarteter Fehler beim Anlegen der News:",x)}},m=b=>l(b||"all"),g=async b=>{try{const x={id:crypto.randomUUID(),news_id:b,username:t.username},{error:k}=await L.from("news_hidden").insert(x);k&&console.error("Fehler beim Verstecken der News:",k)}catch(x){console.error("Unerwarteter Fehler beim Verstecken der News:",x)}s(x=>x.includes(b)?x:[...x,b])},v=C.useMemo(()=>{if(!e.length)return[];if(t.role==="parent"){const b=Array.from(new Set((t.children||[]).map(x=>x.group).filter(Boolean)));return e.filter(x=>x.groupId?b.length?b.includes(x.groupId):!1:!0)}return e},[e,t]),y=C.useMemo(()=>{const b=v.filter(x=>!r.includes(x.id));return t.role==="parent"||a==="all"?b:b.filter(x=>x.groupId===a)},[v,r,a,t.role]);return p.jsxs("div",{className:"space-y-6",children:[t.role==="parent"&&p.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-stone-200 shadow-sm",children:[p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"News"}),p.jsx("p",{className:"text-xs text-stone-500 mt-1",children:"Wichtige Infos aus dem Kinderhaus. Du kannst einzelne Mitteilungen ausblenden, sie bleiben dann fr dich verborgen."})]}),(t.role==="team"||t.role==="admin")&&p.jsx(E$,{user:t,groups:i,selectedGroupId:a,onGroupChange:m,onSubmit:f}),p.jsx(C$,{user:t,news:y,groups:i,onDelete:g}),c&&p.jsx("p",{className:"text-xs text-stone-400 text-center",children:"News werden geladen"})]})}async function Pb(t){const{data:e,error:n}=await L.from("group_lists").select("*").eq("group_id",t).order("created_at",{ascending:!1});if(n)throw console.error("Fehler beim Laden der Listen:",n),n;return e||[]}function N$({isAdmin:t,activeGroup:e,setActiveGroup:n,children:r,visibleGroupIds:s,groups:i}){if(t){const o=Array.isArray(i)?i.filter(a=>s==null?void 0:s.includes(a.id)):[];return p.jsx("div",{className:"mt-2 flex gap-2 overflow-x-auto pb-1",children:o.map(a=>{const l=a.id===e,c=Mt(a),u=c.chipClass||"bg-stone-300",d=c.Icon||ba;return p.jsxs("button",{onClick:()=>n(a.id),className:`flex items-center gap-2 px-3 py-2 rounded-2xl border text-xs font-bold whitespace-nowrap transition ${l?`${u} border-transparent shadow-sm`:"bg-stone-50 text-stone-600 border-stone-300 hover:bg-stone-100"}`,children:[p.jsx(d,{size:14}),p.jsx("span",{children:c.name||"Unbenannt"})]},a.id)})})}return!t&&(r==null?void 0:r.length)>1?p.jsx("div",{className:"mt-2 flex gap-2 overflow-x-auto pb-1",children:r.map(o=>{const a=Rs(i,o.group),l=Mt(a),c=l.chipClass||"bg-stone-300",u=l.Icon||ba,d=o.name||"Kind",h=o.group===e;return p.jsxs("button",{onClick:()=>n(o.group),className:`flex items-center gap-2 px-3 py-2 rounded-2xl border text-xs font-bold whitespace-nowrap transition ${h?`${c} border-transparent shadow-sm`:"bg-stone-50 text-stone-600 border-stone-300 hover:bg-stone-100"}`,children:[p.jsx(u,{size:14}),p.jsx("span",{children:d})]},o.id)})}):null}function T$({list:t,user:e,group:n,isAdmin:r,reload:s}){var h;const[i,o]=C.useState(""),a=(f,m)=>m||f,l=async f=>{const{error:m}=await L.from("group_lists").update({items:f}).eq("id",t.id);if(m){console.error("Fehler beim Aktualisieren der Items:",m),alert("Fehler beim Speichern.");return}s()},c=async f=>{var b;if(r)return;const m=[...t.items],g={...m[f]},v=e.username,y=Array.isArray(e.children)&&e.children.length>0?(b=e.children[0])==null?void 0:b.name:null;g.assignedTo===v?(g.assignedTo=null,g.assignedName=null):(g.assignedTo=v,g.assignedName=y),m[f]=g,await l(m)},u=async()=>{if(r||!i.trim())return;const f=[...t.items];f.push({label:i.trim(),assignedTo:e.username,createdBy:e.username}),o(""),await l(f)},d=async f=>{if(t.items[f].createdBy!==e.username)return;const g=[...t.items];g.splice(f,1),await l(g)};return p.jsxs("div",{className:"space-y-2",children:[((h=t.items)==null?void 0:h.length)>0?t.items.map((f,m)=>{const g=f.assignedTo,v=g===e.username,y=g?v?"Du":a(g,f.assignedName):r?"":"bernehmen";return p.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded-xl border text-sm transition ${g?v?"bg-amber-100 border-amber-200 text-amber-900":"bg-stone-50 border-stone-200 text-stone-600":"bg-stone-50 border-stone-200 text-stone-700"}`,children:[p.jsx("span",{className:"flex-1",children:f.label}),p.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-stone-500",children:[g&&p.jsx("span",{children:y}),!r&&(!g||g===e.username)&&p.jsx("button",{onClick:()=>c(m),className:"px-2 py-0.5 bg-white border border-stone-200 rounded-lg hover:bg-stone-100 text-[10px] font-bold",children:g===e.username?"Abgeben":"bernehmen"}),!r&&f.createdBy===e.username&&p.jsx("button",{onClick:()=>d(m),className:"p-1 bg-red-50 text-red-500 rounded hover:bg-red-100",children:p.jsx(_n,{size:12})})]})]},m)}):p.jsx("p",{className:"text-xs text-stone-400 py-1",children:"Noch keine Eintrge."}),!r&&p.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[p.jsx("input",{className:"flex-1 p-2 bg-stone-50 border border-stone-200 rounded-lg text-sm",placeholder:"Eintrag hinzufgen",value:i,onChange:f=>o(f.target.value)}),p.jsx("button",{onClick:u,className:"p-2 bg-amber-500 text-white rounded-xl hover:bg-amber-600",children:p.jsx(Us,{size:16})})]})]})}function A$({list:t,user:e,isAdmin:n,reload:r}){const s=Array.isArray(t.items)?t.items:[],i=async a=>{const{error:l}=await L.from("group_lists").update({items:a}).eq("id",t.id);if(l){console.error("Fehler beim Speichern der Poll-Daten:",l),alert("Fehler beim Speichern.");return}r()},o=async a=>{if(n)return;const l=e.username,c=s.map((u,d)=>{const h=Array.isArray(u.votes)?[...u.votes]:[],f=h.filter(m=>m!==l);return d===a&&(h.includes(l)||f.push(l)),{...u,votes:f}});await i(c)};return s.length===0?p.jsx("p",{className:"text-xs text-stone-400",children:"Noch keine Abstimmungsoptionen."}):p.jsx("div",{className:`grid gap-2 ${s.length<=2?"grid-cols-1":(s.length===3,"grid-cols-2")}`,children:s.map((a,l)=>{const c=Array.isArray(a.votes)?a.votes:[],u=c.includes(e.username),d=c.length===0?"Keine Stimmen":c.length===1?"1 Stimme":`${c.length} Stimmen`,h="w-full flex flex-col items-center justify-center px-4 py-4 rounded-2xl border text-sm font-bold transition text-center";return n?p.jsxs("div",{className:`${h} bg-stone-50 border-stone-200 text-stone-700`,children:[p.jsx("span",{children:a.label}),p.jsx("span",{className:"text-[10px] text-stone-500 mt-1",children:d})]},l):p.jsxs("button",{onClick:()=>o(l),className:u?`${h} bg-amber-500 border-amber-600 text-white`:`${h} bg-stone-50 border-stone-200 text-stone-700 hover:bg-amber-100`,children:[p.jsx("span",{children:a.label}),p.jsx("span",{className:"text-[10px] text-stone-700 mt-1",children:d})]},l)})})}const Db={bring:{label:"Mitbringliste",icon:p.jsx(dA,{size:16})},duty:{label:"Dienste",icon:p.jsx(yA,{size:16})},poll:{label:"Abstimmung",icon:p.jsx(sA,{size:16})}};function O$({list:t,isAdmin:e,user:n,group:r,reload:s}){const i=Db[t.type]||Db.bring,o=async()=>{if(!confirm("Liste wirklich lschen?"))return;const{error:a}=await L.from("group_lists").delete().eq("id",t.id);if(a){console.error("Fehler beim Lschen der Liste:",a),alert("Fehler beim Lschen der Liste.");return}s()};return p.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-stone-100 space-y-3",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"bg-stone-100 text-stone-700 rounded-full p-2",children:i.icon}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-stone-800 text-sm",children:t.title}),p.jsx("p",{className:"text-[10px] text-stone-500 uppercase tracking-wide",children:i.label})]})]}),e&&p.jsx("button",{onClick:o,className:"p-2 bg-red-50 text-red-500 rounded-lg hover:bg-red-100",children:p.jsx(_n,{size:16})})]}),t.type==="poll"?p.jsx(A$,{list:t,user:n,group:r,isAdmin:e,reload:s}):p.jsx(T$,{list:t,user:n,group:r,isAdmin:e,reload:s})]})}function I$({activeGroup:t,reload:e}){const[n,r]=C.useState(!1),[s,i]=C.useState(""),[o,a]=C.useState("bring"),[l,c]=C.useState(""),u=async()=>{if(!s.trim()||!t)return;const d=l.split(`
`).map(m=>m.trim()).filter(Boolean).map(m=>o==="poll"?{label:m,votes:[]}:{label:m,assignedTo:null}),h={id:crypto.randomUUID(),title:s.trim(),type:o,group_id:t,items:d,created_at:new Date().toISOString()},{error:f}=await L.from("group_lists").insert(h);if(f){console.error("Fehler beim Speichern der Liste:",f);return}r(!1),i(""),c(""),a("bring"),e()};return p.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-stone-100 space-y-3",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("h3",{className:"text-sm font-bold text-stone-800",children:"Neue Liste anlegen"}),p.jsx("button",{onClick:()=>r(d=>!d),className:"p-2 bg-stone-100 text-stone-600 rounded-full hover:bg-amber-100",children:p.jsx(Us,{size:16})})]}),n&&p.jsxs("div",{className:"space-y-3",children:[p.jsx("input",{className:"w-full p-2 bg-stone-50 border border-stone-200 rounded-lg text-sm",placeholder:"Titel der Liste",value:s,onChange:d=>i(d.target.value)}),p.jsxs("select",{className:"w-full p-2 bg-stone-50 border border-stone-200 rounded-lg text-sm",value:o,onChange:d=>a(d.target.value),children:[p.jsx("option",{value:"bring",children:"Mitbringliste"}),p.jsx("option",{value:"duty",children:"Dienste"}),p.jsx("option",{value:"poll",children:"Abstimmung"})]}),p.jsx("textarea",{className:"w-full p-2 bg-stone-50 border border-stone-200 rounded-lg text-sm min-h-[80px]",placeholder:o==="poll"?"Antwortoptionen, je Zeile eine":"Eintrge, je Zeile einer",value:l,onChange:d=>c(d.target.value)}),p.jsx("button",{onClick:u,className:"w-full bg-amber-500 text-white py-2 rounded-xl font-bold hover:bg-amber-600 transition",children:"Liste anlegen"})]})]})}function j$({user:t}){const e=(t==null?void 0:t.role)||"parent",n=e==="team"||e==="admin",r=n,s=Array.isArray(t.children)?t.children:[],[i,o]=C.useState([]);C.useEffect(()=>{let x=!1;async function k(){try{const w=await md();!x&&Array.isArray(w)&&o(w)}catch(w){console.error("Gruppen laden fehlgeschlagen:",w)}}return k(),()=>{x=!0}},[]);const[a,l]=C.useState(!1);C.useEffect(()=>{async function x(){const k=i.find(w=>w.is_event_group);if(!k){l(!1);return}try{const w=await Pb(k.id);l(Array.isArray(w)&&w.length>0)}catch{l(!1)}}i.length&&x()},[i]);const[c,u]=C.useState(null);C.useEffect(()=>{var x,k,w;if(!(!i.length||c)){if(n){const S=(t==null?void 0:t.primaryGroup)||((x=i[0])==null?void 0:x.id)||((k=i[0])==null?void 0:k.name)||null;S&&u(S);return}if(!n&&s.length>0){const S=s[0],E=i.find(N=>{var T,P;return N.id===S.group||((T=N.name)==null?void 0:T.toLowerCase())===((P=S.group)==null?void 0:P.toLowerCase())}),_=(E==null?void 0:E.id)||S.group;_&&u(_);return}(w=i[0])!=null&&w.id&&u(i[0].id)}},[i,n,s,t==null?void 0:t.primaryGroup,c]);const[d,h]=C.useState([]),f=async()=>{if(c)try{const x=await Pb(c);h(x||[])}catch{h([])}};C.useEffect(()=>{f()},[c]);const m=C.useMemo(()=>{if(n)return s;let x=s.map(k=>{const w=i.find(S=>{var E,_;return S.id===k.group||((E=S.name)==null?void 0:E.toLowerCase())===((_=k.group)==null?void 0:_.toLowerCase())});return{...k,group:(w==null?void 0:w.id)||k.group}});if(a){const k=i.find(w=>w.is_event_group);k&&(x=[{id:"__event__",name:"Event",group:k.id},...x])}return x},[s,i,a,n]),g=n?i.map(x=>x.id):[...new Set(m.map(x=>x.group))],v=!n&&m.length>1,y=C.useMemo(()=>{let x=i.find(w=>w.id===c)||i.find(w=>w.name===c)||i.find(w=>{var S;return(S=w.name)==null?void 0:S.toLowerCase().includes(c==null?void 0:c.toLowerCase())});if(x)return x;const k=m.find(w=>w.group===c||w.name===c);if(k){const w=Rs(i,k.group);if(w)return w;const S=i.find(E=>E.name===k.group);if(S)return S}return{id:"fallback-cloud",name:"Wolke",color:"bg-cyan-500",icon:"cloud"}},[i,c,m]),b=C.useMemo(()=>Mt(y),[y]);return p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{className:"p-6 rounded-3xl shadow-sm border border-stone-100 flex flex-col gap-3",style:{backgroundColor:b.headerColor},children:[p.jsx("div",{className:"flex justify-between items-center",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`${b.chipClass} p-2 rounded-2xl text-white shadow`,children:p.jsx(b.Icon,{size:20})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-stone-800",children:"Gruppenbereich"}),p.jsx("p",{className:"text-xs text-stone-600",children:v?"bersicht zu allen Listen":`Gruppe ${b.name}`})]})]})}),p.jsx(N$,{isAdmin:r,activeGroup:c,setActiveGroup:u,children:m,visibleGroupIds:g,groups:i})]}),p.jsx("div",{className:"space-y-3",children:d.length===0?p.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 text-center text-stone-500 text-sm",children:"Fr diese Gruppe sind noch keine Listen angelegt."}):d.map(x=>p.jsx(O$,{list:x,user:t,group:b,isAdmin:r,reload:f},x.id))}),n&&p.jsx(I$,{activeGroup:c,reload:f})]})}function R$({size:t=28}){return p.jsx("div",{style:{fontSize:t},children:""})}function M$({size:t=28}){return p.jsx("div",{style:{fontSize:t},children:""})}function P$({size:t=28}){return p.jsx("div",{style:{fontSize:t},children:""})}function Wh({isAdmin:t,editMode:e,dayKey:n,mealKey:r,value:s,allergyNote:i,onChangeValue:o,onChangeAllergy:a,onOpenLov:l}){let c=R$,u="FRHSTCK";r==="lunch"?(c=M$,u="MITTAGESSEN"):r==="snack"&&(c=P$,u="VESPER");const d=r==="lunch"&&e&&t,h=r==="lunch"&&!e&&i;return p.jsxs("div",{className:"flex items-start gap-3 py-3 border-b border-stone-100 last:border-b-0",children:[p.jsx("div",{className:"pt-1",children:p.jsx(c,{size:28})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-[10px] font-bold text-stone-500 tracking-[0.14em]",children:u}),t&&e?p.jsxs(p.Fragment,{children:[p.jsx("input",{value:s,onChange:f=>o(n,r,f.target.value),className:"mt-1 w-full p-2 rounded-xl bg-[#f9f7f2] border border-stone-200 text-sm",placeholder:r==="lunch"?"Gericht eintragen":"Eintrag schreiben"}),d&&p.jsx("input",{value:i||"",onChange:f=>a(n,f.target.value),placeholder:"Allergiehinweis (optional)",className:"mt-1 w-full p-2 rounded-xl bg-[#f9f7f2] border border-stone-200 text-xs"})]}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"mt-1 text-sm text-stone-800",children:s||p.jsx("span",{className:"text-stone-400",children:""})}),h&&p.jsx("p",{className:"mt-0.5 text-xs text-stone-500",children:i})]})]}),t&&e&&p.jsx("button",{type:"button",onClick:()=>l(r),className:"mt-2 w-10 h-9 flex items-center justify-center rounded-xl bg-[#f4f3ef] text-stone-500 hover:bg-stone-200",children:p.jsx(TA,{size:16})})]})}function D$({dayKey:t,dayLabel:e,dayData:n,isAdmin:r,editMode:s,onChangeValue:i,onChangeAllergy:o,onOpenLov:a}){return p.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-[#f2eee4] overflow-hidden mb-4",children:[p.jsxs("div",{className:"flex items-center gap-3 px-5 py-3",children:[p.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-2xl\r
                        bg-gradient-to-br from-[#f8e39c] to-[#f4c665]\r
                        text-[11px] font-bold text-[#7a5b1b]`,children:e}),p.jsx("div",{children:p.jsx("p",{className:"text-[10px] font-bold text-stone-400 tracking-[0.14em]",children:"TAGESMEN"})})]}),p.jsxs("div",{className:"px-5 pb-4",children:[p.jsx(Wh,{isAdmin:r,editMode:s,dayKey:t,mealKey:"breakfast",value:n.breakfast,allergyNote:null,onChangeValue:i,onChangeAllergy:o,onOpenLov:a}),p.jsx(Wh,{isAdmin:r,editMode:s,dayKey:t,mealKey:"lunch",value:n.lunch,allergyNote:n.allergyNote,onChangeValue:i,onChangeAllergy:o,onOpenLov:a}),p.jsx(Wh,{isAdmin:r,editMode:s,dayKey:t,mealKey:"snack",value:n.snack,allergyNote:null,onChangeValue:i,onChangeAllergy:o,onOpenLov:a})]})]})}function L$({open:t,onClose:e,mealLabel:n,options:r=[],onSelect:s,onAddOption:i,onDeleteOption:o,onReorderOption:a}){const[l,c]=C.useState(""),[u,d]=C.useState(null),[h,f]=C.useState(null);if(C.useEffect(()=>{t||(c(""),d(null),f(null))},[t]),!t)return null;const m=g=>{u===null||u===g||(a(u,g),d(null),f(null))};return p.jsx("div",{className:"fixed inset-0 z-50 bg-black/30 backdrop-blur-sm flex items-center justify-center",children:p.jsxs("div",{className:"w-full max-w-sm bg-white rounded-3xl shadow-xl overflow-hidden",children:[p.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-stone-200",children:[p.jsxs("h3",{className:"text-sm font-bold text-stone-800",children:["Auswahl (",n,")"]}),p.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-stone-100 text-stone-500",children:p.jsx(ng,{size:16})})]}),p.jsxs("div",{className:"px-5 py-4 max-h-64 overflow-y-auto space-y-2",children:[r.length===0&&p.jsx("p",{className:"text-xs text-stone-400",children:"Noch keine Vorschlge vorhanden."}),r.map((g,v)=>p.jsxs("div",{className:`flex items-center justify-between rounded-2xl px-3 py-2 cursor-pointer group
                bg-stone-50 hover:bg-amber-50
                ${h===v?"ring-1 ring-amber-300":""}`,draggable:!0,onDragStart:()=>d(v),onDragOver:y=>{y.preventDefault(),v!==u&&f(v)},onDragLeave:()=>f(null),onDrop:y=>{y.preventDefault(),m(v)},onClick:()=>s(g),children:[p.jsx("span",{className:"text-stone-700 text-sm",children:g}),p.jsx("button",{onClick:y=>{y.stopPropagation(),o(g)},className:"p-1 rounded-full text-stone-300 group-hover:text-red-500",children:p.jsx(_n,{size:16})})]},g))]}),p.jsxs("div",{className:"px-5 py-4 border-t border-stone-200 flex items-center gap-2",children:[p.jsx("input",{value:l,onChange:g=>c(g.target.value),placeholder:"Neuen Eintrag hinzufgen",className:"flex-1 p-2 rounded-2xl border border-stone-300 bg-stone-50 text-sm"}),p.jsx("button",{onClick:()=>{l.trim()&&(i(l.trim()),c(""))},className:"w-9 h-9 rounded-2xl bg-stone-900 text-white flex items-center justify-center hover:bg-stone-800",children:p.jsx(Us,{size:16})})]})]})})}const zl=[{key:"monday",label:"Mo"},{key:"tuesday",label:"Di"},{key:"wednesday",label:"Mi"},{key:"thursday",label:"Do"},{key:"friday",label:"Fr"}],qh={breakfast:"",lunch:"",allergyNote:"",snack:""};function $$(){const t=new Date,e=t.getDay(),n=e===0?-6:1-e,r=new Date(t);r.setDate(t.getDate()+n);const s=new Date(r);s.setDate(r.getDate()+4);const i=o=>`${o.getDate().toString().padStart(2,"0")}.${(o.getMonth()+1).toString().padStart(2,"0")}.`;return`${i(r)}  ${i(s)}`}function B$(){const t=new Date,e=t.getFullYear(),n=new Date(e,0,1),r=Math.floor((t-n)/(24*60*60*1e3)),s=Math.ceil((r+n.getDay()+1)/7);return`${e}-W${s.toString().padStart(2,"0")}`}function z$({isAdmin:t}){const[e,n]=C.useState({}),[r,s]=C.useState({breakfast:[],lunch:[],snack:[]}),[i,o]=C.useState(!0),[a,l]=C.useState(!1),[c,u]=C.useState(!1),[d,h]=C.useState("idle"),[f,m]=C.useState(!1),[g,v]=C.useState(null),[y,b]=C.useState(null),x=B$(),k=C.useCallback(async()=>{try{const{data:B,error:Y}=await L.from("meal_plans").select("*").eq("facility_id",de).eq("week_key",x);if(Y)throw Y;const Z={};zl.forEach(({key:j})=>{const O=B==null?void 0:B.find(z=>z.day_key===j);Z[j]={breakfast:(O==null?void 0:O.breakfast)||"",lunch:(O==null?void 0:O.lunch)||"",snack:(O==null?void 0:O.snack)||"",allergyNote:(O==null?void 0:O.allergy_note)||""}}),n(Z)}catch(B){console.error("Speiseplan laden fehlgeschlagen:",B);const Y={};zl.forEach(({key:Z})=>{Y[Z]={...qh}}),n(Y)}},[x]),w=C.useCallback(async()=>{try{const{data:B,error:Y}=await L.from("meal_options").select("*").eq("facility_id",de).order("position");if(Y)throw Y;const Z={breakfast:[],lunch:[],snack:[]};(B||[]).forEach(j=>{Z[j.meal_type]&&Z[j.meal_type].push(j.name)}),s(Z)}catch(B){console.error("Mahlzeit-Optionen laden fehlgeschlagen:",B)}},[]);C.useEffect(()=>{async function B(){o(!0),await Promise.all([k(),w()]),o(!1)}B()},[k,w]);const S=(B,Y,Z)=>{n(j=>({...j,[B]:{...j[B],[Y]:Z}})),u(!0),h("idle")},E=(B,Y)=>{n(Z=>({...Z,[B]:{...Z[B],allergyNote:Y}})),u(!0),h("idle")},_=(B,Y)=>{b(B),v(Y),m(!0)},N=B=>{S(y,g,B),m(!1)},T=async B=>{try{const Z=(r[g]||[]).length,{error:j}=await L.from("meal_options").insert({facility_id:de,meal_type:g,name:B,position:Z});if(j)throw j;s(O=>({...O,[g]:[...O[g]||[],B]})),u(!0)}catch(Y){console.error("Option hinzufgen fehlgeschlagen:",Y),alert("Fehler beim Hinzufgen: "+Y.message)}},P=async B=>{try{const{error:Y}=await L.from("meal_options").delete().eq("facility_id",de).eq("meal_type",g).eq("name",B);if(Y)throw Y;s(Z=>({...Z,[g]:(Z[g]||[]).filter(j=>j!==B)})),n(Z=>{const j={...Z};return Object.keys(j).forEach(O=>{j[O][g]===B&&(j[O][g]="")}),j}),u(!0)}catch(Y){console.error("Option lschen fehlgeschlagen:",Y),alert("Fehler beim Lschen: "+Y.message)}},A=async(B,Y)=>{if(g==null)return;const Z=[...r[g]||[]],[j]=Z.splice(B,1);Z.splice(Y,0,j),s(O=>({...O,[g]:Z})),u(!0);try{for(let O=0;O<Z.length;O++)await L.from("meal_options").update({position:O}).eq("facility_id",de).eq("meal_type",g).eq("name",Z[O])}catch(O){console.error("Reihenfolge speichern fehlgeschlagen:",O)}},W=async()=>{if(c){h("saving");try{for(const{key:B}of zl){const Y=e[B]||qh;await L.from("meal_plans").upsert({facility_id:de,week_key:x,day_key:B,breakfast:Y.breakfast||"",lunch:Y.lunch||"",snack:Y.snack||"",allergy_note:Y.allergyNote||"",updated_at:new Date().toISOString()},{onConflict:"facility_id,week_key,day_key"})}h("saved"),setTimeout(()=>{h("idle"),u(!1),l(!1)},1200)}catch(B){console.error("Speichern fehlgeschlagen:",B),alert("Fehler beim Speichern: "+B.message),h("idle")}}},se=$$();return i?p.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-[#f2eee4] px-5 py-8 flex justify-center",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:24})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-[#f2eee4] px-5 py-4 mb-4 flex items-center gap-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h2",{className:"text-lg font-bold text-stone-900",children:"Speiseplan"}),p.jsx("div",{className:"inline-flex mt-2 px-3 py-1 rounded-full bg-stone-100",children:p.jsxs("span",{className:"text-xs text-stone-600",children:["Woche: ",se]})})]}),t&&p.jsx(p.Fragment,{children:d==="saving"||d==="saved"?p.jsx("button",{className:`save-button ${d==="saving"?"save-button--saving":"save-button--saved"}`,disabled:!0,children:p.jsxs("span",{className:"save-button__content",children:[d==="saving"&&p.jsx("span",{className:"save-button__spinner"}),d==="saved"&&p.jsxs(p.Fragment,{children:[p.jsx(z1,{size:16}),p.jsx("span",{children:"Gespeichert"})]})]})}):a?p.jsx("button",{type:"button",disabled:!c,onClick:W,className:`save-button save-button--idle ${c?"":"save-button--disabled"}`,children:p.jsxs("span",{className:"save-button__content",children:[p.jsx(DA,{size:16}),p.jsx("span",{children:"Speichern"})]})}):p.jsx("button",{type:"button",onClick:()=>{l(!0),h("idle")},className:"w-9 h-9 flex items-center justify-center rounded-full bg-stone-100 text-stone-500 hover:bg-stone-200",children:p.jsx(ld,{size:16})})})]}),zl.map((B,Y)=>p.jsx("div",{className:"daycard-anim",style:{animationDelay:`${Y*60}ms`},children:p.jsx(D$,{dayKey:B.key,dayLabel:B.label,dayData:e[B.key]||qh,isAdmin:t,editMode:a,onChangeValue:S,onChangeAllergy:E,onOpenLov:Z=>_(B.key,Z)})},B.key)),p.jsx(L$,{open:f,onClose:()=>m(!1),mealLabel:g==="breakfast"?"Frhstck":g==="lunch"?"Mittagessen":"Vesper",options:g?r[g]||[]:[],onSelect:N,onAddOption:T,onDeleteOption:P,onReorderOption:A})]})}function F$(){return p.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-900 p-4 rounded-2xl flex gap-3 items-start shadow-sm",children:[p.jsx(rA,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),p.jsxs("p",{className:"text-sm leading-snug",children:[p.jsx("strong",{className:"font-semibold",children:"Bitte meldet euer Kind rechtzeitig ab."}),p.jsx("br",{}),"Bei Krankheit am gleichen Tag bis ",p.jsx("strong",{children:"08:00 Uhr"})," wegen der Essensplanung, bei Urlauben frhzeitig. Eintrge knnen jederzeit korrigiert oder gelscht werden."]})]})}function U$({mode:t="create",initialData:e,child:n,groups:r=[],onSave:s,onCancel:i}){const o=new Date().toISOString().slice(0,10),[a,l]=C.useState("single"),[c,u]=C.useState(o),[d,h]=C.useState(o),[f,m]=C.useState("urlaub"),[g,v]=C.useState("");C.useEffect(()=>{e&&(l(e.type||"single"),u(e.dateFrom||o),h(e.dateTo||e.dateFrom||o),m(e.reason||"urlaub"),v(e.otherText||""))},[e,o]),C.useEffect(()=>{a==="range"&&m("urlaub")},[a]);const y=()=>c?a==="single"&&c<o?(alert("Datum darf nicht in der Vergangenheit liegen."),!1):a==="range"&&d<o?(alert("Das Enddatum darf nicht in der Vergangenheit liegen."),!1):a==="range"&&d<c?(alert("Das Enddatum darf nicht vor dem Startdatum liegen."),!1):!0:!1,b=()=>{if(!y())return;const E={id:(e==null?void 0:e.id)||crypto.randomUUID(),childId:n.id,childName:n.name,groupId:n.group,type:a,dateFrom:c,dateTo:a==="range"?d:null,reason:f,otherText:f==="sonstiges"?g.trim():"",createdAt:(e==null?void 0:e.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),status:(e==null?void 0:e.status)||"new"};s(E)},x=({value:E,label:_})=>{const N=f===E;return p.jsx("button",{type:"button",onClick:()=>m(E),className:`w-full px-4 py-3 rounded-2xl text-sm font-semibold border transition ${N?"bg-amber-100 text-amber-900 border-amber-500 shadow-sm":"bg-stone-50 text-stone-700 border-stone-300 hover:bg-stone-100"}`,children:_})};if(!n)return null;const k=Rs(r,n.group),w=Mt(k),S=c&&c>o?c:o;return p.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-stone-200 space-y-5",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`${w.chipClass||"bg-stone-400 text-white"} p-3 rounded-2xl text-white flex items-center justify-center`,children:p.jsx(w.Icon,{size:18})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-semibold text-stone-900",children:n.name}),w&&p.jsxs("p",{className:"text-[11px] font-medium text-stone-500 flex items-center gap-1",children:[p.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-amber-400"}),w.name]})]})]}),p.jsxs("div",{className:"bg-stone-50 rounded-2xl p-1 flex gap-1",children:[p.jsx("button",{type:"button",onClick:()=>l("single"),className:`flex-1 py-2 rounded-xl text-xs sm:text-sm font-semibold border transition ${a==="single"?"bg-amber-100 text-amber-900 border-amber-500 shadow-sm":"bg-stone-50 text-stone-700 border-transparent hover:bg-stone-100"}`,children:"Einzeltag"}),p.jsx("button",{type:"button",onClick:()=>l("range"),className:`flex-1 py-2 rounded-xl text-xs sm:text-sm font-semibold border transition ${a==="range"?"bg-amber-100 text-amber-900 border-amber-500 shadow-sm":"bg-stone-50 text-stone-700 border-transparent hover:bg-stone-100"}`,children:"Zeitraum"})]}),p.jsx("div",{className:"space-y-3",children:a==="single"?p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"text-xs text-stone-600 mb-1",children:"Datum"}),p.jsx("input",{type:"date",value:c,min:o,onChange:E=>u(E.target.value),className:"p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm"})]}):p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"text-xs text-stone-600 mb-1",children:"Von"}),p.jsx("input",{type:"date",value:c,min:o,onChange:E=>u(E.target.value),className:"p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"text-xs text-stone-600 mb-1",children:"Bis"}),p.jsx("input",{type:"date",value:d,min:S,onChange:E=>h(E.target.value),className:"p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm"})]})]})}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{className:"text-xs font-semibold text-stone-700 uppercase tracking-wide",children:"Grund"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(x,{value:"krankheit",label:"Krank"}),p.jsx(x,{value:"urlaub",label:"Urlaub"}),p.jsx(x,{value:"termin",label:"Termin"}),p.jsx(x,{value:"sonstiges",label:"Sonstiges"})]}),f==="sonstiges"&&p.jsxs("div",{className:"mt-2",children:[p.jsx("label",{className:"text-xs text-stone-600 mb-1 block",children:"Sonstiger Grund (optional)"}),p.jsx("textarea",{rows:2,value:g,onChange:E=>v(E.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm resize-none",placeholder:"Kurz den Grund ergnzen "})]})]}),p.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[p.jsx("button",{type:"button",onClick:b,className:"flex-1 bg-amber-500 text-white py-2 rounded-xl font-bold text-sm hover:bg-amber-600 active:scale-[0.99] transition-transform",children:t==="edit"?"Meldung speichern":"Meldung absenden"}),t==="edit"&&p.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-stone-200 text-stone-700 rounded-xl font-semibold text-sm hover:bg-stone-300",children:"Abbrechen"})]})]})}function y_(t){if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}function V$(t,e){if(!t&&!e)return"";if(!e||t===e)return y_(t);const n=new Date(t),r=new Date(e);if(Number.isNaN(n.getTime())||Number.isNaN(r.getTime()))return`${t}  ${e}`;const s=n.getFullYear()===r.getFullYear(),i=s&&n.getMonth()===r.getMonth(),o=n.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:s&&i?void 0:"numeric"}),a=r.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"});return`${o}  ${a}`}function H$(t){switch(t){case"krankheit":return{label:"Krankheit",className:"bg-amber-100 text-amber-900"};case"urlaub":return{label:"Urlaub",className:"bg-emerald-100 text-emerald-900"};case"termin":return{label:"Termin",className:"bg-sky-100 text-sky-900"};case"sonstiges":return{label:"Sonstiges",className:"bg-stone-100 text-stone-800"};default:return{label:t,className:"bg-stone-100 text-stone-800"}}}function W$({user:t}){const e=Array.isArray(t.children)?t.children:[],[n,r]=C.useState([]),[s,i]=C.useState(!0),[o,a]=C.useState(e.length>0?e[0].id:null),[l,c]=C.useState(null),[u,d]=C.useState([]);C.useEffect(()=>{async function b(){try{const{data:x}=await L.from("groups").select("*").eq("facility_id",de).order("position");r(x||[])}catch(x){console.error("Gruppen laden fehlgeschlagen:",x)}}b()},[]),C.useEffect(()=>{o&&h()},[o]);const h=async()=>{i(!0);try{const{data:b,error:x}=await L.from("absences").select("*").eq("child_id",o).order("created_at",{ascending:!1});if(x)throw x;const k=(b||[]).map(w=>({id:w.id,childId:w.child_id,childName:w.child_name,groupId:w.group_id,type:w.type,dateFrom:w.date_from,dateTo:w.date_to,reason:w.reason,otherText:w.other_text,status:w.status,createdAt:w.created_at}));d(k)}catch(b){console.error("Absences laden fehlgeschlagen:",b)}finally{i(!1)}},f=async b=>{try{const x={facility_id:de,child_id:b.childId,child_name:b.childName,group_id:b.groupId,type:b.type,date_from:b.dateFrom,date_to:b.dateTo,reason:b.reason,other_text:b.otherText||null,status:b.status||"new",created_by:t.id};if(u.findIndex(w=>w.id===b.id)===-1){const{error:w}=await L.from("absences").insert(x);if(w)throw w}else{const{error:w}=await L.from("absences").update({...x,updated_at:new Date().toISOString()}).eq("id",b.id);if(w)throw w}c(null),h()}catch(x){console.error("Speichern fehlgeschlagen:",x),alert("Fehler beim Speichern: "+x.message)}},m=async b=>{if(confirm("Meldung lschen?"))try{const{error:x}=await L.from("absences").delete().eq("id",b);if(x)throw x;h()}catch(x){console.error("Lschen fehlgeschlagen:",x),alert("Fehler beim Lschen: "+x.message)}},g=e.find(b=>b.id===o)||e[0]||null,v=b=>b.type==="single"?y_(b.dateFrom):V$(b.dateFrom,b.dateTo);if(!g)return p.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-stone-100 text-sm text-stone-600",children:"Fr dieses Profil sind aktuell keine Kinder hinterlegt."});const y=n.filter(b=>!b.is_event_group);return p.jsxs("div",{className:"space-y-5",children:[p.jsx(F$,{}),e.length>1&&p.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:e.map(b=>{const x=Mt(Rs(y,b.group)),k=b.id===o;return p.jsxs("button",{onClick:()=>{a(b.id),c(null)},className:`flex items-center gap-2 px-3 py-2 rounded-2xl border text-xs font-bold transition whitespace-nowrap ${k?`${x.chipClass} border-transparent text-white`:"bg-stone-50 text-stone-600 border-stone-300 hover:bg-stone-100"}`,children:[p.jsx(x.Icon,{size:14}),p.jsx("span",{children:b.name})]},b.id)})}),g&&p.jsx(U$,{mode:l?"edit":"create",initialData:l,child:g,groups:y,onSave:f,onCancel:()=>c(null)}),p.jsx("div",{className:"space-y-3",children:s?p.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex justify-center",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:24})}):u.length===0?p.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 text-center text-stone-500 text-sm",children:"Keine bisherigen Meldungen."}):u.map(b=>{const x=Mt(Rs(y,b.groupId)),k=H$(b.reason),w=new Date(b.createdAt).toLocaleString("de-DE");return p.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-stone-100",children:[p.jsxs("div",{className:"flex justify-between items-start gap-3",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-semibold text-stone-900",children:b.childName||g.name}),p.jsx("p",{className:"text-xs text-stone-600 mt-0.5",children:v(b)})]}),p.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[p.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase tracking-wide ${k.className}`,children:k.label}),b.reason==="sonstiges"&&b.otherText&&p.jsx("span",{className:"text-xs text-stone-600",children:b.otherText})]})]}),p.jsxs("div",{className:"flex flex-col items-end gap-2",children:[x&&p.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-semibold text-white ${x.chipClass}`,children:[p.jsx(x.Icon,{size:12}),p.jsx("span",{children:x.name})]}),p.jsxs("div",{className:"flex gap-1 mt-1",children:[p.jsx("button",{type:"button",onClick:()=>c(b),className:"p-2 bg-stone-100 text-stone-700 rounded-lg hover:bg-stone-200",children:p.jsx(ld,{size:14})}),p.jsx("button",{type:"button",onClick:()=>m(b.id),className:"p-2 bg-red-50 text-red-500 rounded-lg hover:bg-red-100",children:p.jsx(_n,{size:14})})]})]})]}),p.jsxs("p",{className:"text-[10px] text-stone-400 mt-2",children:["Eingereicht am ",w]})]},b.id)})})]})}const Lb={krankheit:"bg-amber-100 text-amber-900",termin:"bg-emerald-100 text-emerald-900",urlaub:"bg-sky-100 text-sky-900",sonstiges:"bg-stone-200 text-stone-800"};function v_({user:t}){const[e,n]=C.useState([]),[r,s]=C.useState(!0),[i,o]=C.useState(null),[a,l]=C.useState("new"),[c,u]=C.useState([]),[d,h]=C.useState([]);C.useEffect(()=>{async function N(){var T;try{const{data:P}=await L.from("groups").select("*").eq("facility_id",de).eq("is_event_group",!1).order("position"),A=P||[];n(A),!i&&A.length>0&&o(t.primaryGroup||((T=A[0])==null?void 0:T.id))}catch(P){console.error("Gruppen laden fehlgeschlagen:",P)}}N()},[]);const f=C.useCallback(async()=>{s(!0);try{const{data:N,error:T}=await L.from("absences").select("*").eq("facility_id",de).order("created_at",{ascending:!1});if(T)throw T;const P=(N||[]).map(A=>({id:A.id,childId:A.child_id,childName:A.child_name,groupId:A.group_id,type:A.type,dateFrom:A.date_from,dateTo:A.date_to,reason:A.reason,otherText:A.other_text,status:A.status,createdAt:A.created_at}));h(P)}catch(N){console.error("Absences laden fehlgeschlagen:",N)}finally{s(!1)}},[]);C.useEffect(()=>{f()},[f]),C.useEffect(()=>{if(i){const N=d.filter(T=>T.groupId===i);u(N)}},[i,d]);const m=async N=>{try{const{error:T}=await L.from("absences").update({status:"read",updated_at:new Date().toISOString()}).eq("id",N);if(T)throw T;f()}catch(T){console.error("Status ndern fehlgeschlagen:",T)}},g=async N=>{try{const{error:T}=await L.from("absences").update({status:"new",updated_at:new Date().toISOString()}).eq("id",N);if(T)throw T;f()}catch(T){console.error("Status ndern fehlgeschlagen:",T)}},v=async N=>{if(confirm("Meldung lschen?"))try{const{error:T}=await L.from("absences").delete().eq("id",N);if(T)throw T;f()}catch(T){console.error("Lschen fehlgeschlagen:",T),alert("Fehler beim Lschen: "+T.message)}},y=c.filter(N=>N.status==="new").sort((N,T)=>T.createdAt.localeCompare(N.createdAt)),b=c.filter(N=>N.status==="read").sort((N,T)=>T.createdAt.localeCompare(N.createdAt)),x=C.useMemo(()=>Rs(e,i),[e,i]),k=C.useMemo(()=>Mt(x),[x]),w=C.useMemo(()=>d.reduce((N,T)=>{var A;return((A=e.find(W=>W.id===T.groupId))==null?void 0:A.is_event_group)||T.status!=="new"||(N[T.groupId]=(N[T.groupId]||0)+1),N},{}),[d,e]);function S(N){return new Date(N).toLocaleDateString("de-DE")}const E=N=>N.type==="single"?S(N.dateFrom):`${S(N.dateFrom)}  ${S(N.dateTo)}`,_=(N,T=!1)=>{const P=Lb[N.reason]||Lb.sonstiges;return p.jsx("div",{className:`p-4 rounded-2xl border shadow-sm ${T?"bg-stone-50 border-stone-200 opacity-70":"bg-white border-amber-200"}`,children:p.jsxs("div",{className:"flex justify-between items-start gap-4",children:[p.jsxs("div",{className:"flex-1 space-y-1",children:[p.jsx("p",{className:"font-bold text-sm text-stone-800",children:N.childName}),p.jsxs("p",{className:"text-xs text-stone-600 flex items-center gap-1",children:[p.jsx(Xm,{size:12,className:"text-stone-400"}),E(N)]}),p.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase tracking-wide ${P}`,children:N.reason==="sonstiges"?N.otherText||"Sonstiges":N.reason.charAt(0).toUpperCase()+N.reason.slice(1)}),p.jsxs("p",{className:"text-[10px] text-stone-400 mt-1",children:["Eingereicht am"," ",new Date(N.createdAt).toLocaleString("de-DE")]})]}),p.jsx("div",{className:"flex flex-col items-end gap-2",children:p.jsxs("div",{className:"flex gap-2",children:[N.status==="new"?p.jsx("button",{onClick:()=>m(N.id),className:"p-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100",children:p.jsx(cA,{size:16})}):p.jsx("button",{onClick:()=>g(N.id),className:"p-2 bg-stone-200 text-stone-700 rounded-lg hover:bg-stone-300",children:p.jsx(MA,{size:16})}),p.jsx("button",{onClick:()=>v(N.id),className:"p-2 bg-red-50 text-red-500 rounded-lg hover:bg-red-100",children:p.jsx(_n,{size:16})})]})})]})},N.id)};return r&&e.length===0?p.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex justify-center",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:24})}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"p-6 rounded-3xl shadow-sm border border-stone-100 flex flex-col gap-3",style:{backgroundColor:k==null?void 0:k.headerColor},children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`${k==null?void 0:k.chipClass} p-2 rounded-2xl text-white shadow`,children:k&&p.jsx(k.Icon,{size:20})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"Meldungen"}),p.jsxs("p",{className:"text-xs text-stone-600",children:["Abwesenheiten der Gruppe ",k==null?void 0:k.name]})]})]}),p.jsx("div",{className:"mt-2 flex gap-2 overflow-x-auto pb-1",children:e.map(N=>{const T=Mt(N),P=N.id===i,A=w[N.id]||0;return p.jsxs("button",{onClick:()=>o(N.id),className:`flex items-center gap-2 px-3 py-2 rounded-full border text-xs font-bold whitespace-nowrap transition ${P?`${T.chipClass} border-transparent text-white`:"bg-stone-50 text-stone-600 border-stone-300 hover:bg-stone-100"}`,children:[p.jsx(T.Icon,{size:14}),p.jsx("span",{children:T.name}),A>0&&p.jsx("span",{className:"ml-1 min-w-[18px] h-[18px] px-1 rounded-full bg-amber-400 text-[10px] font-bold flex items-center justify-center text-stone-900",children:A})]},N.id)})})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{className:`flex-1 py-2 rounded-xl text-sm font-bold border transition ${a==="new"?"bg-amber-500 text-white border-transparent":"bg-white border-stone-300 text-stone-600 hover:bg-stone-100"}`,onClick:()=>l("new"),children:["Neu (",y.length,")"]}),p.jsxs("button",{className:`flex-1 py-2 rounded-xl text-sm font-bold border transition ${a==="read"?"bg-amber-500 text-white border-transparent":"bg-white border-stone-300 text-stone-600 hover:bg-stone-100"}`,onClick:()=>l("read"),children:["Gelesen (",b.length,")"]})]}),a==="new"&&p.jsx("div",{className:"space-y-3",children:y.length===0?p.jsx("div",{className:"bg-white p-6 rounded-xl border text-center text-stone-500",children:"Keine neuen Meldungen."}):y.map(N=>_(N,!1))}),a==="read"&&p.jsx("div",{className:"space-y-3",children:b.length===0?p.jsx("div",{className:"bg-white p-6 rounded-xl border text-center text-stone-500",children:"Keine gelesenen Meldungen."}):b.map(N=>_(N,!0))})]})}function q$({user:t}){return p.jsx("div",{className:"p-4 space-y-5",children:p.jsx(v_,{user:t})})}function vn({icon:t,title:e,subtitle:n,onClick:r}){return p.jsxs("button",{onClick:r,className:"w-full bg-white rounded-2xl shadow-sm border border-stone-200 p-4 flex items-center justify-between hover:bg-stone-50 active:scale-[0.99] transition",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"p-3 bg-amber-50 text-amber-600 rounded-xl shadow-sm",children:t}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"text-sm font-semibold text-stone-800",children:e}),n&&p.jsx("p",{className:"text-xs text-stone-500 mt-1",children:n})]})]}),p.jsx(uA,{className:"text-stone-400",size:20})]})}async function G$(t){if(!t||t.role!=="team"||!t.primaryGroup)return[];const e=new Date,n=e.getMonth()+1,r=e.getDate();try{const{data:s,error:i}=await L.from("children").select(`
        id,
        first_name,
        birthday,
        group_id,
        user_id,
        profiles!children_user_id_fkey (
          full_name
        )
      `).eq("facility_id",de).eq("group_id",t.primaryGroup).not("birthday","is",null);if(i)throw i;const o=[];return(s||[]).forEach(a=>{var d;if(!a.birthday)return;const l=new Date(a.birthday);if(Number.isNaN(l.getTime()))return;const c=l.getMonth()+1,u=l.getDate();c===n&&u===r&&o.push({childName:a.first_name,groupId:a.group_id,parentName:((d=a.profiles)==null?void 0:d.full_name)||"Unbekannt"})}),o}catch(s){return console.error("Geburtstage laden fehlgeschlagen:",s),[]}}function K$({user:t,onNavigate:e,onLogout:n}){const r=t.role==="admin",s=t.role==="team",i=t.role==="parent",[o,a]=C.useState([]),[l,c]=C.useState(!1),[u,d]=C.useState([]);C.useEffect(()=>{md().then(d).catch(console.error)},[]),C.useEffect(()=>{if(!s){a([]),c(!1);return}async function m(){try{const g=await G$(t);a(g);const{data:v}=await L.from("notification_preferences").select("preference").eq("user_id",t.id).eq("category","birthdays").single(),y=!v||v.preference!=="off";c(y&&g.length>0)}catch(g){console.error("Geburtstage laden fehlgeschlagen:",g)}}m()},[s,t]);const h=()=>{window.dispatchEvent(new CustomEvent("openAdminViaSettings"))},f=m=>u.find(g=>g.id===m);return p.jsxs("div",{className:"space-y-5",children:[i&&p.jsx(vn,{icon:p.jsx(Dc,{size:20}),title:"Meine Kinder",onClick:()=>e("children")}),s&&p.jsx(vn,{icon:p.jsx(Dc,{size:20}),title:"Stammgruppe",onClick:()=>e("children")}),p.jsx(vn,{icon:p.jsx(iA,{size:20}),title:"Benachrichtigungen",onClick:()=>e("notifications")}),p.jsx(vn,{icon:p.jsx(Li,{size:20}),title:"Einrichtungsinfo & Kontakt",onClick:()=>e("facility")}),p.jsx(vn,{icon:p.jsx(Zm,{size:20}),title:"Sicherheit",onClick:()=>e("security")}),r&&p.jsx(vn,{icon:p.jsx(q1,{size:20}),title:"Admin-Funktionen",onClick:h}),s&&l&&p.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-amber-200 shadow-sm space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"p-2 rounded-xl bg-amber-100 text-amber-700",children:p.jsx(aA,{size:18})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-semibold text-stone-800",children:"Geburtstage heute"}),p.jsx("p",{className:"text-[11px] text-stone-500",children:"Kinder aus deiner Stammgruppe"})]})]}),p.jsx("ul",{className:"mt-2 space-y-1",children:o.map((m,g)=>{const v=f(m.groupId);return p.jsxs("li",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"text-stone-700",children:m.childName}),v&&p.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-semibold text-white ${v.color}`,children:[v.icon,p.jsx("span",{children:v.name})]})]},`${m.childName}-${g}`)})})]}),n&&p.jsxs("button",{onClick:n,className:"w-full bg-red-500 text-white font-bold py-3 rounded-xl hover:bg-red-600 flex items-center justify-center gap-2 shadow",children:[p.jsx(wA,{size:18}),"Abmelden"]})]})}function J$({initialChild:t,groups:e=[],mode:n="create",onCancel:r,onSave:s}){var v;const[i,o]=C.useState(""),[a,l]=C.useState(((v=e[0])==null?void 0:v.id)||""),[c,u]=C.useState(""),[d,h]=C.useState(""),[f,m]=C.useState("");C.useEffect(()=>{var b;if(!t)return;o(t.name||"");const y=e.find(x=>x.id===t.group);l(y?t.group:((b=e[0])==null?void 0:b.id)||""),u(t.birthday||""),h(t.notes||"")},[t,e]);const g=y=>{if(y.preventDefault(),m(""),!i.trim()){m("Bitte einen Namen eingeben.");return}if(!a){m("Bitte eine Gruppe auswhlen.");return}const b={...t||{},name:i.trim(),group:a,birthday:c||null,notes:d.trim()||null};s(b)};return p.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl p-5 w-full max-w-sm shadow-xl border border-stone-200 space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-sm font-bold text-stone-800",children:n==="edit"?"Kind bearbeiten":"Kind hinzufgen"}),p.jsx("button",{type:"button",onClick:r,className:"p-1 rounded-lg hover:bg-stone-100 text-stone-400",children:p.jsx(ng,{size:18})})]}),p.jsxs("form",{className:"space-y-3",onSubmit:g,children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-stone-500 mb-1",children:"Name"}),p.jsx("input",{type:"text",value:i,onChange:y=>o(y.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm",placeholder:"Name des Kindes"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-stone-500 mb-1",children:"Gruppe"}),p.jsx("select",{value:a,onChange:y=>l(y.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm",children:e.map(y=>p.jsx("option",{value:y.id,children:y.name},y.id))})]}),p.jsxs("div",{className:"pt-2 border-t border-stone-100 mt-1",children:[p.jsx("p",{className:"text-[11px] font-semibold text-stone-500 uppercase tracking-wide mb-2",children:"Optionale Angaben"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-stone-500 mb-1",children:"Geburtstag"}),p.jsx("input",{type:"date",value:c||"",onChange:y=>u(y.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-stone-500 mb-1",children:"Allergien / Hinweise"}),p.jsx("textarea",{rows:2,value:d||"",onChange:y=>h(y.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm resize-none",placeholder:"Optional, z. B. Allergien oder Hinweise"})]})]})]}),f&&p.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded-xl",children:f}),p.jsxs("div",{className:"flex gap-2 pt-2",children:[p.jsx("button",{type:"button",onClick:r,className:"flex-1 py-2 rounded-xl bg-stone-200 text-stone-700 text-sm font-semibold hover:bg-stone-300",children:"Abbrechen"}),p.jsx("button",{type:"submit",className:"flex-1 py-2 rounded-xl bg-amber-500 text-white text-sm font-bold hover:bg-amber-600 active:scale-[0.99]",children:"Speichern"})]})]})]})})}function Y$(t){if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}function Q$({user:t,isTeam:e,onBack:n,onUpdateUser:r}){const[s,i]=C.useState(t.primaryGroup||null),[o,a]=C.useState(t.children||[]),[l,c]=C.useState([]),[u,d]=C.useState(!0),[h,f]=C.useState(!1),[m,g]=C.useState(null),[v,y]=C.useState("create"),[b,x]=C.useState(null);C.useEffect(()=>{async function A(){try{const{data:W}=await L.from("groups").select("*").eq("facility_id",de).order("position");c(W||[])}catch(W){console.error("Gruppen laden fehlgeschlagen:",W)}finally{d(!1)}}A()},[]);const k=l.filter(A=>!A.is_event_group),w=async()=>{f(!0);try{const{error:A}=await L.from("profiles").update({primary_group:s}).eq("id",t.id);if(A)throw A;const W={...t,primaryGroup:s};r(W),alert("Stammgruppe gespeichert.")}catch(A){console.error("Speichern fehlgeschlagen:",A),alert("Fehler: "+A.message)}f(!1)},S=async A=>{a(A);const W={...t,children:A};r(W)},E=()=>{var W,se;const A=((W=o[0])==null?void 0:W.group)||t.primaryGroup||((se=k[0])==null?void 0:se.id)||null;y("create"),g({id:crypto.randomUUID(),name:"",group:A,birthday:"",notes:""})},_=A=>{y("edit"),g(A)},N=async A=>{try{if(v==="create"){const{error:W}=await L.from("children").insert({id:A.id,facility_id:de,user_id:t.id,first_name:A.name,group_id:A.group,birthday:A.birthday||null,notes:A.notes||null});if(W)throw W;S([...o,A])}else{const{error:W}=await L.from("children").update({first_name:A.name,group_id:A.group,birthday:A.birthday||null,notes:A.notes||null}).eq("id",A.id);if(W)throw W;const se=o.map(B=>B.id===A.id?A:B);S(se)}}catch(W){console.error("Speichern fehlgeschlagen:",W),alert("Fehler: "+W.message)}g(null)},T=async()=>{if(b){try{const{error:A}=await L.from("children").delete().eq("id",b.id);if(A)throw A;const W=o.filter(se=>se.id!==b.id);S(W)}catch(A){console.error("Lschen fehlgeschlagen:",A),alert("Fehler: "+A.message)}x(null)}},P=t.role==="parent";return u?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:32})}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("button",{className:"flex items-center text-stone-500 gap-2 text-sm",onClick:n,children:[p.jsx(eo,{size:18}),"Zurck"]}),p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:e?"Stammgruppe":"Meine Kinder"}),e&&p.jsxs("div",{className:"space-y-3",children:[p.jsx("p",{className:"text-xs text-stone-500 uppercase font-bold",children:"Stammgruppe"}),p.jsxs("select",{value:s||"",onChange:A=>i(A.target.value),className:"w-full p-3 rounded-xl bg-stone-50 border border-stone-300 text-sm",children:[p.jsx("option",{value:"",children:"Keine"}),k.map(A=>p.jsx("option",{value:A.id,children:A.name},A.id))]}),p.jsx("button",{onClick:w,disabled:h,className:"w-full bg-amber-500 rounded-xl text-white font-bold py-2 hover:bg-amber-600 active:scale-[0.99] transition disabled:opacity-50",children:h?p.jsx(ht,{className:"animate-spin mx-auto",size:20}):"Speichern"})]}),P&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("p",{className:"text-xs text-stone-500 uppercase font-bold",children:o.length===1?"Kind":"Kinder"}),p.jsxs("button",{type:"button",onClick:E,className:"flex items-center gap-1 text-xs font-semibold px-3 py-1.5 rounded-full bg-amber-500 text-white hover:bg-amber-600 active:scale-[0.99]",children:[p.jsx(Us,{size:14}),"Kind hinzufgen"]})]}),o.length===0&&p.jsx("p",{className:"text-sm text-stone-500",children:"Noch keine Kinder hinterlegt."}),p.jsx("div",{className:"space-y-3",children:o.map(A=>{const W=Rs(k,A.group),se=Mt(W);return p.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl shadow-sm overflow-hidden flex",children:[p.jsx("div",{className:`w-2 ${se.chipClass.replace("text-white","")}`}),p.jsxs("div",{className:"flex-1 p-4 flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-stone-800 text-sm",children:A.name}),p.jsxs("p",{className:"text-xs text-stone-500 mt-1 flex items-center gap-1",children:[p.jsx(se.Icon,{size:14}),p.jsx("span",{children:se.name})]}),(A.birthday||A.notes)&&p.jsxs("p",{className:"text-[11px] text-stone-400 mt-1",children:[A.birthday&&`Geburtstag: ${Y$(A.birthday)}`,A.birthday&&A.notes&&"  ",A.notes&&"Hinweise hinterlegt"]})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{type:"button",onClick:()=>_(A),className:"p-2 rounded-lg bg-stone-100 text-stone-600 hover:bg-stone-200",children:p.jsx(ld,{size:14})}),p.jsx("button",{type:"button",onClick:()=>x(A),className:"p-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-100",children:p.jsx(_n,{size:14})})]})]})]},A.id)})})]}),m&&p.jsx(J$,{initialChild:m,groups:k,mode:v,onCancel:()=>g(null),onSave:N}),b&&p.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl p-5 w-full max-w-sm shadow-xl border border-stone-200 space-y-4",children:[p.jsx("h3",{className:"text-sm font-bold text-stone-800 mb-1",children:"Kind lschen?"}),p.jsxs("p",{className:"text-sm text-stone-600",children:["Mchtest du ",p.jsx("strong",{children:b.name})," wirklich entfernen?"]}),p.jsxs("div",{className:"flex gap-2 pt-2",children:[p.jsx("button",{type:"button",onClick:()=>x(null),className:"flex-1 py-2 rounded-xl bg-stone-200 text-stone-700 text-sm font-semibold hover:bg-stone-300",children:"Abbrechen"}),p.jsx("button",{type:"button",onClick:T,className:"flex-1 py-2 rounded-xl bg-red-500 text-white text-sm font-bold hover:bg-red-600 active:scale-[0.99]",children:"Lschen"})]})]})})]})}const X$=["email","app","both","off"];function Z$({user:t,onBack:e}){const[n,r]=C.useState({}),[s,i]=C.useState(!0);C.useEffect(()=>{async function u(){try{const{data:d,error:h}=await L.from("notification_preferences").select("category, preference").eq("user_id",t.id);if(h)throw h;const f={};(d||[]).forEach(m=>{f[m.category]=m.preference}),r(f)}catch(d){console.error("Notification prefs laden fehlgeschlagen:",d)}finally{i(!1)}}u()},[t.id]);let o;t.role==="parent"?o=["news","lists","food"]:t.role==="team"?o=["absences","lists","birthdays"]:o=["news","absences"];const a=async(u,d)=>{try{const{error:h}=await L.from("notification_preferences").upsert({user_id:t.id,category:u,preference:d,updated_at:new Date().toISOString()},{onConflict:"user_id,category"});if(h)throw h;r(f=>({...f,[u]:d}))}catch(h){console.error("Notification pref speichern fehlgeschlagen:",h)}},l={news:"Neue Mitteilung der Kita",lists:t.role==="parent"?"Neue Listen / Abstimmungen":"Neue Aktivitt auf Listen",food:"Neuer Speiseplan",absences:t.role==="team"||t.role==="admin"?"Neue Abwesenheitsmeldungen":"Abwesenheiten",birthdays:"Geburtstage in meiner Gruppe"},c={email:"E-Mail",app:"App",both:"Beides",off:"Aus"};return s?p.jsx("div",{className:"flex justify-center py-10",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:24})}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("button",{className:"flex items-center text-stone-500 gap-2 text-sm",onClick:e,children:[p.jsx(eo,{size:18}),"Zurck"]}),p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"Benachrichtigungen"}),p.jsx("div",{className:"space-y-5",children:o.map(u=>p.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-stone-200 space-y-3",children:[p.jsx("p",{className:"font-semibold text-sm text-stone-800",children:l[u]}),p.jsx("div",{className:"grid grid-cols-4 gap-2",children:X$.map(d=>p.jsx("button",{onClick:()=>a(u,d),className:`py-2 rounded-xl text-xs font-semibold border transition ${n[u]===d?"bg-amber-500 text-white border-amber-600":"bg-stone-50 text-stone-600 border-stone-300 hover:bg-stone-100"}`,children:c[d]},d))})]},u))})]})}function eB({onBack:t}){const[e,n]=C.useState(null),[r,s]=C.useState(!0);return C.useEffect(()=>{async function i(){try{const{data:o,error:a}=await L.from("facilities").select("*").eq("id",de).single();if(a)throw a;n(o||{})}catch(o){console.error("Facility laden fehlgeschlagen:",o),n({})}finally{s(!1)}}i()},[]),r?p.jsx("div",{className:"flex justify-center py-10",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:24})}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-stone-600 hover:text-stone-800 active:scale-95",children:[p.jsx(eo,{size:20}),p.jsx("span",{className:"font-semibold text-sm",children:"Zurck"})]}),p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"Einrichtungsinformationen"}),p.jsxs("div",{className:"bg-white rounded-2xl border border-stone-200 shadow-sm p-5 space-y-5",children:[e.name&&p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(Li,{size:20,className:"text-stone-500 mt-1"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase text-stone-500 font-semibold",children:"Name der Einrichtung"}),p.jsx("p",{className:"text-sm text-stone-800 mt-1",children:e.name})]})]}),e.address&&p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(J1,{size:20,className:"text-stone-500 mt-1"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase text-stone-500 font-semibold",children:"Adresse"}),p.jsx("p",{className:"text-sm text-stone-800 mt-1 whitespace-pre-wrap",children:e.address})]})]}),e.phone&&p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(ek,{size:20,className:"text-stone-500 mt-1"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase text-stone-500 font-semibold",children:"Telefonnummer"}),p.jsx("p",{className:"text-sm text-stone-800 mt-1",children:e.phone})]})]}),e.email&&p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(K1,{size:20,className:"text-stone-500 mt-1"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase text-stone-500 font-semibold",children:"E-Mailadresse"}),p.jsx("p",{className:"text-sm text-stone-800 mt-1 break-all",children:e.email})]})]}),e.opening_hours&&p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(F1,{size:20,className:"text-stone-500 mt-1"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase text-stone-500 font-semibold",children:"ffnungszeiten"}),p.jsx("p",{className:"text-sm text-stone-800 mt-1",children:e.opening_hours})]})]}),e.info_text&&p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(Li,{size:20,className:"text-stone-500 mt-1"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase text-stone-500 font-semibold",children:"Hinweise"}),p.jsx("p",{className:"text-sm text-stone-800 mt-1 whitespace-pre-wrap",children:e.info_text})]})]})]})]})}function tB({user:t,onCancel:e,onDelete:n}){return p.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-xl border border-stone-200",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx(ad,{className:"text-red-500",size:24}),p.jsx("h3",{className:"text-stone-800 font-bold text-lg",children:"Profil lschen?"})]}),p.jsxs("p",{className:"text-sm text-stone-600 mb-5",children:["Mchtest du dein Profil wirklich lschen? Dieser Vorgang kann ",p.jsx("strong",{children:"nicht rckgngig"})," gemacht werden."]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:e,className:"flex-1 py-2 rounded-xl bg-stone-200 text-stone-700 font-bold hover:bg-stone-300",children:"Abbrechen"}),p.jsx("button",{onClick:n,className:"flex-1 py-2 rounded-xl bg-red-500 text-white font-bold hover:bg-red-600",children:"Lschen"})]})]})})}function nB({user:t,onBack:e,onUpdateUser:n,onDeleteAccount:r}){const[s,i]=C.useState(""),[o,a]=C.useState(""),[l,c]=C.useState(""),[u,d]=C.useState(""),[h,f]=C.useState(!1),m=`bio_${t.id}`,[g,v]=C.useState(localStorage.getItem(m)==="1"),[y,b]=C.useState(!1),x=()=>{const w=!g;v(w),localStorage.setItem(m,w?"1":"0")},k=async w=>{if(w.preventDefault(),c(""),d(""),!s||!o)return c("Bitte beide Felder ausfllen.");if(s.length<6)return c("Passwort muss mindestens 6 Zeichen haben.");if(s!==o)return c("Passwrter stimmen nicht berein.");f(!0);try{const{error:S}=await L.auth.updateUser({password:s});if(S)throw S;d("Passwort erfolgreich gendert."),i(""),a("")}catch(S){console.error("Passwort-nderung fehlgeschlagen:",S),c(S.message||"Passwort konnte nicht gendert werden.")}f(!1)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("button",{className:"flex items-center text-stone-500 gap-2 text-sm",onClick:e,children:[p.jsx(eo,{size:18}),"Zurck"]}),p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"Sicherheit"}),p.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-stone-200 space-y-3 flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("p",{className:"font-semibold text-sm text-stone-800",children:"Biometrischer Login"}),p.jsx("p",{className:"text-xs text-stone-500 mt-1",children:"FaceID / Fingerprint aktivieren"})]}),p.jsx("button",{onClick:x,className:`px-4 py-2 rounded-xl font-bold text-xs transition ${g?"bg-amber-500 text-white":"bg-stone-200 text-stone-600"}`,children:g?"AN":"AUS"})]}),p.jsxs("form",{onSubmit:k,className:"bg-white p-5 rounded-2xl border border-stone-200 space-y-3",children:[p.jsx("p",{className:"font-semibold text-sm text-stone-800",children:"Passwort ndern"}),p.jsx("input",{type:"password",placeholder:"Neues Passwort",value:s,onChange:w=>i(w.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl",minLength:6}),p.jsx("input",{type:"password",placeholder:"Neues Passwort wiederholen",value:o,onChange:w=>a(w.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl",minLength:6}),l&&p.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-3 rounded-xl",children:l}),u&&p.jsx("div",{className:"text-xs text-green-600 bg-green-50 p-3 rounded-xl",children:u}),p.jsx("button",{type:"submit",disabled:h,className:"w-full bg-amber-500 text-white rounded-xl py-3 flex items-center justify-center gap-2 font-bold hover:bg-amber-600 active:scale-[0.99] disabled:opacity-50",children:h?p.jsx(ht,{className:"animate-spin",size:16}):p.jsxs(p.Fragment,{children:[p.jsx(rk,{size:16}),"Passwort speichern"]})})]}),p.jsx("button",{onClick:()=>b(!0),className:"w-full bg-red-500 text-white rounded-xl py-3 font-bold hover:bg-red-600 active:scale-[0.99]",children:"Profil lschen"}),y&&p.jsx(tB,{user:t,onCancel:()=>b(!1),onDelete:()=>{b(!1),r()}})]})}function rB({onNavigate:t}){return p.jsxs("div",{className:"space-y-5",children:[p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"Admin-Bereich"}),p.jsx(vn,{icon:p.jsx(tg,{size:20}),title:"Benutzerverwaltung",subtitle:"Eltern, Team & Admins verwalten",onClick:()=>t("users")}),p.jsx(vn,{icon:p.jsx(NA,{size:20}),title:"Codes & Sicherheit",subtitle:"Registrierungscodes bearbeiten",onClick:()=>t("codes")}),p.jsx(vn,{icon:p.jsx(hA,{size:20}),title:"Einrichtungsinformationen",subtitle:"Adresse, Kontakt, ffnungszeiten",onClick:()=>t("facility")}),p.jsx(vn,{icon:p.jsx(OA,{size:20}),title:"Gruppenverwaltung",subtitle:"Gruppen & Strukturen verwalten",onClick:()=>t("groups")}),p.jsx(vn,{icon:p.jsx(q1,{size:20}),title:"System-Tools",subtitle:"Daten, Backups, Reset (bald)",onClick:()=>alert("Wird in spterer Phase implementiert.")})]})}function ty({onClick:t,isDirty:e,label:n="Speichern",saveDuration:r=800,savedDuration:s=1400}){const[i,o]=C.useState("idle"),a=async()=>{if(!(!e||i==="saving")){o("saving");try{await t()}catch(d){console.error("Save error:",d)}setTimeout(()=>{o("saved"),setTimeout(()=>{o("idle")},s)},r)}},l="w-full py-3 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2";let c="",u=null;return!e&&i==="idle"?(c="bg-stone-300 text-stone-500 cursor-not-allowed",u=p.jsx("span",{children:n})):i==="idle"?(c="bg-amber-600 hover:bg-amber-700 active:scale-95 text-white",u=p.jsx("span",{children:n})):i==="saving"?(c="bg-amber-500 text-white cursor-wait",u=p.jsxs(p.Fragment,{children:[p.jsx(ht,{size:18,className:"animate-spin"}),p.jsx("span",{children:"Speichern"})]})):i==="saved"&&(c="bg-emerald-600 text-white animate-[pop_0.25s_ease-out]",u=p.jsxs(p.Fragment,{children:[p.jsx(z1,{size:20}),p.jsx("span",{children:"Gespeichert"})]})),p.jsx("button",{onClick:a,disabled:!e&&i==="idle",className:`${l} ${c}`,children:u})}function sB({user:t,groups:e=[],onCancel:n,onSave:r}){const s=e.filter(v=>!v.is_event_group),[i,o]=C.useState(t.name||""),[a,l]=C.useState(t.primaryGroup||""),[c,u]=C.useState(t.children||[]),d=i!==(t.name||"")||a!==(t.primaryGroup||"")||JSON.stringify(c)!==JSON.stringify(t.children||[]),h=(v,y,b)=>{u(x=>x.map(k=>k.id===v?{...k,[y]:b}:k))},f=()=>{var b;const v=crypto.randomUUID(),y=a||((b=s[0])==null?void 0:b.id)||"";u(x=>[...x,{id:v,name:"",group:y,birthday:"",notes:""}])},m=v=>{u(y=>y.filter(b=>b.id!==v))},g=()=>{const v={...t,name:i.trim(),primaryGroup:t.role==="parent"?void 0:a,children:t.role==="parent"?c:void 0};r(v)};return p.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-lg space-y-6 border border-stone-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[p.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-stone-600 hover:text-stone-800 active:scale-95",children:[p.jsx(eo,{size:20}),p.jsx("span",{className:"font-semibold text-sm",children:"Zurck"})]}),p.jsx("h3",{className:"text-lg font-bold text-stone-800",children:"Benutzer bearbeiten"}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs uppercase text-stone-500 font-semibold",children:"Name"}),p.jsx("input",{className:"w-full p-3 rounded-xl bg-stone-50 border border-stone-300 text-sm",value:i,onChange:v=>o(v.target.value)})]}),(t.role==="team"||t.role==="admin")&&p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs uppercase text-stone-500 font-semibold",children:"Stammgruppe"}),p.jsxs("select",{className:"w-full p-3 rounded-xl bg-stone-50 border border-stone-300 text-sm",value:a,onChange:v=>l(v.target.value),children:[p.jsx("option",{value:"",children:"Keine"}),s.map(v=>p.jsx("option",{value:v.id,children:v.name},v.id))]})]}),t.role==="parent"&&p.jsxs("div",{className:"space-y-3 pt-3",children:[p.jsx("h4",{className:"text-md font-semibold text-stone-800",children:"Kinder"}),c.map(v=>p.jsxs("div",{className:"bg-stone-50 p-4 rounded-xl border border-stone-200 flex justify-between items-start",children:[p.jsxs("div",{className:"space-y-2 w-full pr-3",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs text-stone-500",children:"Name"}),p.jsx("input",{className:"w-full p-2 rounded-lg border border-stone-300 bg-white text-sm",value:v.name,onChange:y=>h(v.id,"name",y.target.value)})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs text-stone-500",children:"Gruppe"}),p.jsx("select",{className:"w-full p-2 rounded-lg border border-stone-300 bg-white text-sm",value:v.group,onChange:y=>h(v.id,"group",y.target.value),children:s.map(y=>p.jsx("option",{value:y.id,children:y.name},y.id))})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs text-stone-500",children:"Geburtstag (optional)"}),p.jsx("input",{type:"date",className:"w-full p-2 rounded-lg border border-stone-300 bg-white text-sm",value:v.birthday||"",onChange:y=>h(v.id,"birthday",y.target.value)})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs text-stone-500",children:"Hinweise / Allergien (optional)"}),p.jsx("textarea",{className:"w-full p-2 rounded-lg border border-stone-300 bg-white text-sm resize-none",rows:2,value:v.notes||"",onChange:y=>h(v.id,"notes",y.target.value)})]})]}),p.jsx("button",{onClick:()=>m(v.id),className:"p-2 bg-red-50 border border-red-200 text-red-600 rounded-lg hover:bg-red-100",children:p.jsx(_n,{size:16})})]},v.id)),p.jsxs("button",{onClick:f,className:"w-full mt-2 py-2 rounded-xl bg-amber-600 text-white font-bold text-sm hover:bg-amber-700 active:scale-95 flex items-center justify-center gap-2",children:[p.jsx(Us,{size:16}),"Kind hinzufgen"]})]}),p.jsx(ty,{isDirty:d,onClick:g,label:"nderungen speichern"})]})})}function iB(){const[t,e]=C.useState([]),[n,r]=C.useState([]),[s,i]=C.useState(!0),[o,a]=C.useState(null),[l,c]=C.useState(null),[u,d]=C.useState(null);C.useEffect(()=>{async function w(){try{const{data:S}=await L.from("groups").select("*").eq("facility_id",de).order("position");r(S||[]);const{data:E,error:_}=await L.from("profiles").select(`
            id,
            full_name,
            role,
            primary_group,
            must_reset_password,
            children (
              id,
              first_name,
              birthday,
              notes,
              group_id
            )
          `).eq("facility_id",de);if(_)throw _;const N=(E||[]).map(T=>({id:T.id,name:T.full_name,role:T.role,primaryGroup:T.primary_group,mustResetPassword:T.must_reset_password,children:(T.children||[]).map(P=>({id:P.id,name:P.first_name,group:P.group_id,birthday:P.birthday,notes:P.notes}))}));e(N)}catch(S){console.error("Laden fehlgeschlagen:",S)}finally{i(!1)}}w()},[]);const h=w=>n.find(S=>S.id===w),f=w=>w==="admin"?"Leitung":w==="team"?"Team":"Eltern",m=w=>{if(!w.children||w.children.length===0)return null;const E=w.children.length===1?"Kind":"Kinder",_=w.children.map(N=>{const T=h(N.group),P=T?T.name:N.group||"ohne Gruppe";return`${N.name} (${P})`});return`${E}: ${_.join(", ")}`},g=w=>{a(w)},v=async w=>{try{const{error:S}=await L.from("profiles").update({full_name:w.name,primary_group:w.primaryGroup||null}).eq("id",w.id);if(S)throw S;if(w.role==="parent"&&w.children){const{data:E}=await L.from("children").select("id").eq("user_id",w.id),_=(E||[]).map(P=>P.id),N=w.children.map(P=>P.id),T=_.filter(P=>!N.includes(P));T.length>0&&await L.from("children").delete().in("id",T);for(const P of w.children)_.includes(P.id)?await L.from("children").update({first_name:P.name,group_id:P.group,birthday:P.birthday||null,notes:P.notes||null}).eq("id",P.id):await L.from("children").insert({id:P.id,facility_id:de,user_id:w.id,first_name:P.name,group_id:P.group,birthday:P.birthday||null,notes:P.notes||null})}e(E=>E.map(_=>_.id===w.id?w:_)),a(null)}catch(S){console.error("Speichern fehlgeschlagen:",S),alert("Fehler beim Speichern: "+S.message)}},y=w=>{c(w)},b=async()=>{if(!l)return;const w=t.filter(E=>E.role==="admin");if(l.role==="admin"&&w.length<=1){alert("Es muss mindestens eine Leitung (Admin) bestehen bleiben."),c(null);return}try{await L.from("children").delete().eq("user_id",l.id);const{error:E}=await L.from("profiles").delete().eq("id",l.id);if(E)throw E;e(_=>_.filter(N=>N.id!==l.id)),c(null)}catch(E){console.error("Lschen fehlgeschlagen:",E),alert("Fehler beim Lschen: "+E.message)}},x=w=>{d(w)},k=async()=>{if(u)try{const{error:w}=await L.from("profiles").update({must_reset_password:!0}).eq("id",u.id);if(w)throw w;e(S=>S.map(E=>E.id===u.id?{...E,mustResetPassword:!0}:E)),d(null),alert("Passwort-Reset aktiviert. Der Benutzer muss beim nchsten Login ein neues Passwort vergeben.")}catch(w){console.error("Reset fehlgeschlagen:",w),alert("Fehler: "+w.message)}};return s?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:32})}):p.jsxs("div",{className:"space-y-4",children:[p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"Benutzerverwaltung"}),p.jsx("p",{className:"text-xs text-stone-500 mb-2",children:"Hier verwaltest du alle Profile, Gruppen und Zugnge. Du kannst Benutzer bearbeiten, Passwrter zurcksetzen oder Accounts lschen."}),p.jsxs("div",{className:"bg-white rounded-2xl border border-stone-200 shadow-sm divide-y divide-stone-100",children:[t.map(w=>{const S=w.primaryGroup?h(w.primaryGroup):null,E=m(w);return p.jsxs("div",{className:"p-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"p-2 rounded-xl bg-stone-100 text-stone-700",children:w.role==="admin"?p.jsx(Zm,{size:18}):w.role==="team"?p.jsx(Dc,{size:18}):p.jsx(lk,{size:18})}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[p.jsx("span",{className:"font-semibold text-sm text-stone-800",children:w.name}),p.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-stone-100 text-stone-600 font-semibold uppercase tracking-wide",children:f(w.role)}),w.mustResetPassword&&p.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-amber-50 text-amber-700 border border-amber-200",children:"Passwort-Reset aktiv"})]}),S&&(w.role==="team"||w.role==="admin")&&p.jsxs("p",{className:"text-xs text-stone-500 flex items-center gap-2",children:["Stammgruppe:",p.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-lg text-[11px] font-semibold ${S.light||"bg-stone-100 text-stone-700"}`,children:S.name})]}),E&&p.jsx("p",{className:"text-xs text-stone-500",children:E})]})]}),p.jsxs("div",{className:"flex items-center gap-2 pt-1 sm:pt-0",children:[p.jsx("button",{onClick:()=>g(w),className:"p-2 rounded-xl bg-stone-100 text-stone-700 hover:bg-stone-200 active:scale-95",title:"Bearbeiten",children:p.jsx(ld,{size:16})}),p.jsx("button",{onClick:()=>x(w),className:"p-2 rounded-xl bg-amber-50 text-amber-700 border border-amber-200 hover:bg-amber-100 active:scale-95",title:"Passwort zurcksetzen",children:p.jsx(ks,{size:16})}),p.jsx("button",{onClick:()=>y(w),className:"p-2 rounded-xl bg-red-50 text-red-600 border border-red-200 hover:bg-red-100 active:scale-95",title:"Benutzer lschen",children:p.jsx(_n,{size:16})})]})]},w.id)}),t.length===0&&p.jsx("div",{className:"p-4 text-xs text-stone-500 text-center",children:"Noch keine Benutzer angelegt."})]}),o&&p.jsx(sB,{user:o,groups:n,onCancel:()=>a(null),onSave:v}),l&&p.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl p-5 w-full max-w-sm shadow-xl border border-stone-200 space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(ad,{className:"text-red-500",size:22}),p.jsx("h3",{className:"text-sm font-bold text-stone-800",children:"Benutzer lschen?"})]}),p.jsxs("p",{className:"text-sm text-stone-600",children:["Soll der Benutzer"," ",p.jsx("span",{className:"font-semibold",children:l.name})," ","wirklich gelscht werden?"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>c(null),className:"flex-1 py-2 rounded-xl bg-stone-100 text-stone-700 font-semibold text-sm hover:bg-stone-200",children:"Abbrechen"}),p.jsx("button",{onClick:b,className:"flex-1 py-2 rounded-xl bg-red-500 text-white font-bold text-sm hover:bg-red-600",children:"Lschen"})]})]})}),u&&p.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-2xl p-5 w-full max-w-sm shadow-xl border border-stone-200 space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(ks,{className:"text-amber-500",size:22}),p.jsx("h3",{className:"text-sm font-bold text-stone-800",children:"Passwort zurcksetzen"})]}),p.jsxs("p",{className:"text-sm text-stone-600",children:["Der Benutzer"," ",p.jsx("span",{className:"font-semibold",children:u.name})," ","muss beim nchsten Login ein neues Passwort vergeben."]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>d(null),className:"flex-1 py-2 rounded-xl bg-stone-100 text-stone-700 font-semibold text-sm hover:bg-stone-200",children:"Abbrechen"}),p.jsx("button",{onClick:k,className:"flex-1 py-2 rounded-xl bg-amber-600 text-white font-bold text-sm hover:bg-amber-700",children:"Besttigen"})]})]})})]})}function oB(){const[t,e]=C.useState({parent:"",team:"",admin:""}),[n,r]=C.useState(t),[s,i]=C.useState(!0),o=C.useCallback(async()=>{var u,d,h;i(!0);try{const{data:f,error:m}=await L.from("registration_codes").select("*").eq("facility_id",de);if(m)throw m;const g={parent:((u=f==null?void 0:f.find(v=>v.role==="parent"))==null?void 0:u.code)||"",team:((d=f==null?void 0:f.find(v=>v.role==="team"))==null?void 0:d.code)||"",admin:((h=f==null?void 0:f.find(v=>v.role==="admin"))==null?void 0:h.code)||""};e(g),r(g)}catch(f){console.error("Codes laden fehlgeschlagen:",f)}finally{i(!1)}},[]);C.useEffect(()=>{o()},[o]);const a=JSON.stringify(t)!==JSON.stringify(n),l=(u,d)=>{e(h=>({...h,[u]:d.trim()}))},c=async()=>{try{for(const u of["parent","team","admin"])await L.from("registration_codes").upsert({facility_id:de,role:u,code:t[u].trim()},{onConflict:"facility_id,role"});r({...t})}catch(u){console.error("Codes speichern fehlgeschlagen:",u),alert("Fehler beim Speichern: "+u.message)}};return s?p.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex justify-center",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:24})}):p.jsxs("div",{className:"space-y-6",children:[p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"Zugangscodes"}),p.jsxs("div",{className:"flex items-start gap-3 bg-amber-50 border border-amber-200 rounded-2xl p-4 text-sm text-amber-800",children:[p.jsx(Li,{size:18}),p.jsx("p",{children:"nderungen an den Codes beeinflussen nur **neue Registrierungen**. Bereits bestehende Profile bleiben unverndert."})]}),p.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-stone-200 shadow-sm space-y-2",children:[p.jsxs("label",{className:"text-xs uppercase text-stone-500 font-semibold flex items-center gap-2",children:[p.jsx(ks,{size:16}),"Eltern-Code"]}),p.jsx("input",{className:"w-full p-3 rounded-xl bg-stone-50 border border-stone-300 text-sm",value:t.parent,onChange:u=>l("parent",u.target.value),placeholder:"z. B. PARENT-2024"})]}),p.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-stone-200 shadow-sm space-y-2",children:[p.jsxs("label",{className:"text-xs uppercase text-stone-500 font-semibold flex items-center gap-2",children:[p.jsx(ks,{size:16}),"Team-Code"]}),p.jsx("input",{className:"w-full p-3 rounded-xl bg-stone-50 border border-stone-300 text-sm",value:t.team,onChange:u=>l("team",u.target.value),placeholder:"z. B. TEAM-2024"})]}),p.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-stone-200 shadow-sm space-y-2",children:[p.jsxs("label",{className:"text-xs uppercase text-stone-500 font-semibold flex items-center gap-2",children:[p.jsx(ks,{size:16}),"Admin-Code"]}),p.jsx("input",{className:"w-full p-3 rounded-xl bg-stone-50 border border-stone-300 text-sm",value:t.admin,onChange:u=>l("admin",u.target.value),placeholder:"z. B. ADMIN-2024"})]}),p.jsx(ty,{isDirty:a,onClick:c,label:"Codes speichern"})]})}function aB(){const[t,e]=C.useState({name:"",address:"",phone:"",email:"",opening_hours:"",info_text:""}),[n,r]=C.useState(null),[s,i]=C.useState(!0);C.useEffect(()=>{async function c(){try{const{data:u,error:d}=await L.from("facilities").select("*").eq("id",de).single();if(d)throw d;const h={name:(u==null?void 0:u.name)||"",address:(u==null?void 0:u.address)||"",phone:(u==null?void 0:u.phone)||"",email:(u==null?void 0:u.email)||"",opening_hours:(u==null?void 0:u.opening_hours)||"",info_text:(u==null?void 0:u.info_text)||""};e(h),r(h)}catch(u){console.error("Facility laden fehlgeschlagen:",u)}finally{i(!1)}}c()},[]);const o=JSON.stringify(t)!==JSON.stringify(n),a=(c,u)=>{e(d=>({...d,[c]:u}))},l=async()=>{try{const c={name:t.name.trim(),address:t.address.trim(),phone:t.phone.trim(),email:t.email.trim(),opening_hours:t.opening_hours.trim(),info_text:t.info_text.trim()},{error:u}=await L.from("facilities").update(c).eq("id",de);if(u)throw u;r({...t,...c})}catch(c){console.error("Facility speichern fehlgeschlagen:",c),alert("Fehler beim Speichern: "+c.message)}};return s?p.jsx("div",{className:"flex justify-center py-10",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:24})}):p.jsxs("div",{className:"space-y-6",children:[p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"Einrichtungsinformationen"}),p.jsxs("div",{className:"bg-white border border-stone-200 rounded-2xl shadow-sm p-5 space-y-5",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-xs font-bold text-stone-500 uppercase flex items-center gap-1",children:[p.jsx(Li,{size:14}),"Name der Einrichtung"]}),p.jsx("input",{value:t.name,onChange:c=>a("name",c.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm",placeholder:"z. B. Montessori Kinderhaus Berlin-Buch"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-xs font-bold text-stone-500 uppercase flex items-center gap-1",children:[p.jsx(J1,{size:14}),"Adresse"]}),p.jsx("textarea",{rows:2,value:t.address,onChange:c=>a("address",c.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm resize-none",placeholder:"Strae, Hausnummer, PLZ, Ort"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-xs font-bold text-stone-500 uppercase flex items-center gap-1",children:[p.jsx(ek,{size:14}),"Telefonnummer"]}),p.jsx("input",{value:t.phone,onChange:c=>a("phone",c.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm",placeholder:"030 / 1234567"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-xs font-bold text-stone-500 uppercase flex items-center gap-1",children:[p.jsx(K1,{size:14}),"E-Mailadresse"]}),p.jsx("input",{value:t.email,onChange:c=>a("email",c.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm",placeholder:"kontakt@kita.de"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-xs font-bold text-stone-500 uppercase flex items-center gap-1",children:[p.jsx(F1,{size:14}),"ffnungszeiten"]}),p.jsx("input",{value:t.opening_hours,onChange:c=>a("opening_hours",c.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm",placeholder:"MoFr 07:0017:00"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-xs font-bold text-stone-500 uppercase flex items-center gap-1",children:[p.jsx(Li,{size:14}),"Hinweistext fr Eltern"]}),p.jsx("textarea",{rows:4,value:t.info_text,onChange:c=>a("info_text",c.target.value),className:"w-full p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm resize-none",placeholder:"Wichtige Hinweise, z. B. zur Abwesenheitsmeldung"})]})]}),p.jsx(ty,{isDirty:o,onClick:l,label:"nderungen speichern"})]})}function gt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var lB=typeof Symbol=="function"&&Symbol.observable||"@@observable",$b=lB,Bb=()=>Math.random().toString(36).substring(7).split("").join("."),cB={INIT:`@@redux/INIT${Bb()}`,REPLACE:`@@redux/REPLACE${Bb()}`},zb=cB;function uB(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function b_(t,e,n){if(typeof t!="function")throw new Error(gt(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(gt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(gt(1));return n(b_)(t,e)}let r=t,s=e,i=new Map,o=i,a=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((v,y)=>{o.set(y,v)}))}function u(){if(l)throw new Error(gt(3));return s}function d(v){if(typeof v!="function")throw new Error(gt(4));if(l)throw new Error(gt(5));let y=!0;c();const b=a++;return o.set(b,v),function(){if(y){if(l)throw new Error(gt(6));y=!1,c(),o.delete(b),i=null}}}function h(v){if(!uB(v))throw new Error(gt(7));if(typeof v.type>"u")throw new Error(gt(8));if(typeof v.type!="string")throw new Error(gt(17));if(l)throw new Error(gt(9));try{l=!0,s=r(s,v)}finally{l=!1}return(i=o).forEach(b=>{b()}),v}function f(v){if(typeof v!="function")throw new Error(gt(10));r=v,h({type:zb.REPLACE})}function m(){const v=d;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(gt(11));function b(){const k=y;k.next&&k.next(u())}return b(),{unsubscribe:v(b)}},[$b](){return this}}}return h({type:zb.INIT}),{dispatch:h,subscribe:d,getState:u,replaceReducer:f,[$b]:m}}function Fb(t,e){return function(...n){return e(t.apply(this,n))}}function Ub(t,e){if(typeof t=="function")return Fb(t,e);if(typeof t!="object"||t===null)throw new Error(gt(16));const n={};for(const r in t){const s=t[r];typeof s=="function"&&(n[r]=Fb(s,e))}return n}function x_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function dB(...t){return e=>(n,r)=>{const s=e(n,r);let i=()=>{throw new Error(gt(15))};const o={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},a=t.map(l=>l(o));return i=x_(...a)(s.dispatch),{...s,dispatch:i}}}var hB={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=C;function fB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pB=typeof Object.is=="function"?Object.is:fB,mB=Qa.useSyncExternalStore,gB=Qa.useRef,yB=Qa.useEffect,vB=Qa.useMemo,bB=Qa.useDebugValue;hB.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=gB(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=vB(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var m=o.value;if(s(m,f))return d=m}return d=f}if(m=d,pB(u,f))return m;var g=r(f);return s!==void 0&&s(m,g)?(u=f,m):(u=f,d=g)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,s]);var a=mB(t,i[0],i[1]);return yB(function(){o.hasValue=!0,o.value=a},[a]),bB(a),a};var xB=C.version.startsWith("19"),wB=Symbol.for(xB?"react.transitional.element":"react.element"),kB=Symbol.for("react.portal"),SB=Symbol.for("react.fragment"),EB=Symbol.for("react.strict_mode"),CB=Symbol.for("react.profiler"),_B=Symbol.for("react.consumer"),NB=Symbol.for("react.context"),w_=Symbol.for("react.forward_ref"),TB=Symbol.for("react.suspense"),AB=Symbol.for("react.suspense_list"),ny=Symbol.for("react.memo"),OB=Symbol.for("react.lazy"),IB=w_,jB=ny;function RB(t){if(typeof t=="object"&&t!==null){const{$$typeof:e}=t;switch(e){case wB:switch(t=t.type,t){case SB:case CB:case EB:case TB:case AB:return t;default:switch(t=t&&t.$$typeof,t){case NB:case w_:case OB:case ny:return t;case _B:return t;default:return e}}case kB:return e}}}function MB(t){return RB(t)===ny}function PB(t,e,n,r,{areStatesEqual:s,areOwnPropsEqual:i,areStatePropsEqual:o}){let a=!1,l,c,u,d,h;function f(b,x){return l=b,c=x,u=t(l,c),d=e(r,c),h=n(u,d,c),a=!0,h}function m(){return u=t(l,c),e.dependsOnOwnProps&&(d=e(r,c)),h=n(u,d,c),h}function g(){return t.dependsOnOwnProps&&(u=t(l,c)),e.dependsOnOwnProps&&(d=e(r,c)),h=n(u,d,c),h}function v(){const b=t(l,c),x=!o(b,u);return u=b,x&&(h=n(u,d,c)),h}function y(b,x){const k=!i(x,c),w=!s(b,l,x,c);return l=b,c=x,k&&w?m():k?g():w?v():h}return function(x,k){return a?y(x,k):f(x,k)}}function DB(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...s}){const i=e(t,s),o=n(t,s),a=r(t,s);return PB(i,o,a,t,s)}function LB(t,e){const n={};for(const r in t){const s=t[r];typeof s=="function"&&(n[r]=(...i)=>e(s(...i)))}return n}function Kp(t){return function(n){const r=t(n);function s(){return r}return s.dependsOnOwnProps=!1,s}}function Vb(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function k_(t,e){return function(r,{displayName:s}){const i=function(a,l){return i.dependsOnOwnProps?i.mapToProps(a,l):i.mapToProps(a,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(a,l){i.mapToProps=t,i.dependsOnOwnProps=Vb(t);let c=i(a,l);return typeof c=="function"&&(i.mapToProps=c,i.dependsOnOwnProps=Vb(c),c=i(a,l)),c},i}}function ry(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function $B(t){return t&&typeof t=="object"?Kp(e=>LB(t,e)):t?typeof t=="function"?k_(t):ry(t,"mapDispatchToProps"):Kp(e=>({dispatch:e}))}function BB(t){return t?typeof t=="function"?k_(t):ry(t,"mapStateToProps"):Kp(()=>({}))}function zB(t,e,n){return{...n,...t,...e}}function FB(t){return function(n,{displayName:r,areMergedPropsEqual:s}){let i=!1,o;return function(l,c,u){const d=t(l,c,u);return i?s(d,o)||(o=d):(i=!0,o=d),o}}}function UB(t){return t?typeof t=="function"?FB(t):ry(t,"mergeProps"):()=>zB}function VB(t){t()}function HB(){let t=null,e=null;return{clear(){t=null,e=null},notify(){VB(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var Hb={notify(){},get:()=>[]};function S_(t,e){let n,r=Hb,s=0,i=!1;function o(g){u();const v=r.subscribe(g);let y=!1;return()=>{y||(y=!0,v(),d())}}function a(){r.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return i}function u(){s++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=HB())}function d(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=Hb)}function h(){i||(i=!0,u())}function f(){i&&(i=!1,d())}const m={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>r};return m}var WB=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qB=WB(),GB=()=>typeof navigator<"u"&&navigator.product==="ReactNative",KB=GB(),JB=()=>qB||KB?C.useLayoutEffect:C.useEffect,Pu=JB();function Wb(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Gh(t,e){if(Wb(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(e,n[s])||!Wb(t[n[s]],e[n[s]]))return!1;return!0}var YB={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},QB={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},XB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},E_={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ZB={[IB]:XB,[jB]:E_};function qb(t){return MB(t)?E_:ZB[t.$$typeof]||YB}var ez=Object.defineProperty,tz=Object.getOwnPropertyNames,Gb=Object.getOwnPropertySymbols,nz=Object.getOwnPropertyDescriptor,rz=Object.getPrototypeOf,Kb=Object.prototype;function Jp(t,e){if(typeof e!="string"){if(Kb){const i=rz(e);i&&i!==Kb&&Jp(t,i)}let n=tz(e);Gb&&(n=n.concat(Gb(e)));const r=qb(t),s=qb(e);for(let i=0;i<n.length;++i){const o=n[i];if(!QB[o]&&!(s&&s[o])&&!(r&&r[o])){const a=nz(e,o);try{ez(t,o,a)}catch{}}}}return t}var Kh=Symbol.for("react-redux-context"),Jh=typeof globalThis<"u"?globalThis:{};function sz(){if(!C.createContext)return{};const t=Jh[Kh]??(Jh[Kh]=new Map);let e=t.get(C.createContext);return e||(e=C.createContext(null),t.set(C.createContext,e)),e}var C_=sz(),iz=[null,null];function oz(t,e,n){Pu(()=>t(...e),n)}function az(t,e,n,r,s,i){t.current=r,n.current=!1,s.current&&(s.current=null,i())}function lz(t,e,n,r,s,i,o,a,l,c,u){if(!t)return()=>{};let d=!1,h=null;const f=()=>{if(d||!a.current)return;const g=e.getState();let v,y;try{v=r(g,s.current)}catch(b){y=b,h=b}y||(h=null),v===i.current?o.current||c():(i.current=v,l.current=v,o.current=!0,u())};return n.onStateChange=f,n.trySubscribe(),f(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}function cz(t,e){return t===e}function uz(t,e,n,{pure:r,areStatesEqual:s=cz,areOwnPropsEqual:i=Gh,areStatePropsEqual:o=Gh,areMergedPropsEqual:a=Gh,forwardRef:l=!1,context:c=C_}={}){const u=c,d=BB(t),h=$B(e),f=UB(n),m=!!t;return v=>{const y=v.displayName||v.name||"Component",b=`Connect(${y})`,x={shouldHandleStateChanges:m,displayName:b,wrappedComponentName:y,WrappedComponent:v,initMapStateToProps:d,initMapDispatchToProps:h,initMergeProps:f,areStatesEqual:s,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:a};function k(E){const[_,N,T]=C.useMemo(()=>{const{reactReduxForwardedRef:Ye,...Bn}=E;return[E.context,Ye,Bn]},[E]),P=C.useMemo(()=>{let Ye=u;return _!=null&&_.Consumer,Ye},[_,u]),A=C.useContext(P),W=!!E.store&&!!E.store.getState&&!!E.store.dispatch,se=!!A&&!!A.store,B=W?E.store:A.store,Y=se?A.getServerState:B.getState,Z=C.useMemo(()=>DB(B.dispatch,x),[B]),[j,O]=C.useMemo(()=>{if(!m)return iz;const Ye=S_(B,W?void 0:A.subscription),Bn=Ye.notifyNestedSubs.bind(Ye);return[Ye,Bn]},[B,W,A]),z=C.useMemo(()=>W?A:{...A,subscription:j},[W,A,j]),ee=C.useRef(void 0),J=C.useRef(T),Ce=C.useRef(void 0),Ke=C.useRef(!1),Kt=C.useRef(!1),Je=C.useRef(void 0);Pu(()=>(Kt.current=!0,()=>{Kt.current=!1}),[]);const Et=C.useMemo(()=>()=>Ce.current&&T===J.current?Ce.current:Z(B.getState(),T),[B,T]),el=C.useMemo(()=>Bn=>j?lz(m,B,j,Z,J,ee,Ke,Kt,Ce,O,Bn):()=>{},[j]);oz(az,[J,ee,Ke,T,Ce,O]);let Ws;try{Ws=C.useSyncExternalStore(el,Et,Y?()=>Z(Y(),T):Et)}catch(Ye){throw Je.current&&(Ye.message+=`
The error may be correlated with this previous error:
${Je.current.stack}

`),Ye}Pu(()=>{Je.current=void 0,Ce.current=void 0,ee.current=Ws});const lo=C.useMemo(()=>C.createElement(v,{...Ws,ref:N}),[N,v,Ws]);return C.useMemo(()=>m?C.createElement(P.Provider,{value:z},lo):lo,[P,lo,z])}const S=C.memo(k);if(S.WrappedComponent=v,S.displayName=k.displayName=b,l){const _=C.forwardRef(function(T,P){return C.createElement(S,{...T,reactReduxForwardedRef:P})});return _.displayName=b,_.WrappedComponent=v,Jp(_,v)}return Jp(S,v)}}var __=uz;function dz(t){const{children:e,context:n,serverState:r,store:s}=t,i=C.useMemo(()=>{const l=S_(s);return{store:s,subscription:l,getServerState:r?()=>r:void 0}},[s,r]),o=C.useMemo(()=>s.getState(),[s]);Pu(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const a=n||C_;return C.createElement(a.Provider,{value:i},e)}var hz=dz,fz="Invariant failed";function pz(t,e){throw new Error(fz)}var wn=function(e){var n=e.top,r=e.right,s=e.bottom,i=e.left,o=r-i,a=s-n,l={top:n,right:r,bottom:s,left:i,width:o,height:a,x:i,y:n,center:{x:(r+i)/2,y:(s+n)/2}};return l},sy=function(e,n){return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right}},Jb=function(e,n){return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom-n.bottom,right:e.right-n.right}},mz=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},Yh={top:0,right:0,bottom:0,left:0},iy=function(e){var n=e.borderBox,r=e.margin,s=r===void 0?Yh:r,i=e.border,o=i===void 0?Yh:i,a=e.padding,l=a===void 0?Yh:a,c=wn(sy(n,s)),u=wn(Jb(n,o)),d=wn(Jb(u,l));return{marginBox:c,borderBox:wn(n),paddingBox:u,contentBox:d,margin:s,border:o,padding:l}},Yt=function(e){var n=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var s=Number(n);return isNaN(s)&&pz(),s},gz=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Du=function(e,n){var r=e.borderBox,s=e.border,i=e.margin,o=e.padding,a=mz(r,n);return iy({borderBox:a,border:s,margin:i,padding:o})},Lu=function(e,n){return n===void 0&&(n=gz()),Du(e,n)},N_=function(e,n){var r={top:Yt(n.marginTop),right:Yt(n.marginRight),bottom:Yt(n.marginBottom),left:Yt(n.marginLeft)},s={top:Yt(n.paddingTop),right:Yt(n.paddingRight),bottom:Yt(n.paddingBottom),left:Yt(n.paddingLeft)},i={top:Yt(n.borderTopWidth),right:Yt(n.borderRightWidth),bottom:Yt(n.borderBottomWidth),left:Yt(n.borderLeftWidth)};return iy({borderBox:e,margin:r,padding:s,border:i})},T_=function(e){var n=e.getBoundingClientRect(),r=window.getComputedStyle(e);return N_(n,r)},ja=function(e){var n=[],r=null,s=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];n=a,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,n)}))};return s.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},s};function $u(){return $u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$u.apply(null,arguments)}function A_(t,e){}A_.bind(null,"warn");A_.bind(null,"error");function Lr(){}function yz(t,e){return{...t,...e}}function rn(t,e,n){const r=e.map(s=>{const i=yz(n,s.options);return t.addEventListener(s.eventName,s.fn,i),function(){t.removeEventListener(s.eventName,s.fn,i)}});return function(){r.forEach(i=>{i()})}}const vz="Invariant failed";class Bu extends Error{}Bu.prototype.toString=function(){return this.message};function D(t,e){throw new Bu(vz)}let bz=class extends ae.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=Lr,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof Bu&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=rn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof Bu){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}};const xz=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,zu=t=>t+1,wz=t=>`
  You have lifted an item in position ${zu(t.source.index)}
`,O_=(t,e)=>{const n=t.droppableId===e.droppableId,r=zu(t.index),s=zu(e.index);return n?`
      You have moved the item from position ${r}
      to position ${s}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${s}
  `},I_=(t,e,n)=>e.droppableId===n.droppableId?`
      The item ${t}
      has been combined with ${n.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,kz=t=>{const e=t.destination;if(e)return O_(t.source,e);const n=t.combine;return n?I_(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},Yb=t=>`
  The item has returned to its starting position
  of ${zu(t.index)}
`,Sz=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${Yb(t.source)}
    `;const e=t.destination,n=t.combine;return e?`
      You have dropped the item.
      ${O_(t.source,e)}
    `:n?`
      You have dropped the item.
      ${I_(t.draggableId,t.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Yb(t.source)}
  `},dc={dragHandleUsageInstructions:xz,onDragStart:wz,onDragUpdate:kz,onDragEnd:Sz};function Ez(t,e){return!!(t===e||Number.isNaN(t)&&Number.isNaN(e))}function j_(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Ez(t[n],e[n]))return!1;return!0}function ie(t,e){const n=C.useState(()=>({inputs:e,result:t()}))[0],r=C.useRef(!0),s=C.useRef(n),o=r.current||!!(e&&s.current.inputs&&j_(e,s.current.inputs))?s.current:{inputs:e,result:t()};return C.useEffect(()=>{r.current=!1,s.current=o},[o]),o.result}function q(t,e){return ie(()=>t,e)}const Ge={x:0,y:0},rt=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),zt=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),$r=(t,e)=>t.x===e.x&&t.y===e.y,io=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),Bs=(t,e,n=0)=>t==="x"?{x:e,y:n}:{x:n,y:e},Ra=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),Qb=(t,e)=>Math.min(...e.map(n=>Ra(t,n))),R_=t=>e=>({x:t(e.x),y:t(e.y)});var Cz=(t,e)=>{const n=wn({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return n.width<=0||n.height<=0?null:n};const Xa=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),Xb=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],_z={top:0,right:0,bottom:0,left:0},Nz=(t,e)=>e?Xa(t,e.scroll.diff.displacement):t,Tz=(t,e,n)=>n&&n.increasedBy?{...t,[e.end]:t[e.end]+n.increasedBy[e.line]}:t,Az=(t,e)=>e&&e.shouldClipSubject?Cz(e.pageMarginBox,t):wn(t);var Ki=({page:t,withPlaceholder:e,axis:n,frame:r})=>{const s=Nz(t.marginBox,r),i=Tz(s,n,e),o=Az(i,r);return{page:t,withPlaceholder:e,active:o}},oy=(t,e)=>{t.frame||D();const n=t.frame,r=zt(e,n.scroll.initial),s=io(r),i={...n,scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:s},max:n.scroll.max}},o=Ki({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:i});return{...t,frame:i,subject:o}};function qe(t,e=j_){let n=null;function r(...s){if(n&&n.lastThis===this&&e(s,n.lastArgs))return n.lastResult;const i=t.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}const M_=qe(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),P_=qe(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),jd=qe(t=>Object.values(t)),Oz=qe(t=>Object.values(t));var oo=qe((t,e)=>Oz(e).filter(r=>t===r.descriptor.droppableId).sort((r,s)=>r.descriptor.index-s.descriptor.index));function ay(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function Rd(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var Md=qe((t,e)=>e.filter(n=>n.descriptor.id!==t.descriptor.id)),Iz=({isMovingForward:t,draggable:e,destination:n,insideDestination:r,previousImpact:s})=>{if(!n.isCombineEnabled||!ay(s))return null;function o(f){const m={type:"COMBINE",combine:{draggableId:f,droppableId:n.descriptor.id}};return{...s,at:m}}const a=s.displaced.all,l=a.length?a[0]:null;if(t)return l?o(l):null;const c=Md(e,r);if(!l){if(!c.length)return null;const f=c[c.length-1];return o(f.descriptor.id)}const u=c.findIndex(f=>f.descriptor.id===l);u===-1&&D();const d=u-1;if(d<0)return null;const h=c[d];return o(h.descriptor.id)},ao=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const D_={point:Ge,value:0},Ma={invisible:{},visible:{},all:[]},jz={displaced:Ma,displacedBy:D_,at:null};var ln=(t,e)=>n=>t<=n&&n<=e,L_=t=>{const e=ln(t.top,t.bottom),n=ln(t.left,t.right);return r=>{if(e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right))return!0;const i=e(r.top)||e(r.bottom),o=n(r.left)||n(r.right);if(i&&o)return!0;const l=r.top<t.top&&r.bottom>t.bottom,c=r.left<t.left&&r.right>t.right;return l&&c?!0:l&&o||c&&i}},Rz=t=>{const e=ln(t.top,t.bottom),n=ln(t.left,t.right);return r=>e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right)};const ly={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},$_={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Mz=t=>e=>{const n=ln(e.top,e.bottom),r=ln(e.left,e.right);return s=>t===ly?n(s.top)&&n(s.bottom):r(s.left)&&r(s.right)};const Pz=(t,e)=>{const n=e.frame?e.frame.scroll.diff.displacement:Ge;return Xa(t,n)},Dz=(t,e,n)=>e.subject.active?n(e.subject.active)(t):!1,Lz=(t,e,n)=>n(e)(t),cy=({target:t,destination:e,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:s})=>{const i=r?Pz(t,e):t;return Dz(i,e,s)&&Lz(i,n,s)},$z=t=>cy({...t,isVisibleThroughFrameFn:L_}),B_=t=>cy({...t,isVisibleThroughFrameFn:Rz}),Bz=t=>cy({...t,isVisibleThroughFrameFn:Mz(t.destination.axis)}),zz=(t,e,n)=>{if(typeof n=="boolean")return n;if(!e)return!0;const{invisible:r,visible:s}=e;if(r[t])return!1;const i=s[t];return i?i.shouldAnimate:!0};function Fz(t,e){const n=t.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return wn(sy(n,r))}function Pa({afterDragging:t,destination:e,displacedBy:n,viewport:r,forceShouldAnimate:s,last:i}){return t.reduce(function(a,l){const c=Fz(l,n),u=l.descriptor.id;if(a.all.push(u),!$z({target:c,destination:e,viewport:r,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=zz(u,i,s),f={draggableId:u,shouldAnimate:h};return a.visible[u]=f,a},{all:[],visible:{},invisible:{}})}function Uz(t,e){if(!t.length)return 0;const n=t[t.length-1].descriptor.index;return e.inHomeList?n:n+1}function Zb({insideDestination:t,inHomeList:e,displacedBy:n,destination:r}){const s=Uz(t,{inHomeList:e});return{displaced:Ma,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Fu({draggable:t,insideDestination:e,destination:n,viewport:r,displacedBy:s,last:i,index:o,forceShouldAnimate:a}){const l=ao(t,n);if(o==null)return Zb({insideDestination:e,inHomeList:l,displacedBy:s,destination:n});const c=e.find(m=>m.descriptor.index===o);if(!c)return Zb({insideDestination:e,inHomeList:l,displacedBy:s,destination:n});const u=Md(t,e),d=e.indexOf(c),h=u.slice(d);return{displaced:Pa({afterDragging:h,destination:n,displacedBy:s,last:i,viewport:r.frame,forceShouldAnimate:a}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Vr(t,e){return!!e.effected[t]}var Vz=({isMovingForward:t,destination:e,draggables:n,combine:r,afterCritical:s})=>{if(!e.isCombineEnabled)return null;const i=r.draggableId,a=n[i].descriptor.index;return Vr(i,s)?t?a:a-1:t?a+1:a},Hz=({isMovingForward:t,isInHomeList:e,insideDestination:n,location:r})=>{if(!n.length)return null;const s=r.index,i=t?s+1:s-1,o=n[0].descriptor.index,a=n[n.length-1].descriptor.index,l=e?a:a+1;return i<o||i>l?null:i},Wz=({isMovingForward:t,isInHomeList:e,draggable:n,draggables:r,destination:s,insideDestination:i,previousImpact:o,viewport:a,afterCritical:l})=>{const c=o.at;if(c||D(),c.type==="REORDER"){const d=Hz({isMovingForward:t,isInHomeList:e,location:c.destination,insideDestination:i});return d==null?null:Fu({draggable:n,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:d})}const u=Vz({isMovingForward:t,destination:s,displaced:o.displaced,draggables:r,combine:c.combine,afterCritical:l});return u==null?null:Fu({draggable:n,insideDestination:i,destination:s,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:u})},qz=({displaced:t,afterCritical:e,combineWith:n,displacedBy:r})=>{const s=!!(t.visible[n]||t.invisible[n]);return Vr(n,e)?s?Ge:io(r.point):s?r.point:Ge},Gz=({afterCritical:t,impact:e,draggables:n})=>{const r=Rd(e);r||D();const s=r.draggableId,i=n[s].page.borderBox.center,o=qz({displaced:e.displaced,afterCritical:t,combineWith:s,displacedBy:e.displacedBy});return rt(i,o)};const z_=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,Kz=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,uy=(t,e,n)=>e[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2,ex=({axis:t,moveRelativeTo:e,isMoving:n})=>Bs(t.line,e.marginBox[t.end]+z_(t,n),uy(t,e.marginBox,n)),tx=({axis:t,moveRelativeTo:e,isMoving:n})=>Bs(t.line,e.marginBox[t.start]-Kz(t,n),uy(t,e.marginBox,n)),Jz=({axis:t,moveInto:e,isMoving:n})=>Bs(t.line,e.contentBox[t.start]+z_(t,n),uy(t,e.contentBox,n));var Yz=({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:s})=>{const i=oo(r.descriptor.id,n),o=e.page,a=r.axis;if(!i.length)return Jz({axis:a,moveInto:r.page,isMoving:o});const{displaced:l,displacedBy:c}=t,u=l.all[0];if(u){const h=n[u];if(Vr(u,s))return tx({axis:a,moveRelativeTo:h.page,isMoving:o});const f=Du(h.page,c.point);return tx({axis:a,moveRelativeTo:f,isMoving:o})}const d=i[i.length-1];if(d.descriptor.id===e.descriptor.id)return o.borderBox.center;if(Vr(d.descriptor.id,s)){const h=Du(d.page,io(s.displacedBy.point));return ex({axis:a,moveRelativeTo:h,isMoving:o})}return ex({axis:a,moveRelativeTo:d.page,isMoving:o})},Yp=(t,e)=>{const n=t.frame;return n?rt(e,n.scroll.diff.displacement):e};const Qz=({impact:t,draggable:e,droppable:n,draggables:r,afterCritical:s})=>{const i=e.page.borderBox.center,o=t.at;return!n||!o?i:o.type==="REORDER"?Yz({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:s}):Gz({impact:t,draggables:r,afterCritical:s})};var Pd=t=>{const e=Qz(t),n=t.droppable;return n?Yp(n,e):e},F_=(t,e)=>{const n=zt(e,t.scroll.initial),r=io(n);return{frame:wn({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:n,displacement:r}}}};function nx(t,e){return t.map(n=>e[n])}function Xz(t,e){for(let n=0;n<e.length;n++){const r=e[n].visible[t];if(r)return r}return null}var Zz=({impact:t,viewport:e,destination:n,draggables:r,maxScrollChange:s})=>{const i=F_(e,rt(e.scroll.current,s)),o=n.frame?oy(n,rt(n.frame.scroll.current,s)):n,a=t.displaced,l=Pa({afterDragging:nx(a.all,r),destination:n,displacedBy:t.displacedBy,viewport:i.frame,last:a,forceShouldAnimate:!1}),c=Pa({afterDragging:nx(a.all,r),destination:o,displacedBy:t.displacedBy,viewport:e.frame,last:a,forceShouldAnimate:!1}),u={},d={},h=[a,l,c];return a.all.forEach(m=>{const g=Xz(m,h);if(g){d[m]=g;return}u[m]=!0}),{...t,displaced:{all:a.all,invisible:u,visible:d}}},e5=(t,e)=>rt(t.scroll.diff.displacement,e),dy=({pageBorderBoxCenter:t,draggable:e,viewport:n})=>{const r=e5(n,t),s=zt(r,e.page.borderBox.center);return rt(e.client.borderBox.center,s)},U_=({draggable:t,destination:e,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:s,onlyOnMainAxis:i=!1})=>{const o=zt(n,t.page.borderBox.center),l={target:Xa(t.page.borderBox,o),destination:e,withDroppableDisplacement:s,viewport:r};return i?Bz(l):B_(l)},t5=({isMovingForward:t,draggable:e,destination:n,draggables:r,previousImpact:s,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:a,afterCritical:l})=>{if(!n.isEnabled)return null;const c=oo(n.descriptor.id,r),u=ao(e,n),d=Iz({isMovingForward:t,draggable:e,destination:n,insideDestination:c,previousImpact:s})||Wz({isMovingForward:t,isInHomeList:u,draggable:e,draggables:r,destination:n,insideDestination:c,previousImpact:s,viewport:i,afterCritical:l});if(!d)return null;const h=Pd({impact:d,draggable:e,droppable:n,draggables:r,afterCritical:l});if(U_({draggable:e,destination:n,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:dy({pageBorderBoxCenter:h,draggable:e,viewport:i}),impact:d,scrollJumpRequest:null};const m=zt(h,o),g=Zz({impact:d,viewport:i,destination:n,draggables:r,maxScrollChange:m});return{clientSelection:a,impact:g,scrollJumpRequest:m}};const mt=t=>{const e=t.subject.active;return e||D(),e};var n5=({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:r,viewport:s})=>{const i=n.subject.active;if(!i)return null;const o=n.axis,a=ln(i[o.start],i[o.end]),l=jd(r).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>L_(s.frame)(mt(u))).filter(u=>{const d=mt(u);return t?i[o.crossAxisEnd]<d[o.crossAxisEnd]:d[o.crossAxisStart]<i[o.crossAxisStart]}).filter(u=>{const d=mt(u),h=ln(d[o.start],d[o.end]);return a(d[o.start])||a(d[o.end])||h(i[o.start])||h(i[o.end])}).sort((u,d)=>{const h=mt(u)[o.crossAxisStart],f=mt(d)[o.crossAxisStart];return t?h-f:f-h}).filter((u,d,h)=>mt(u)[o.crossAxisStart]===mt(h[0])[o.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const c=l.filter(u=>ln(mt(u)[o.start],mt(u)[o.end])(e[o.line]));return c.length===1?c[0]:c.length>1?c.sort((u,d)=>mt(u)[o.start]-mt(d)[o.start])[0]:l.sort((u,d)=>{const h=Qb(e,Xb(mt(u))),f=Qb(e,Xb(mt(d)));return h!==f?h-f:mt(u)[o.start]-mt(d)[o.start]})[0]};const rx=(t,e)=>{const n=t.page.borderBox.center;return Vr(t.descriptor.id,e)?zt(n,e.displacedBy.point):n},r5=(t,e)=>{const n=t.page.borderBox;return Vr(t.descriptor.id,e)?Xa(n,io(e.displacedBy.point)):n};var s5=({pageBorderBoxCenter:t,viewport:e,destination:n,insideDestination:r,afterCritical:s})=>r.filter(o=>B_({target:r5(o,s),destination:n,viewport:e.frame,withDroppableDisplacement:!0})).sort((o,a)=>{const l=Ra(t,Yp(n,rx(o,s))),c=Ra(t,Yp(n,rx(a,s)));return l<c?-1:c<l?1:o.descriptor.index-a.descriptor.index})[0]||null,Za=qe(function(e,n){const r=n[e.line];return{value:r,point:Bs(e.line,r)}});const i5=(t,e,n)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return Bs(r.line,e[r.line]);const s=t.subject.page.contentBox[r.size],l=oo(t.descriptor.id,n).reduce((c,u)=>c+u.client.marginBox[r.size],0)+e[r.line]-s;return l<=0?null:Bs(r.line,l)},V_=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),H_=(t,e,n)=>{const r=t.frame;ao(e,t)&&D(),t.subject.withPlaceholder&&D();const s=Za(t.axis,e.displaceBy).point,i=i5(t,s,n),o={placeholderSize:s,increasedBy:i,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const u=Ki({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return{...t,subject:u}}const a=i?rt(r.scroll.max,i):r.scroll.max,l=V_(r,a),c=Ki({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:l});return{...t,subject:c,frame:l}},o5=t=>{const e=t.subject.withPlaceholder;e||D();const n=t.frame;if(!n){const o=Ki({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:o}}const r=e.oldFrameMaxScroll;r||D();const s=V_(n,r),i=Ki({page:t.subject.page,axis:t.axis,frame:s,withPlaceholder:null});return{...t,subject:i,frame:s}};var a5=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:n,draggable:r,draggables:s,destination:i,viewport:o,afterCritical:a})=>{if(!e){if(n.length)return null;const d={displaced:Ma,displacedBy:D_,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},h=Pd({impact:d,draggable:r,droppable:i,draggables:s,afterCritical:a}),f=ao(r,i)?i:H_(i,r,s);return U_({draggable:r,destination:f,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const l=t[i.axis.line]<=e.page.borderBox.center[i.axis.line],c=(()=>{const d=e.descriptor.index;return e.descriptor.id===r.descriptor.id||l?d:d+1})(),u=Za(i.axis,r.displaceBy);return Fu({draggable:r,insideDestination:n,destination:i,viewport:o,displacedBy:u,last:Ma,index:c})},l5=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:n,isOver:r,draggables:s,droppables:i,viewport:o,afterCritical:a})=>{const l=n5({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:i,viewport:o});if(!l)return null;const c=oo(l.descriptor.id,s),u=s5({pageBorderBoxCenter:e,viewport:o,destination:l,insideDestination:c,afterCritical:a}),d=a5({previousPageBorderBoxCenter:e,destination:l,draggable:n,draggables:s,moveRelativeTo:u,insideDestination:c,viewport:o,afterCritical:a});if(!d)return null;const h=Pd({impact:d,draggable:n,droppable:l,draggables:s,afterCritical:a});return{clientSelection:dy({pageBorderBoxCenter:h,draggable:n,viewport:o}),impact:d,scrollJumpRequest:null}},Vt=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const c5=(t,e)=>{const n=Vt(t);return n?e[n]:null};var u5=({state:t,type:e})=>{const n=c5(t.impact,t.dimensions.droppables),r=!!n,s=t.dimensions.droppables[t.critical.droppable.id],i=n||s,o=i.axis.direction,a=o==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||o==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(a&&!r)return null;const l=e==="MOVE_DOWN"||e==="MOVE_RIGHT",c=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,{draggables:d,droppables:h}=t.dimensions;return a?t5({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:i,draggables:d,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):l5({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:i,draggables:d,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function ls(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function W_(t){const e=ln(t.top,t.bottom),n=ln(t.left,t.right);return function(s){return e(s.y)&&n(s.x)}}function d5(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function h5({pageBorderBox:t,draggable:e,candidates:n}){const r=e.page.borderBox.center,s=n.map(i=>{const o=i.axis,a=Bs(i.axis.line,t.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:Ra(r,a)}}).sort((i,o)=>o.distance-i.distance);return s[0]?s[0].id:null}function f5({pageBorderBox:t,draggable:e,droppables:n}){const r=jd(n).filter(s=>{if(!s.isEnabled)return!1;const i=s.subject.active;if(!i||!d5(t,i))return!1;if(W_(i)(t.center))return!0;const o=s.axis,a=i.center[o.crossAxisLine],l=t[o.crossAxisStart],c=t[o.crossAxisEnd],u=ln(i[o.crossAxisStart],i[o.crossAxisEnd]),d=u(l),h=u(c);return!d&&!h?!0:d?l<a:c>a});return r.length?r.length===1?r[0].descriptor.id:h5({pageBorderBox:t,draggable:e,candidates:r}):null}const q_=(t,e)=>wn(Xa(t,e));var p5=(t,e)=>{const n=t.frame;return n?q_(e,n.scroll.diff.value):e};function G_({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function m5({draggable:t,closest:e,inHomeList:n}){return e?n&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var g5=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:n,insideDestination:r,last:s,viewport:i,afterCritical:o})=>{const a=n.axis,l=Za(n.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],f=Md(e,r).find(g=>{const v=g.descriptor.id,y=g.page.borderBox.center[a.line],b=Vr(v,o),x=G_({displaced:s,id:v});return b?x?d<=y:u<y-c:x?d<=y+c:u<y})||null,m=m5({draggable:e,closest:f,inHomeList:ao(e,n)});return Fu({draggable:e,insideDestination:r,destination:n,viewport:i,last:s,displacedBy:l,index:m})};const y5=4;var v5=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:n,destination:r,insideDestination:s,afterCritical:i})=>{if(!r.isCombineEnabled)return null;const o=r.axis,a=Za(r.axis,t.displaceBy),l=a.value,c=e[o.start],u=e[o.end],h=Md(t,s).find(m=>{const g=m.descriptor.id,v=m.page.borderBox,b=v[o.size]/y5,x=Vr(g,i),k=G_({displaced:n.displaced,id:g});return x?k?u>v[o.start]+b&&u<v[o.end]-b:c>v[o.start]-l+b&&c<v[o.end]-l-b:k?u>v[o.start]+l+b&&u<v[o.end]+l-b:c>v[o.start]+b&&c<v[o.end]-b});return h?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:r.descriptor.id}}}:null},K_=({pageOffset:t,draggable:e,draggables:n,droppables:r,previousImpact:s,viewport:i,afterCritical:o})=>{const a=q_(e.page.borderBox,t),l=f5({pageBorderBox:a,draggable:e,droppables:r});if(!l)return jz;const c=r[l],u=oo(c.descriptor.id,n),d=p5(c,a);return v5({pageBorderBoxWithDroppableScroll:d,draggable:e,previousImpact:s,destination:c,insideDestination:u,afterCritical:o})||g5({pageBorderBoxWithDroppableScroll:d,draggable:e,destination:c,insideDestination:u,last:s.displaced,viewport:i,afterCritical:o})},hy=(t,e)=>({...t,[e.descriptor.id]:e});const b5=({previousImpact:t,impact:e,droppables:n})=>{const r=Vt(t),s=Vt(e);if(!r||r===s)return n;const i=n[r];if(!i.subject.withPlaceholder)return n;const o=o5(i);return hy(n,o)};var x5=({draggable:t,draggables:e,droppables:n,previousImpact:r,impact:s})=>{const i=b5({previousImpact:r,impact:s,droppables:n}),o=Vt(s);if(!o)return i;const a=n[o];if(ao(t,a)||a.subject.withPlaceholder)return i;const l=H_(a,t,e);return hy(i,l)},ea=({state:t,clientSelection:e,dimensions:n,viewport:r,impact:s,scrollJumpRequest:i})=>{const o=r||t.viewport,a=n||t.dimensions,l=e||t.current.client.selection,c=zt(l,t.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:rt(t.initial.client.borderBoxCenter,c)},d={selection:rt(u.selection,o.scroll.current),borderBoxCenter:rt(u.borderBoxCenter,o.scroll.current),offset:rt(u.offset,o.scroll.diff.value)},h={client:u,page:d};if(t.phase==="COLLECTING")return{...t,dimensions:a,viewport:o,current:h};const f=a.draggables[t.critical.draggable.id],m=s||K_({pageOffset:d.offset,draggable:f,draggables:a.draggables,droppables:a.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),g=x5({draggable:f,impact:m,previousImpact:t.impact,draggables:a.draggables,droppables:a.droppables});return{...t,current:h,dimensions:{draggables:a.draggables,droppables:g},impact:m,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function w5(t,e){return t.map(n=>e[n])}var J_=({impact:t,viewport:e,draggables:n,destination:r,forceShouldAnimate:s})=>{const i=t.displaced,o=w5(i.all,n),a=Pa({afterDragging:o,destination:r,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:s,last:i});return{...t,displaced:a}},Y_=({impact:t,draggable:e,droppable:n,draggables:r,viewport:s,afterCritical:i})=>{const o=Pd({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:i});return dy({pageBorderBoxCenter:o,draggable:e,viewport:s})},Q_=({state:t,dimensions:e,viewport:n})=>{t.movementMode!=="SNAP"&&D();const r=t.impact,s=n||t.viewport,i=e||t.dimensions,{draggables:o,droppables:a}=i,l=o[t.critical.draggable.id],c=Vt(r);c||D();const u=a[c],d=J_({impact:r,viewport:s,destination:u,draggables:o}),h=Y_({impact:d,draggable:l,droppable:u,draggables:o,viewport:s,afterCritical:t.afterCritical});return ea({impact:d,clientSelection:h,state:t,dimensions:i,viewport:s})},k5=t=>({index:t.index,droppableId:t.droppableId}),X_=({draggable:t,home:e,draggables:n,viewport:r})=>{const s=Za(e.axis,t.displaceBy),i=oo(e.descriptor.id,n),o=i.indexOf(t);o===-1&&D();const a=i.slice(o+1),l=a.reduce((h,f)=>(h[f.descriptor.id]=!0,h),{}),c={inVirtualList:e.descriptor.mode==="virtual",displacedBy:s,effected:l};return{impact:{displaced:Pa({afterDragging:a,destination:e,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:k5(t.descriptor)}},afterCritical:c}},S5=(t,e)=>({draggables:t.draggables,droppables:hy(t.droppables,e)}),E5=({draggable:t,offset:e,initialWindowScroll:n})=>{const r=Du(t.client,e),s=Lu(r,n);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:s}},C5=t=>{const e=t.frame;return e||D(),e},_5=({additions:t,updatedDroppables:e,viewport:n})=>{const r=n.scroll.diff.value;return t.map(s=>{const i=s.descriptor.droppableId,o=e[i],l=C5(o).scroll.diff.value,c=rt(r,l);return E5({draggable:s,offset:c,initialWindowScroll:n.scroll.initial})})},N5=({state:t,published:e})=>{const n=e.modified.map(y=>{const b=t.dimensions.droppables[y.droppableId];return oy(b,y.scroll)}),r={...t.dimensions.droppables,...M_(n)},s=P_(_5({additions:e.additions,updatedDroppables:r,viewport:t.viewport})),i={...t.dimensions.draggables,...s};e.removals.forEach(y=>{delete i[y]});const o={droppables:r,draggables:i},a=Vt(t.impact),l=a?o.droppables[a]:null,c=o.draggables[t.critical.draggable.id],u=o.droppables[t.critical.droppable.id],{impact:d,afterCritical:h}=X_({draggable:c,home:u,draggables:i,viewport:t.viewport}),f=l&&l.isCombineEnabled?t.impact:d,m=K_({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:f,viewport:t.viewport,afterCritical:h}),g={...t,phase:"DRAGGING",impact:m,onLiftImpact:d,dimensions:o,afterCritical:h,forceShouldAnimate:!1};return t.phase==="COLLECTING"?g:{...g,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const Qp=t=>t.movementMode==="SNAP",Qh=(t,e,n)=>{const r=S5(t.dimensions,e);return!Qp(t)||n?ea({state:t,dimensions:r}):Q_({state:t,dimensions:r})};function Xh(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const sx={phase:"IDLE",completed:null,shouldFlush:!1};var T5=(t=sx,e)=>{if(e.type==="FLUSH")return{...sx,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&D();const{critical:n,clientSelection:r,viewport:s,dimensions:i,movementMode:o}=e.payload,a=i.draggables[n.draggable.id],l=i.droppables[n.droppable.id],c={selection:r,borderBoxCenter:a.client.borderBox.center,offset:Ge},u={client:c,page:{selection:rt(c.selection,s.scroll.initial),borderBoxCenter:rt(c.selection,s.scroll.initial),offset:rt(c.selection,s.scroll.diff.value)}},d=jd(i.droppables).every(g=>!g.isFixedOnPage),{impact:h,afterCritical:f}=X_({draggable:a,home:l,draggables:i.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:u,current:u,isWindowScrollAllowed:d,impact:h,afterCritical:f,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&D(),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||D(),N5({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;ls(t)||D();const{client:n}=e.payload;return $r(n,t.current.client.selection)?t:ea({state:t,clientSelection:n,impact:Qp(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Xh(t);ls(t)||D();const{id:n,newScroll:r}=e.payload,s=t.dimensions.droppables[n];if(!s)return t;const i=oy(s,r);return Qh(t,i,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;ls(t)||D();const{id:n,isEnabled:r}=e.payload,s=t.dimensions.droppables[n];s||D(),s.isEnabled===r&&D();const i={...s,isEnabled:r};return Qh(t,i,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;ls(t)||D();const{id:n,isCombineEnabled:r}=e.payload,s=t.dimensions.droppables[n];s||D(),s.isCombineEnabled===r&&D();const i={...s,isCombineEnabled:r};return Qh(t,i,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;ls(t)||D(),t.isWindowScrollAllowed||D();const n=e.payload.newScroll;if($r(t.viewport.scroll.current,n))return Xh(t);const r=F_(t.viewport,n);return Qp(t)?Q_({state:t,viewport:r}):ea({state:t,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ls(t))return t;const n=e.payload.maxScroll;if($r(n,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:n}};return{...t,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&D();const n=u5({state:t,type:e.type});return n?ea({state:t,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const n=e.payload.reason;return t.phase!=="COLLECTING"&&D(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(e.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:s}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||D(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:s,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:n}=e.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return t};function le(t,e){return t instanceof Object&&"type"in t&&t.type===e}const A5=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),O5=t=>({type:"LIFT",payload:t}),I5=t=>({type:"INITIAL_PUBLISH",payload:t}),j5=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),R5=()=>({type:"COLLECTION_STARTING",payload:null}),M5=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),P5=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),D5=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),Z_=t=>({type:"MOVE",payload:t}),L5=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),$5=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),B5=()=>({type:"MOVE_UP",payload:null}),z5=()=>({type:"MOVE_DOWN",payload:null}),F5=()=>({type:"MOVE_RIGHT",payload:null}),U5=()=>({type:"MOVE_LEFT",payload:null}),fy=()=>({type:"FLUSH",payload:null}),V5=t=>({type:"DROP_ANIMATE",payload:t}),py=t=>({type:"DROP_COMPLETE",payload:t}),eN=t=>({type:"DROP",payload:t}),H5=t=>({type:"DROP_PENDING",payload:t}),tN=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var W5=t=>({getState:e,dispatch:n})=>r=>s=>{if(!le(s,"LIFT")){r(s);return}const{id:i,clientSelection:o,movementMode:a}=s.payload,l=e();l.phase==="DROP_ANIMATING"&&n(py({completed:l.completed})),e().phase!=="IDLE"&&D(),n(fy()),n(A5({draggableId:i,movementMode:a}));const u={draggableId:i,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:d,dimensions:h,viewport:f}=t.startPublishing(u);n(I5({critical:d,dimensions:h,clientSelection:o,movementMode:a,viewport:f}))},q5=t=>()=>e=>n=>{le(n,"INITIAL_PUBLISH")&&t.dragging(),le(n,"DROP_ANIMATE")&&t.dropping(n.payload.completed.result.reason),(le(n,"FLUSH")||le(n,"DROP_COMPLETE"))&&t.resting(),e(n)};const my={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Da={opacity:{drop:0,combining:.7},scale:{drop:.75}},nN={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ts=`${nN.outOfTheWay}s ${my.outOfTheWay}`,ta={fluid:`opacity ${ts}`,snap:`transform ${ts}, opacity ${ts}`,drop:t=>{const e=`${t}s ${my.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${ts}`,placeholder:`height ${ts}, width ${ts}, margin ${ts}`},ix=t=>$r(t,Ge)?void 0:`translate(${t.x}px, ${t.y}px)`,Xp={moveTo:ix,drop:(t,e)=>{const n=ix(t);if(n)return e?`${n} scale(${Da.scale.drop})`:n}},{minDropTime:Zp,maxDropTime:rN}=nN,G5=rN-Zp,ox=1500,K5=.6;var J5=({current:t,destination:e,reason:n})=>{const r=Ra(t,e);if(r<=0)return Zp;if(r>=ox)return rN;const s=r/ox,i=Zp+G5*s,o=n==="CANCEL"?i*K5:i;return Number(o.toFixed(2))},Y5=({impact:t,draggable:e,dimensions:n,viewport:r,afterCritical:s})=>{const{draggables:i,droppables:o}=n,a=Vt(t),l=a?o[a]:null,c=o[e.descriptor.droppableId],u=Y_({impact:t,draggable:e,draggables:i,afterCritical:s,droppable:l||c,viewport:r});return zt(u,e.client.borderBox.center)},Q5=({draggables:t,reason:e,lastImpact:n,home:r,viewport:s,onLiftImpact:i})=>!n.at||e!=="DROP"?{impact:J_({draggables:t,impact:i,destination:r,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Ma},didDropInsideDroppable:!0};const X5=({getState:t,dispatch:e})=>n=>r=>{if(!le(r,"DROP")){n(r);return}const s=t(),i=r.payload.reason;if(s.phase==="COLLECTING"){e(H5({reason:i}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&D(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||D();const a=s.critical,l=s.dimensions,c=l.draggables[s.critical.draggable.id],{impact:u,didDropInsideDroppable:d}=Q5({reason:i,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=d?ay(u):null,f=d?Rd(u):null,m={index:a.draggable.index,droppableId:a.droppable.id},g={draggableId:c.descriptor.id,type:c.descriptor.type,source:m,reason:i,mode:s.movementMode,destination:h,combine:f},v=Y5({impact:u,draggable:c,dimensions:l,viewport:s.viewport,afterCritical:s.afterCritical}),y={critical:s.critical,afterCritical:s.afterCritical,result:g,impact:u};if(!(!$r(s.current.client.offset,v)||!!g.combine)){e(py({completed:y}));return}const x=J5({current:s.current.client.offset,destination:v,reason:i});e(V5({newHomeClientOffset:v,dropDuration:x,completed:y}))};var sN=()=>({x:window.pageXOffset,y:window.pageYOffset});function Z5(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function eF({onWindowScroll:t}){function e(){t(sN())}const n=ja(e),r=Z5(n);let s=Lr;function i(){return s!==Lr}function o(){i()&&D(),s=rn(window,[r])}function a(){i()||D(),n.cancel(),s(),s=Lr}return{start:o,stop:a,isActive:i}}const tF=t=>le(t,"DROP_COMPLETE")||le(t,"DROP_ANIMATE")||le(t,"FLUSH"),nF=t=>{const e=eF({onWindowScroll:n=>{t.dispatch(L5({newScroll:n}))}});return n=>r=>{!e.isActive()&&le(r,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&tF(r)&&e.stop(),n(r)}};var rF=t=>{let e=!1,n=!1;const r=setTimeout(()=>{n=!0}),s=i=>{e||n||(e=!0,t(i),clearTimeout(r))};return s.wasCalled=()=>e,s},sF=()=>{const t=[],e=s=>{const i=t.findIndex(a=>a.timerId===s);i===-1&&D();const[o]=t.splice(i,1);o.callback()};return{add:s=>{const i=setTimeout(()=>e(i)),o={timerId:i,callback:s};t.push(o)},flush:()=>{if(!t.length)return;const s=[...t];t.length=0,s.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const iF=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,oF=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,aF=(t,e)=>{if(t===e)return!0;const n=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,r=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return n&&r},wo=(t,e)=>{e()},Fl=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function Zh(t,e,n,r){if(!t){n(r(e));return}const s=rF(n);t(e,{announce:s}),s.wasCalled()||n(r(e))}var lF=(t,e)=>{const n=sF();let r=null;const s=(d,h)=>{r&&D(),wo("onBeforeCapture",()=>{const f=t().onBeforeCapture;f&&f({draggableId:d,mode:h})})},i=(d,h)=>{r&&D(),wo("onBeforeDragStart",()=>{const f=t().onBeforeDragStart;f&&f(Fl(d,h))})},o=(d,h)=>{r&&D();const f=Fl(d,h);r={mode:h,lastCritical:d,lastLocation:f.source,lastCombine:null},n.add(()=>{wo("onDragStart",()=>Zh(t().onDragStart,f,e,dc.onDragStart))})},a=(d,h)=>{const f=ay(h),m=Rd(h);r||D();const g=!aF(d,r.lastCritical);g&&(r.lastCritical=d);const v=!iF(r.lastLocation,f);v&&(r.lastLocation=f);const y=!oF(r.lastCombine,m);if(y&&(r.lastCombine=m),!g&&!v&&!y)return;const b={...Fl(d,r.mode),combine:m,destination:f};n.add(()=>{wo("onDragUpdate",()=>Zh(t().onDragUpdate,b,e,dc.onDragUpdate))})},l=()=>{r||D(),n.flush()},c=d=>{r||D(),r=null,wo("onDragEnd",()=>Zh(t().onDragEnd,d,e,dc.onDragEnd))};return{beforeCapture:s,beforeStart:i,start:o,update:a,flush:l,drop:c,abort:()=>{if(!r)return;const d={...Fl(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};c(d)}}},cF=(t,e)=>{const n=lF(t,e);return r=>s=>i=>{if(le(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(le(i,"INITIAL_PUBLISH")){const a=i.payload.critical;n.beforeStart(a,i.payload.movementMode),s(i),n.start(a,i.payload.movementMode);return}if(le(i,"DROP_COMPLETE")){const a=i.payload.completed.result;n.flush(),s(i),n.drop(a);return}if(s(i),le(i,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const uF=t=>e=>n=>{if(!le(n,"DROP_ANIMATION_FINISHED")){e(n);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&D(),t.dispatch(py({completed:r.completed}))},dF=t=>{let e=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)}return s=>i=>{if((le(i,"FLUSH")||le(i,"DROP_COMPLETE")||le(i,"DROP_ANIMATION_FINISHED"))&&r(),s(i),!le(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(tN())}};n=requestAnimationFrame(()=>{n=null,e=rn(window,[o])})}};var hF=t=>()=>e=>n=>{(le(n,"DROP_COMPLETE")||le(n,"FLUSH")||le(n,"DROP_ANIMATE"))&&t.stopPublishing(),e(n)},fF=t=>{let e=!1;return()=>n=>r=>{if(le(r,"INITIAL_PUBLISH")){e=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),t.tryRestoreFocusRecorded();return}if(n(r),!!e){if(le(r,"FLUSH")){e=!1,t.tryRestoreFocusRecorded();return}if(le(r,"DROP_COMPLETE")){e=!1;const s=r.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const pF=t=>le(t,"DROP_COMPLETE")||le(t,"DROP_ANIMATE")||le(t,"FLUSH");var mF=t=>e=>n=>r=>{if(pF(r)){t.stop(),n(r);return}if(le(r,"INITIAL_PUBLISH")){n(r);const s=e.getState();s.phase!=="DRAGGING"&&D(),t.start(s);return}n(r),t.scroll(e.getState())};const gF=t=>e=>n=>{if(e(n),!le(n,"PUBLISH_WHILE_DRAGGING"))return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(eN({reason:r.reason})))},yF=x_;var vF=({dimensionMarshal:t,focusMarshal:e,styleMarshal:n,getResponders:r,announce:s,autoScroller:i})=>b_(T5,yF(dB(q5(n),hF(t),W5(t),X5,uF,dF,gF,mF(i),nF,fF(e),cF(r,s))));const ef=()=>({additions:{},removals:{},modified:{}});function bF({registry:t,callbacks:e}){let n=ef(),r=null;const s=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:l,removals:c,modified:u}=n,d=Object.keys(l).map(m=>t.draggable.getById(m).getDimension(Ge)).sort((m,g)=>m.descriptor.index-g.descriptor.index),h=Object.keys(u).map(m=>{const v=t.droppable.getById(m).callbacks.getScrollWhileDragging();return{droppableId:m,scroll:v}}),f={additions:d,removals:Object.keys(c),modified:h};n=ef(),e.publish(f)}))};return{add:l=>{const c=l.descriptor.id;n.additions[c]=l,n.modified[l.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],s()},remove:l=>{const c=l.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],s()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=ef())}}}var iN=({scrollHeight:t,scrollWidth:e,height:n,width:r})=>{const s=zt({x:e,y:t},{x:r,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},oN=()=>{const t=document.documentElement;return t||D(),t},aN=()=>{const t=oN();return iN({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},xF=()=>{const t=sN(),e=aN(),n=t.y,r=t.x,s=oN(),i=s.clientWidth,o=s.clientHeight,a=r+i,l=n+o;return{frame:wn({top:n,left:r,right:a,bottom:l}),scroll:{initial:t,current:t,max:e,diff:{value:Ge,displacement:Ge}}}},wF=({critical:t,scrollOptions:e,registry:n})=>{const r=xF(),s=r.scroll.current,i=t.droppable,o=n.droppable.getAllByType(i.type).map(u=>u.callbacks.getDimensionAndWatchScroll(s,e)),a=n.draggable.getAllByType(t.draggable.type).map(u=>u.getDimension(s));return{dimensions:{draggables:P_(a),droppables:M_(o)},critical:t,viewport:r}};function ax(t,e,n){return!(n.descriptor.id===e.id||n.descriptor.type!==e.type||t.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var kF=(t,e)=>{let n=null;const r=bF({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=(h,f)=>{t.droppable.exists(h)||D(),n&&e.updateDroppableIsEnabled({id:h,isEnabled:f})},i=(h,f)=>{n&&(t.droppable.exists(h)||D(),e.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:f}))},o=(h,f)=>{n&&(t.droppable.exists(h)||D(),e.updateDroppableScroll({id:h,newScroll:f}))},a=(h,f)=>{n&&t.droppable.getById(h).callbacks.scroll(f)},l=()=>{if(!n)return;r.stop();const h=n.critical.droppable;t.droppable.getAllByType(h.type).forEach(f=>f.callbacks.dragStopped()),n.unsubscribe(),n=null},c=h=>{n||D();const f=n.critical.draggable;h.type==="ADDITION"&&ax(t,f,h.value)&&r.add(h.value),h.type==="REMOVAL"&&ax(t,f,h.value)&&r.remove(h.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:i,scrollDroppable:a,updateDroppableScroll:o,startPublishing:h=>{n&&D();const f=t.draggable.getById(h.draggableId),m=t.droppable.getById(f.descriptor.droppableId),g={draggable:f.descriptor,droppable:m.descriptor},v=t.subscribe(c);return n={critical:g,unsubscribe:v},wF({critical:g,registry:t,scrollOptions:h.scrollOptions})},stopPublishing:l}},lN=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",SF=t=>{window.scrollBy(t.x,t.y)};const EF=qe(t=>jd(t).filter(e=>!(!e.isEnabled||!e.frame))),CF=(t,e)=>EF(e).find(r=>(r.frame||D(),W_(r.frame.pageMarginBox)(t)))||null;var _F=({center:t,destination:e,droppables:n})=>{if(e){const s=n[e];return s.frame?s:null}return CF(t,n)};const La={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var NF=(t,e,n=()=>La)=>{const r=n(),s=t[e.size]*r.startFromPercentage,i=t[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:i}},cN=({startOfRange:t,endOfRange:e,current:n})=>{const r=e-t;return r===0?0:(n-t)/r},gy=1,TF=(t,e,n=()=>La)=>{const r=n();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return r.maxPixelScroll;if(t===e.startScrollingFrom)return gy;const i=1-cN({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),o=r.maxPixelScroll*r.ease(i);return Math.ceil(o)},AF=(t,e,n)=>{const r=n(),s=r.durationDampening.accelerateAt,i=r.durationDampening.stopDampeningAt,o=e,a=i,c=Date.now()-o;if(c>=i)return t;if(c<s)return gy;const u=cN({startOfRange:s,endOfRange:a,current:c}),d=t*r.ease(u);return Math.ceil(d)},lx=({distanceToEdge:t,thresholds:e,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i=TF(t,e,s);return i===0?0:r?Math.max(AF(i,n,s),gy):i},cx=({container:t,distanceToEdges:e,dragStartTime:n,axis:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=NF(t,r,i);return e[r.end]<e[r.start]?lx({distanceToEdge:e[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i}):-1*lx({distanceToEdge:e[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})},OF=({container:t,subject:e,proposedScroll:n})=>{const r=e.height>t.height,s=e.width>t.width;return!s&&!r?n:s&&r?null:{x:s?0:n.x,y:r?0:n.y}};const IF=R_(t=>t===0?0:t);var uN=({dragStartTime:t,container:e,subject:n,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},a=cx({container:e,distanceToEdges:o,dragStartTime:t,axis:ly,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),l=cx({container:e,distanceToEdges:o,dragStartTime:t,axis:$_,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),c=IF({x:l,y:a});if($r(c,Ge))return null;const u=OF({container:e,subject:n,proposedScroll:c});return u?$r(u,Ge)?null:u:null};const jF=R_(t=>t===0?0:t>0?1:-1),yy=(()=>{const t=(e,n)=>e<0?e:e>n?e-n:0;return({current:e,max:n,change:r})=>{const s=rt(e,r),i={x:t(s.x,n.x),y:t(s.y,n.y)};return $r(i,Ge)?null:i}})(),dN=({max:t,current:e,change:n})=>{const r={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},s=jF(n),i=yy({max:r,current:e,change:s});return!i||s.x!==0&&i.x===0||s.y!==0&&i.y===0},vy=(t,e)=>dN({current:t.scroll.current,max:t.scroll.max,change:e}),RF=(t,e)=>{if(!vy(t,e))return null;const n=t.scroll.max,r=t.scroll.current;return yy({current:r,max:n,change:e})},by=(t,e)=>{const n=t.frame;return n?dN({current:n.scroll.current,max:n.scroll.max,change:e}):!1},MF=(t,e)=>{const n=t.frame;return!n||!by(t,e)?null:yy({current:n.scroll.current,max:n.scroll.max,change:e})};var PF=({viewport:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=uN({dragStartTime:r,container:t.frame,subject:e,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return o&&vy(t,o)?o:null},DF=({droppable:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=t.frame;if(!o)return null;const a=uN({dragStartTime:r,container:o.pageMarginBox,subject:e,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return a&&by(t,a)?a:null},ux=({state:t,dragStartTime:e,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:s,getAutoScrollerOptions:i})=>{const o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const d=t.viewport,h=PF({dragStartTime:e,viewport:d,subject:l,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(h){r(h);return}}const c=_F({center:o,destination:Vt(t.impact),droppables:t.dimensions.droppables});if(!c)return;const u=DF({dragStartTime:e,droppable:c,subject:l,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});u&&s(c.descriptor.id,u)},LF=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n=()=>La})=>{const r=ja(t),s=ja(e);let i=null;const o=c=>{i||D();const{shouldUseTimeDampening:u,dragStartTime:d}=i;ux({state:c,scrollWindow:r,scrollDroppable:s,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:c=>{i&&D();const u=Date.now();let d=!1;const h=()=>{d=!0};ux({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:n}),i={dragStartTime:u,shouldUseTimeDampening:d},d&&o(c)},stop:()=>{i&&(r.cancel(),s.cancel(),i=null)},scroll:o}},$F=({move:t,scrollDroppable:e,scrollWindow:n})=>{const r=(a,l)=>{const c=rt(a.current.client.selection,l);t({client:c})},s=(a,l)=>{if(!by(a,l))return l;const c=MF(a,l);if(!c)return e(a.descriptor.id,l),null;const u=zt(l,c);return e(a.descriptor.id,u),zt(l,u)},i=(a,l,c)=>{if(!a||!vy(l,c))return c;const u=RF(l,c);if(!u)return n(c),null;const d=zt(c,u);return n(d),zt(c,d)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const c=Vt(a.impact);c||D();const u=s(a.dimensions.droppables[c],l);if(!u)return;const d=a.viewport,h=i(a.isWindowScrollAllowed,d,u);h&&r(a,h)}},BF=({scrollDroppable:t,scrollWindow:e,move:n,getAutoScrollerOptions:r})=>{const s=LF({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r}),i=$F({move:n,scrollWindow:e,scrollDroppable:t});return{scroll:l=>{if(!(r().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){s.scroll(l);return}l.scrollJumpRequest&&i(l)}},start:s.start,stop:s.stop}};const Ji="data-rfd",Yi=(()=>{const t=`${Ji}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),em=(()=>{const t=`${Ji}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),zF=(()=>{const t=`${Ji}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),dx={contextId:`${Ji}-scroll-container-context-id`},FF=t=>e=>`[${e}="${t}"]`,ko=(t,e)=>t.map(n=>{const r=n.styles[e];return r?`${n.selector} { ${r} }`:""}).join(" "),UF="pointer-events: none;";var VF=t=>{const e=FF(t),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Yi.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:UF,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${ta.outOfTheWay};
    `;return{selector:e(em.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),s={selector:e(zF.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ko(o,"always"),resting:ko(o,"resting"),dragging:ko(o,"dragging"),dropAnimating:ko(o,"dropAnimating"),userCancel:ko(o,"userCancel")}};const Ht=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?C.useLayoutEffect:C.useEffect,tf=()=>{const t=document.querySelector("head");return t||D(),t},hx=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function HF(t,e){const n=ie(()=>VF(t),[t]),r=C.useRef(null),s=C.useRef(null),i=q(qe(d=>{const h=s.current;h||D(),h.textContent=d}),[]),o=q(d=>{const h=r.current;h||D(),h.textContent=d},[]);Ht(()=>{!r.current&&!s.current||D();const d=hx(e),h=hx(e);return r.current=d,s.current=h,d.setAttribute(`${Ji}-always`,t),h.setAttribute(`${Ji}-dynamic`,t),tf().appendChild(d),tf().appendChild(h),o(n.always),i(n.resting),()=>{const f=m=>{const g=m.current;g||D(),tf().removeChild(g),m.current=null};f(r),f(s)}},[e,o,i,n.always,n.resting,t]);const a=q(()=>i(n.dragging),[i,n.dragging]),l=q(d=>{if(d==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),c=q(()=>{s.current&&i(n.resting)},[i,n.resting]);return ie(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function hN(t,e){return Array.from(t.querySelectorAll(e))}var fN=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function Dd(t){return t instanceof fN(t).HTMLElement}function WF(t,e){const n=`[${Yi.contextId}="${t}"]`,r=hN(document,n);if(!r.length)return null;const s=r.find(i=>i.getAttribute(Yi.draggableId)===e);return!s||!Dd(s)?null:s}function qF(t){const e=C.useRef({}),n=C.useRef(null),r=C.useRef(null),s=C.useRef(!1),i=q(function(h,f){const m={id:h,focus:f};return e.current[h]=m,function(){const v=e.current;v[h]!==m&&delete v[h]}},[]),o=q(function(h){const f=WF(t,h);f&&f!==document.activeElement&&f.focus()},[t]),a=q(function(h,f){n.current===h&&(n.current=f)},[]),l=q(function(){r.current||s.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const h=n.current;h&&o(h)}))},[o]),c=q(function(h){n.current=null;const f=document.activeElement;f&&f.getAttribute(Yi.draggableId)===h&&(n.current=h)},[]);return Ht(()=>(s.current=!0,function(){s.current=!1;const h=r.current;h&&cancelAnimationFrame(h)}),[]),ie(()=>({register:i,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[i,c,l,a])}function GF(){const t={draggables:{},droppables:{}},e=[];function n(d){return e.push(d),function(){const f=e.indexOf(d);f!==-1&&e.splice(f,1)}}function r(d){e.length&&e.forEach(h=>h(d))}function s(d){return t.draggables[d]||null}function i(d){const h=s(d);return h||D(),h}const o={register:d=>{t.draggables[d.descriptor.id]=d,r({type:"ADDITION",value:d})},update:(d,h)=>{const f=t.draggables[h.descriptor.id];f&&f.uniqueId===d.uniqueId&&(delete t.draggables[h.descriptor.id],t.draggables[d.descriptor.id]=d)},unregister:d=>{const h=d.descriptor.id,f=s(h);f&&d.uniqueId===f.uniqueId&&(delete t.draggables[h],t.droppables[d.descriptor.droppableId]&&r({type:"REMOVAL",value:d}))},getById:i,findById:s,exists:d=>!!s(d),getAllByType:d=>Object.values(t.draggables).filter(h=>h.descriptor.type===d)};function a(d){return t.droppables[d]||null}function l(d){const h=a(d);return h||D(),h}const c={register:d=>{t.droppables[d.descriptor.id]=d},unregister:d=>{const h=a(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete t.droppables[d.descriptor.id]},getById:l,findById:a,exists:d=>!!a(d),getAllByType:d=>Object.values(t.droppables).filter(h=>h.descriptor.type===d)};function u(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:c,subscribe:n,clean:u}}function KF(){const t=ie(GF,[]);return C.useEffect(()=>function(){t.clean()},[t]),t}var xy=ae.createContext(null),Uu=()=>{const t=document.body;return t||D(),t};const JF={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},YF=t=>`rfd-announcement-${t}`;function QF(t){const e=ie(()=>YF(t),[t]),n=C.useRef(null);return C.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=e,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),$u(i.style,JF),Uu().appendChild(i),function(){setTimeout(function(){const l=Uu();l.contains(i)&&l.removeChild(i),i===n.current&&(n.current=null)})}},[e]),q(s=>{const i=n.current;if(i){i.textContent=s;return}},[])}const XF={separator:"::"};function wy(t,e=XF){const n=ae.useId();return ie(()=>`${t}${e.separator}${n}`,[e.separator,t,n])}function ZF({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function e6({contextId:t,text:e}){const n=wy("hidden-text",{separator:"-"}),r=ie(()=>ZF({contextId:t,uniqueId:n}),[n,t]);return C.useEffect(function(){const i=document.createElement("div");return i.id=r,i.textContent=e,i.style.display="none",Uu().appendChild(i),function(){const a=Uu();a.contains(i)&&a.removeChild(i)}},[r,e]),r}var Ld=ae.createContext(null);function pN(t){const e=C.useRef(t);return C.useEffect(()=>{e.current=t}),e}function t6(){let t=null;function e(){return!!t}function n(o){return o===t}function r(o){t&&D();const a={abandon:o};return t=a,a}function s(){t||D(),t=null}function i(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:n,claim:r,release:s,tryAbandon:i}}function $a(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const n6=9,r6=13,ky=27,mN=32,s6=33,i6=34,o6=35,a6=36,l6=37,c6=38,u6=39,d6=40,h6={[r6]:!0,[n6]:!0};var gN=t=>{h6[t.keyCode]&&t.preventDefault()};const $d=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})(),yN=0,fx=5;function f6(t,e){return Math.abs(e.x-t.x)>=fx||Math.abs(e.y-t.y)>=fx}const px={type:"IDLE"};function p6({cancel:t,completed:e,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:s=>{const{button:i,clientX:o,clientY:a}=s;if(i!==yN)return;const l={x:o,y:a},c=n();if(c.type==="DRAGGING"){s.preventDefault(),c.actions.move(l);return}c.type!=="PENDING"&&D();const u=c.point;if(!f6(u,l))return;s.preventDefault();const d=c.actions.fluidLift(l);r({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:s=>{const i=n();if(i.type!=="DRAGGING"){t();return}s.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),t()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){t();return}if(s.keyCode===ky){s.preventDefault(),t();return}gN(s)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:s=>{const i=n();if(i.type==="IDLE"&&D(),i.actions.shouldRespectForcePress()){t();return}s.preventDefault()}},{eventName:$d,fn:t}]}function m6(t){const e=C.useRef(px),n=C.useRef(Lr),r=ie(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==yN||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const h=t.findClosestDraggableId(d);if(!h)return;const f=t.tryGetLock(h,o,{sourceEvent:d});if(!f)return;d.preventDefault();const m={x:d.clientX,y:d.clientY};n.current(),c(f,m)}}),[t]),s=ie(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const d=t.findClosestDraggableId(u);if(!d)return;const h=t.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||t.canGetLock(d)&&u.preventDefault())}}),[t]),i=q(function(){const d={passive:!1,capture:!0};n.current=rn(window,[s,r],d)},[s,r]),o=q(()=>{e.current.type!=="IDLE"&&(e.current=px,n.current(),i())},[i]),a=q(()=>{const u=e.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),l=q(function(){const d={capture:!0,passive:!1},h=p6({cancel:a,completed:o,getPhase:()=>e.current,setPhase:f=>{e.current=f}});n.current=rn(window,h,d)},[a,o]),c=q(function(d,h){e.current.type!=="IDLE"&&D(),e.current={type:"PENDING",point:h,actions:d},l()},[l]);Ht(function(){return i(),function(){n.current()}},[i])}function g6(){}const y6={[i6]:!0,[s6]:!0,[a6]:!0,[o6]:!0};function v6(t,e){function n(){e(),t.cancel()}function r(){e(),t.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===ky){s.preventDefault(),n();return}if(s.keyCode===mN){s.preventDefault(),r();return}if(s.keyCode===d6){s.preventDefault(),t.moveDown();return}if(s.keyCode===c6){s.preventDefault(),t.moveUp();return}if(s.keyCode===u6){s.preventDefault(),t.moveRight();return}if(s.keyCode===l6){s.preventDefault(),t.moveLeft();return}if(y6[s.keyCode]){s.preventDefault();return}gN(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:$d,fn:n}]}function b6(t){const e=C.useRef(g6),n=ie(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==mN)return;const o=t.findClosestDraggableId(i);if(!o)return;const a=t.tryGetLock(o,u,{sourceEvent:i});if(!a)return;i.preventDefault();let l=!0;const c=a.snapLift();e.current();function u(){l||D(),l=!1,e.current(),r()}e.current=rn(window,v6(c,u),{capture:!0,passive:!1})}}),[t]),r=q(function(){const i={passive:!1,capture:!0};e.current=rn(window,[n],i)},[n]);Ht(function(){return r(),function(){e.current()}},[r])}const nf={type:"IDLE"},x6=120,w6=.15;function k6({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(e().type!=="DRAGGING"){t();return}n.keyCode===ky&&n.preventDefault(),t()}},{eventName:$d,fn:t}]}function S6({cancel:t,completed:e,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const s=n();if(s.type!=="DRAGGING"){t();return}s.hasMoved=!0;const{clientX:i,clientY:o}=r.touches[0],a={x:i,y:o};r.preventDefault(),s.actions.move(a)}},{eventName:"touchend",fn:r=>{const s=n();if(s.type!=="DRAGGING"){t();return}r.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const s=n();s.type==="IDLE"&&D();const i=r.touches[0];if(!i||!(i.force>=w6))return;const a=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){a&&t();return}if(a){if(s.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:$d,fn:t}]}function E6(t){const e=C.useRef(nf),n=C.useRef(Lr),r=q(function(){return e.current},[]),s=q(function(f){e.current=f},[]),i=ie(()=>({eventName:"touchstart",fn:function(f){if(f.defaultPrevented)return;const m=t.findClosestDraggableId(f);if(!m)return;const g=t.tryGetLock(m,a,{sourceEvent:f});if(!g)return;const v=f.touches[0],{clientX:y,clientY:b}=v,x={x:y,y:b};n.current(),d(g,x)}}),[t]),o=q(function(){const f={capture:!0,passive:!1};n.current=rn(window,[i],f)},[i]),a=q(()=>{const h=e.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(nf),n.current(),o())},[o,s]),l=q(()=>{const h=e.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),c=q(function(){const f={capture:!0,passive:!1},m={cancel:l,completed:a,getPhase:r},g=rn(window,S6(m),f),v=rn(window,k6(m),f);n.current=function(){g(),v()}},[l,r,a]),u=q(function(){const f=r();f.type!=="PENDING"&&D();const m=f.actions.fluidLift(f.point);s({type:"DRAGGING",actions:m,hasMoved:!1})},[r,s]),d=q(function(f,m){r().type!=="IDLE"&&D();const g=setTimeout(u,x6);s({type:"PENDING",point:m,actions:f,longPressTimerId:g}),c()},[c,r,s,u]);Ht(function(){return o(),function(){n.current();const m=r();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),s(nf))}},[r,o,s]),Ht(function(){return rn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const C6=["input","button","textarea","select","option","optgroup","video","audio"];function vN(t,e){if(e==null)return!1;if(C6.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===t?!1:vN(t,e.parentElement)}function _6(t,e){const n=e.target;return Dd(n)?vN(t,n):!1}var N6=t=>wn(t.getBoundingClientRect()).center;function T6(t){return t instanceof fN(t).Element}const A6=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function bN(t,e){return t==null?null:t[A6](e)?t:bN(t.parentElement,e)}function O6(t,e){return t.closest?t.closest(e):bN(t,e)}function I6(t){return`[${Yi.contextId}="${t}"]`}function j6(t,e){const n=e.target;if(!T6(n))return null;const r=I6(t),s=O6(n,r);return!s||!Dd(s)?null:s}function R6(t,e){const n=j6(t,e);return n?n.getAttribute(Yi.draggableId):null}function M6(t,e){const n=`[${em.contextId}="${t}"]`,s=hN(document,n).find(i=>i.getAttribute(em.id)===e);return!s||!Dd(s)?null:s}function P6(t){t.preventDefault()}function Ul({expected:t,phase:e,isLockActive:n,shouldWarn:r}){return!(!n()||t!==e)}function xN({lockAPI:t,store:e,registry:n,draggableId:r}){if(t.isClaimed())return!1;const s=n.draggable.findById(r);return!(!s||!s.options.isEnabled||!lN(e.getState(),r))}function D6({lockAPI:t,contextId:e,store:n,registry:r,draggableId:s,forceSensorStop:i,sourceEvent:o}){if(!xN({lockAPI:t,store:n,registry:r,draggableId:s}))return null;const l=r.draggable.getById(s),c=M6(e,l.descriptor.id);if(!c||o&&!l.options.canDragInteractiveElements&&_6(c,o))return null;const u=t.claim(i||Lr);let d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function f(){return t.isActive(u)}function m(w,S){Ul({expected:w,phase:d,isLockActive:f,shouldWarn:!0})&&n.dispatch(S())}const g=m.bind(null,"DRAGGING");function v(w){function S(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(S(),D()),n.dispatch(O5(w.liftActionArgs)),d="DRAGGING";function E(_,N={shouldBlockNextClick:!1}){if(w.cleanup(),N.shouldBlockNextClick){const T=rn(window,[{eventName:"click",fn:P6,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}S(),n.dispatch(eN({reason:_}))}return{isActive:()=>Ul({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:h,drop:_=>E("DROP",_),cancel:_=>E("CANCEL",_),...w.actions}}function y(w){const S=ja(_=>{g(()=>Z_({client:_}))});return{...v({liftActionArgs:{id:s,clientSelection:w,movementMode:"FLUID"},cleanup:()=>S.cancel(),actions:{move:S}}),move:S}}function b(){const w={moveUp:()=>g(B5),moveRight:()=>g(F5),moveDown:()=>g(z5),moveLeft:()=>g(U5)};return v({liftActionArgs:{id:s,clientSelection:N6(c),movementMode:"SNAP"},cleanup:Lr,actions:w})}function x(){Ul({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&t.release()}return{isActive:()=>Ul({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:y,snapLift:b,abort:x}}const L6=[m6,b6,E6];function $6({contextId:t,store:e,registry:n,customSensors:r,enableDefaultSensors:s}){const i=[...s?L6:[],...r||[]],o=C.useState(()=>t6())[0],a=q(function(v,y){$a(v)&&!$a(y)&&o.tryAbandon()},[o]);Ht(function(){let v=e.getState();return e.subscribe(()=>{const b=e.getState();a(v,b),v=b})},[o,e,a]),Ht(()=>o.tryAbandon,[o.tryAbandon]);const l=q(g=>xN({lockAPI:o,registry:n,store:e,draggableId:g}),[o,n,e]),c=q((g,v,y)=>D6({lockAPI:o,registry:n,contextId:t,store:e,draggableId:g,forceSensorStop:v||null,sourceEvent:y&&y.sourceEvent?y.sourceEvent:null}),[t,o,n,e]),u=q(g=>R6(t,g),[t]),d=q(g=>{const v=n.draggable.findById(g);return v?v.options:null},[n.draggable]),h=q(function(){o.isClaimed()&&(o.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(fy()))},[o,e]),f=q(()=>o.isClaimed(),[o]),m=ie(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:f}),[l,c,u,d,h,f]);for(let g=0;g<i.length;g++)i[g](m)}const B6=t=>({onBeforeCapture:e=>{const n=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};od.flushSync(n)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),z6=t=>({...La,...t.autoScrollerOptions,durationDampening:{...La.durationDampening,...t.autoScrollerOptions}});function So(t){return t.current||D(),t.current}function F6(t){const{contextId:e,setCallbacks:n,sensors:r,nonce:s,dragHandleUsageInstructions:i}=t,o=C.useRef(null),a=pN(t),l=q(()=>B6(a.current),[a]),c=q(()=>z6(a.current),[a]),u=QF(e),d=e6({contextId:e,text:i}),h=HF(e,s),f=q(T=>{So(o).dispatch(T)},[]),m=ie(()=>Ub({publishWhileDragging:j5,updateDroppableScroll:M5,updateDroppableIsEnabled:P5,updateDroppableIsCombineEnabled:D5,collectionStarting:R5},f),[f]),g=KF(),v=ie(()=>kF(g,m),[g,m]),y=ie(()=>BF({scrollWindow:SF,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:c,...Ub({move:Z_},f)}),[v.scrollDroppable,f,c]),b=qF(e),x=ie(()=>vF({announce:u,autoScroller:y,dimensionMarshal:v,focusMarshal:b,getResponders:l,styleMarshal:h}),[u,y,v,b,l,h]);o.current=x;const k=q(()=>{const T=So(o);T.getState().phase!=="IDLE"&&T.dispatch(fy())},[]),w=q(()=>{const T=So(o).getState();return T.phase==="DROP_ANIMATING"?!0:T.phase==="IDLE"?!1:T.isDragging},[]),S=ie(()=>({isDragging:w,tryAbort:k}),[w,k]);n(S);const E=q(T=>lN(So(o).getState(),T),[]),_=q(()=>ls(So(o).getState()),[]),N=ie(()=>({marshal:v,focus:b,contextId:e,canLift:E,isMovementAllowed:_,dragHandleUsageInstructionsId:d,registry:g}),[e,v,d,b,E,_,g]);return $6({contextId:e,store:x,registry:g,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),C.useEffect(()=>k,[k]),ae.createElement(Ld.Provider,{value:N},ae.createElement(hz,{context:xy,store:x},t.children))}function U6(){return ae.useId()}function V6(t){const e=U6(),n=t.dragHandleUsageInstructions||dc.dragHandleUsageInstructions;return ae.createElement(bz,null,r=>ae.createElement(F6,{nonce:t.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const mx={dragging:5e3,dropAnimating:4500},H6=(t,e)=>e?ta.drop(e.duration):t?ta.snap:ta.fluid,W6=(t,e)=>{if(t)return e?Da.opacity.drop:Da.opacity.combining},q6=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function G6(t){const n=t.dimension.client,{offset:r,combineWith:s,dropping:i}=t,o=!!s,a=q6(t),l=!!i,c=l?Xp.drop(r,o):Xp.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:H6(a,i),transform:c,opacity:W6(o,l),zIndex:l?mx.dropAnimating:mx.dragging,pointerEvents:"none"}}function K6(t){return{transform:Xp.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function J6(t){return t.type==="DRAGGING"?G6(t):K6(t)}function Y6(t,e,n=Ge){const r=window.getComputedStyle(e),s=e.getBoundingClientRect(),i=N_(s,r),o=Lu(i,n),a={client:i,tagName:e.tagName.toLowerCase(),display:r.display},l={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:t,placeholder:a,displaceBy:l,client:i,page:o}}function Q6(t){const e=wy("draggable"),{descriptor:n,registry:r,getDraggableRef:s,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}=t,l=ie(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:a}),[i,a,o]),c=q(f=>{const m=s();return m||D(),Y6(n,m,f)},[n,s]),u=ie(()=>({uniqueId:e,descriptor:n,options:l,getDimension:c}),[n,c,l,e]),d=C.useRef(u),h=C.useRef(!0);Ht(()=>(r.draggable.register(d.current),()=>r.draggable.unregister(d.current)),[r.draggable]),Ht(()=>{if(h.current){h.current=!1;return}const f=d.current;d.current=u,r.draggable.update(u,f)},[u,r.draggable])}var Sy=ae.createContext(null);function Vu(t){const e=C.useContext(t);return e||D(),e}function X6(t){t.preventDefault()}const Z6=t=>{const e=C.useRef(null),n=q((S=null)=>{e.current=S},[]),r=q(()=>e.current,[]),{contextId:s,dragHandleUsageInstructionsId:i,registry:o}=Vu(Ld),{type:a,droppableId:l}=Vu(Sy),c=ie(()=>({id:t.draggableId,index:t.index,type:a,droppableId:l}),[t.draggableId,t.index,a,l]),{children:u,draggableId:d,isEnabled:h,shouldRespectForcePress:f,canDragInteractiveElements:m,isClone:g,mapped:v,dropAnimationFinished:y}=t;if(!g){const S=ie(()=>({descriptor:c,registry:o,getDraggableRef:r,canDragInteractiveElements:m,shouldRespectForcePress:f,isEnabled:h}),[c,o,r,m,f,h]);Q6(S)}const b=ie(()=>h?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:X6}:null,[s,i,d,h]),x=q(S=>{v.type==="DRAGGING"&&v.dropping&&S.propertyName==="transform"&&od.flushSync(y)},[y,v]),k=ie(()=>{const S=J6(v),E=v.type==="DRAGGING"&&v.dropping?x:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":d,style:S,onTransitionEnd:E},dragHandleProps:b}},[s,b,d,v,x,n]),w=ie(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return ae.createElement(ae.Fragment,null,u(k,v.snapshot,w))};var wN=(t,e)=>t===e,kN=t=>{const{combine:e,destination:n}=t;return n?n.droppableId:e?e.droppableId:null};const eU=t=>t.combine?t.combine.draggableId:null,tU=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function nU(){const t=qe((s,i)=>({x:s,y:i})),e=qe((s,i,o=null,a=null,l=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!l,dropAnimation:l,mode:s,draggingOver:o,combineWith:a,combineTargetFor:null})),n=qe((s,i,o,a,l=null,c=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:i,offset:s,dimension:o,forceShouldAnimate:u,snapshot:e(i,a,l,c,null)}}));return(s,i)=>{if($a(s)){if(s.critical.draggable.id!==i.draggableId)return null;const o=s.current.client.offset,a=s.dimensions.draggables[i.draggableId],l=Vt(s.impact),c=tU(s.impact),u=s.forceShouldAnimate;return n(t(o.x,o.y),s.movementMode,a,i.isClone,l,c,u)}if(s.phase==="DROP_ANIMATING"){const o=s.completed;if(o.result.draggableId!==i.draggableId)return null;const a=i.isClone,l=s.dimensions.draggables[i.draggableId],c=o.result,u=c.mode,d=kN(c),h=eU(c),m={duration:s.dropDuration,curve:my.drop,moveTo:s.newHomeClientOffset,opacity:h?Da.opacity.drop:null,scale:h?Da.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:l,dropping:m,draggingOver:d,combineWith:h,mode:u,forceShouldAnimate:null,snapshot:e(u,a,d,h,m)}}}return null}}function SN(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const rU={mapped:{type:"SECONDARY",offset:Ge,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:SN(null)}};function sU(){const t=qe((o,a)=>({x:o,y:a})),e=qe(SN),n=qe((o,a=null,l)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:e(a)}})),r=o=>o?n(Ge,o,!0):null,s=(o,a,l,c)=>{const u=l.displaced.visible[o],d=!!(c.inVirtualList&&c.effected[o]),h=Rd(l),f=h&&h.draggableId===o?a:null;if(!u){if(!d)return r(f);if(l.displaced.invisible[o])return null;const v=io(c.displacedBy.point),y=t(v.x,v.y);return n(y,f,!0)}if(d)return r(f);const m=l.displacedBy.point,g=t(m.x,m.y);return n(g,f,u.shouldAnimate)};return(o,a)=>{if($a(o))return o.critical.draggable.id===a.draggableId?null:s(a.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const l=o.completed;return l.result.draggableId===a.draggableId?null:s(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const iU=()=>{const t=nU(),e=sU();return(r,s)=>t(r,s)||e(r,s)||rU},oU={dropAnimationFinished:tN},aU=__(iU,oU,null,{context:xy,areStatePropsEqual:wN})(Z6);function EN(t){return Vu(Sy).isUsingCloneFor===t.draggableId&&!t.isClone?null:ae.createElement(aU,t)}function lU(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,n=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return ae.createElement(EN,$u({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const CN=t=>e=>t===e,cU=CN("scroll"),uU=CN("auto"),gx=(t,e)=>e(t.overflowX)||e(t.overflowY),dU=t=>{const e=window.getComputedStyle(t),n={overflowX:e.overflowX,overflowY:e.overflowY};return gx(n,cU)||gx(n,uU)},hU=()=>!1,_N=t=>t==null?null:t===document.body?hU()?t:null:t===document.documentElement?null:dU(t)?t:_N(t.parentElement);var tm=t=>({x:t.scrollLeft,y:t.scrollTop});const NN=t=>t?window.getComputedStyle(t).position==="fixed"?!0:NN(t.parentElement):!1;var fU=t=>{const e=_N(t),n=NN(t);return{closestScrollable:e,isFixedOnPage:n}},pU=({descriptor:t,isEnabled:e,isCombineEnabled:n,isFixedOnPage:r,direction:s,client:i,page:o,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:f}=a,m=iN({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:f,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:m,diff:{value:Ge,displacement:Ge}}}})(),c=s==="vertical"?ly:$_,u=Ki({page:o,withPlaceholder:null,axis:c,frame:l});return{descriptor:t,isCombineEnabled:n,isFixedOnPage:r,axis:c,isEnabled:e,client:i,page:o,frame:l,subject:u}};const mU=(t,e)=>{const n=T_(t);if(!e||t!==e)return n;const r=n.paddingBox.top-e.scrollTop,s=n.paddingBox.left-e.scrollLeft,i=r+e.scrollHeight,o=s+e.scrollWidth,l=sy({top:r,right:o,bottom:i,left:s},n.border);return iy({borderBox:l,margin:n.margin,border:n.border,padding:n.padding})};var gU=({ref:t,descriptor:e,env:n,windowScroll:r,direction:s,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:a})=>{const l=n.closestScrollable,c=mU(t,l),u=Lu(c,r),d=(()=>{if(!l)return null;const f=T_(l),m={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:f,page:Lu(f,r),scroll:tm(l),scrollSize:m,shouldClipSubject:a}})();return pU({descriptor:e,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:s,client:c,page:u,closest:d})};const yU={passive:!1},vU={passive:!0};var yx=t=>t.shouldPublishImmediately?yU:vU;const Vl=t=>t&&t.env.closestScrollable||null;function bU(t){const e=C.useRef(null),n=Vu(Ld),r=wy("droppable"),{registry:s,marshal:i}=n,o=pN(t),a=ie(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),l=C.useRef(a),c=ie(()=>qe((k,w)=>{e.current||D();const S={x:k,y:w};i.updateDroppableScroll(a.id,S)}),[a.id,i]),u=q(()=>{const k=e.current;return!k||!k.env.closestScrollable?Ge:tm(k.env.closestScrollable)},[]),d=q(()=>{const k=u();c(k.x,k.y)},[u,c]),h=ie(()=>ja(d),[d]),f=q(()=>{const k=e.current,w=Vl(k);if(k&&w||D(),k.scrollOptions.shouldPublishImmediately){d();return}h()},[h,d]),m=q((k,w)=>{e.current&&D();const S=o.current,E=S.getDroppableRef();E||D();const _=fU(E),N={ref:E,descriptor:a,env:_,scrollOptions:w};e.current=N;const T=gU({ref:E,descriptor:a,env:_,windowScroll:k,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),P=_.closestScrollable;return P&&(P.setAttribute(dx.contextId,n.contextId),P.addEventListener("scroll",f,yx(N.scrollOptions))),T},[n.contextId,a,f,o]),g=q(()=>{const k=e.current,w=Vl(k);return k&&w||D(),tm(w)},[]),v=q(()=>{const k=e.current;k||D();const w=Vl(k);e.current=null,w&&(h.cancel(),w.removeAttribute(dx.contextId),w.removeEventListener("scroll",f,yx(k.scrollOptions)))},[f,h]),y=q(k=>{const w=e.current;w||D();const S=Vl(w);S||D(),S.scrollTop+=k.y,S.scrollLeft+=k.x},[]),b=ie(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:v,scroll:y}),[v,m,g,y]),x=ie(()=>({uniqueId:r,descriptor:a,callbacks:b}),[b,a,r]);Ht(()=>(l.current=x.descriptor,s.droppable.register(x),()=>{e.current&&v(),s.droppable.unregister(x)}),[b,a,v,x,i,s.droppable]),Ht(()=>{e.current&&i.updateDroppableIsEnabled(l.current.id,!t.isDropDisabled)},[t.isDropDisabled,i]),Ht(()=>{e.current&&i.updateDroppableIsCombineEnabled(l.current.id,t.isCombineEnabled)},[t.isCombineEnabled,i])}function rf(){}const vx={width:0,height:0,margin:_z},xU=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>t||n==="close"?vx:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},wU=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>{const r=xU({isAnimatingOpenOnMount:t,placeholder:e,animate:n});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?ta.placeholder:null}},kU=t=>{const e=C.useRef(null),n=q(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:s,onClose:i,contextId:o}=t,[a,l]=C.useState(t.animate==="open");C.useEffect(()=>a?r!=="open"?(n(),l(!1),rf):e.current?rf:(e.current=setTimeout(()=>{e.current=null,l(!1)}),n):rf,[r,a,n]);const c=q(d=>{d.propertyName==="height"&&(s(),r==="close"&&i())},[r,i,s]),u=wU({isAnimatingOpenOnMount:a,animate:t.animate,placeholder:t.placeholder});return ae.createElement(t.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":o,onTransitionEnd:c,ref:t.innerRef})};var SU=ae.memo(kU);class EU extends ae.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,n){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const CU=t=>{const e=C.useContext(Ld);e||D();const{contextId:n,isMovementAllowed:r}=e,s=C.useRef(null),i=C.useRef(null),{children:o,droppableId:a,type:l,mode:c,direction:u,ignoreContainerClipping:d,isDropDisabled:h,isCombineEnabled:f,snapshot:m,useClone:g,updateViewportMaxScroll:v,getContainerForClone:y}=t,b=q(()=>s.current,[]),x=q((P=null)=>{s.current=P},[]);q(()=>i.current,[]);const k=q((P=null)=>{i.current=P},[]),w=q(()=>{r()&&v({maxScroll:aN()})},[r,v]);bU({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:h,isCombineEnabled:f,ignoreContainerClipping:d,getDroppableRef:b});const S=ie(()=>ae.createElement(EU,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:P,data:A,animate:W})=>ae.createElement(SU,{placeholder:A,onClose:P,innerRef:k,animate:W,contextId:n,onTransitionEnd:w})),[n,w,t.placeholder,t.shouldAnimatePlaceholder,k]),E=ie(()=>({innerRef:x,placeholder:S,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,S,x]),_=g?g.dragging.draggableId:null,N=ie(()=>({droppableId:a,type:l,isUsingCloneFor:_}),[a,_,l]);function T(){if(!g)return null;const{dragging:P,render:A}=g,W=ae.createElement(EN,{draggableId:P.draggableId,index:P.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(se,B)=>A(se,B,P));return P1.createPortal(W,y())}return ae.createElement(Sy.Provider,{value:N},o(E,m),T())};function _U(){return document.body||D(),document.body}const bx={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:_U},TN=t=>{let e={...t},n;for(n in bx)t[n]===void 0&&(e={...e,[n]:bx[n]});return e},sf=(t,e)=>t===e.droppable.type,xx=(t,e)=>e.draggables[t.draggable.id],NU=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},n=qe(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),r=qe((i,o,a,l,c,u)=>{const d=c.descriptor.id;if(c.descriptor.droppableId===i){const m=u?{render:u,dragging:n(c.descriptor)}:null,g={isDraggingOver:a,draggingOverWith:a?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:m}}if(!o)return e;if(!l)return t;const f={isDraggingOver:a,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}});return(i,o)=>{const a=TN(o),l=a.droppableId,c=a.type,u=!a.isDropDisabled,d=a.renderClone;if($a(i)){const h=i.critical;if(!sf(c,h))return e;const f=xx(h,i.dimensions),m=Vt(i.impact)===l;return r(l,u,m,m,f,d)}if(i.phase==="DROP_ANIMATING"){const h=i.completed;if(!sf(c,h.critical))return e;const f=xx(h.critical,i.dimensions);return r(l,u,kN(h.result)===l,Vt(h.impact)===l,f,d)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const h=i.completed;if(!sf(c,h.critical))return e;const f=Vt(h.impact)===l,m=!!(h.impact.at&&h.impact.at.type==="COMBINE"),g=h.critical.droppable.id===l;return f?m?t:e:g?t:e}return e}},TU={updateViewportMaxScroll:$5},AU=__(NU,TU,(t,e,n)=>({...TN(n),...t,...e}),{context:xy,areStatePropsEqual:wN})(CU);function OU({ICON_SET:t,COLOR_SET:e,onCancel:n,onSave:r}){var d;const[s,i]=C.useState(""),[o,a]=C.useState(((d=t[0])==null?void 0:d.id)||"globe"),[l,c]=C.useState(e[0]||"bg-amber-500"),u=()=>{if(!s.trim())return;const h={id:crypto.randomUUID(),name:s.trim(),icon:o,color:l};r(h)};return p.jsx("div",{className:"fixed inset-0 bg-black/40 p-4 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-md border border-stone-200 shadow-xl space-y-5",children:[p.jsx("h3",{className:"text-lg font-bold text-stone-800",children:"Neue Gruppe"}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-stone-500 uppercase font-semibold",children:"Gruppenname"}),p.jsx("input",{className:"w-full mt-1 p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm",value:s,onChange:h=>i(h.target.value),placeholder:"z. B. Luft, Wolken, Kreativ ..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-stone-500 uppercase font-semibold",children:"Icon"}),p.jsx("div",{className:"grid grid-cols-6 gap-2 mt-2",children:t.map(h=>p.jsx("button",{type:"button",onClick:()=>a(h.id),className:`p-2 rounded-xl border flex items-center justify-center ${o===h.id?"bg-amber-100 border-amber-300":"bg-stone-50 border-stone-300 hover:bg-stone-100"}`,children:p.jsx("span",{className:"text-stone-700",children:h.icon})},h.id))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-stone-500 uppercase font-semibold",children:"Farbe"}),p.jsx("div",{className:"grid grid-cols-5 gap-2 mt-2",children:e.map(h=>p.jsx("button",{type:"button",onClick:()=>c(h),className:`h-8 rounded-xl border ${l===h?"border-amber-400 scale-95":"border-stone-300"} ${h}`},h))})]}),p.jsxs("div",{className:"flex gap-2 pt-2",children:[p.jsx("button",{type:"button",onClick:n,className:"flex-1 py-2 rounded-xl bg-stone-200 text-stone-700 font-semibold text-sm",children:"Abbrechen"}),p.jsx("button",{type:"button",onClick:u,className:"flex-1 py-2 rounded-xl bg-amber-600 text-white font-bold text-sm hover:bg-amber-700",children:"Erstellen"})]})]})})}function IU({group:t,ICON_SET:e,COLOR_SET:n,onCancel:r,onSave:s}){var h;const[i,o]=C.useState(t.name),[a,l]=C.useState(t.icon||((h=e[0])==null?void 0:h.id)||"globe"),[c,u]=C.useState(t.color||n[0]||"bg-amber-500"),d=()=>{if(!i.trim())return;const f={...t,name:i.trim(),icon:a,color:c};s(f)};return p.jsx("div",{className:"fixed inset-0 bg-black/40 p-4 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white p-6 rounded-2xl w-full max-w-md border border-stone-200 shadow-xl space-y-5",children:[p.jsx("h3",{className:"text-lg font-bold text-stone-800",children:"Gruppe bearbeiten"}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-stone-500 uppercase font-semibold",children:"Gruppenname"}),p.jsx("input",{className:"w-full mt-1 p-3 bg-stone-50 border border-stone-300 rounded-xl text-sm",value:i,onChange:f=>o(f.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-stone-500 uppercase font-semibold",children:"Icon"}),p.jsx("div",{className:"grid grid-cols-6 gap-2 mt-2",children:e.map(f=>p.jsx("button",{type:"button",onClick:()=>l(f.id),className:`p-2 rounded-xl border flex items-center justify-center ${a===f.id?"bg-amber-100 border-amber-300":"bg-stone-50 border-stone-300 hover:bg-stone-100"}`,children:p.jsx("span",{className:"text-stone-700",children:f.icon})},f.id))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-stone-500 uppercase font-semibold",children:"Farbe"}),p.jsx("div",{className:"grid grid-cols-5 gap-2 mt-2",children:n.map(f=>p.jsx("button",{type:"button",onClick:()=>u(f),className:`h-8 rounded-xl border ${c===f?"border-amber-400 scale-95":"border-stone-300"} ${f}`},f))})]}),p.jsxs("div",{className:"flex gap-2 pt-2",children:[p.jsx("button",{type:"button",onClick:r,className:"flex-1 py-2 rounded-xl bg-stone-200 text-stone-700 font-semibold text-sm",children:"Abbrechen"}),p.jsx("button",{type:"button",onClick:d,className:"flex-1 py-2 rounded-xl bg-amber-600 text-white font-bold text-sm hover:bg-amber-700",children:"Speichern"})]})]})})}const nm=[{id:"globe",icon:p.jsx(ba,{size:18})},{id:"droplets",icon:p.jsx(Zf,{size:18})},{id:"flame",icon:p.jsx(H1,{size:18})},{id:"sun",icon:p.jsx(ak,{size:18})},{id:"flower2",icon:p.jsx(W1,{size:18})},{id:"wind",icon:p.jsx(ck,{size:18})},{id:"cloud",icon:p.jsx(U1,{size:18})},{id:"leaf",icon:p.jsx(G1,{size:18})},{id:"tree-pine",icon:p.jsx(ep,{size:18})},{id:"mountain",icon:p.jsx(Q1,{size:18})},{id:"snowflake",icon:p.jsx(ik,{size:18})},{id:"moon-star",icon:p.jsx(Y1,{size:18})},{id:"palette",icon:p.jsx(Z1,{size:18})},{id:"brush",icon:p.jsx(B1,{size:18})},{id:"blocks",icon:p.jsx(L1,{size:18})},{id:"puzzle",icon:p.jsx(tk,{size:18})},{id:"music-4",icon:p.jsx(X1,{size:18})},{id:"baby",icon:p.jsx(D1,{size:18})},{id:"smile",icon:p.jsx(sk,{size:18})},{id:"users-round",icon:p.jsx(tg,{size:18})},{id:"book-open",icon:p.jsx($1,{size:18})},{id:"star",icon:p.jsx(eg,{size:18})},{id:"clover",icon:p.jsx(V1,{size:18})},{id:"rainbow",icon:p.jsx(nk,{size:18})}],wx=["bg-amber-400","bg-amber-500","bg-yellow-400","bg-yellow-500","bg-blue-400","bg-blue-500","bg-sky-400","bg-sky-500","bg-cyan-400","bg-cyan-500","bg-green-400","bg-green-500","bg-emerald-400","bg-emerald-500","bg-pink-400","bg-pink-500","bg-rose-400","bg-rose-500","bg-violet-400","bg-violet-500","bg-amber-700","bg-amber-800","bg-stone-600","bg-stone-700"],jU=t=>{var e;return((e=nm.find(n=>n.id===t))==null?void 0:e.icon)||p.jsx(ba,{size:18})},RU=(t,e,n)=>{const r=[...t],[s]=r.splice(e,1);return r.splice(n,0,s),r};function MU(){const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(!1),[o,a]=C.useState(null),[l,c]=C.useState(!1),[u,d]=C.useState(null),[h,f]=C.useState(""),m=C.useCallback(async()=>{r(!0);try{const k=await md();e(k||[])}catch(k){console.error("Gruppen laden fehlgeschlagen:",k)}finally{r(!1)}},[]);C.useEffect(()=>{m()},[m]);const g=async k=>{if(!k.destination)return;const w=RU(t,k.source.index,k.destination.index);e(w);try{await dj(w.map(S=>S.id))}catch(S){console.error("Reihenfolge speichern fehlgeschlagen:",S)}},v=async k=>{if(!k.is_event_group&&!(t.length<=1))try{const w=await hj(k.id),S=await fj(k.id);if(w===0&&S===0){await rv(k.id),e(E=>E.filter(_=>_.id!==k.id));return}d({groupId:k.id,name:k.name,childCount:w,teamCount:S}),f("")}catch(w){console.error("Lschen fehlgeschlagen:",w),alert("Fehler beim Lschen: "+w.message)}},y=async()=>{const{groupId:k}=u;i(!0);try{await pj(k,h),await mj(k,h),await rv(k),e(w=>w.filter(S=>S.id!==k)),d(null),f("")}catch(w){console.error("Migration fehlgeschlagen:",w),alert("Fehler bei der Migration: "+w.message)}finally{i(!1)}},b=async k=>{try{const w=await cj({...k,position:t.length});e(S=>[...S,w]),c(!1)}catch(w){console.error("Gruppe erstellen fehlgeschlagen:",w),alert("Fehler beim Erstellen: "+w.message)}},x=async k=>{try{await uj(k.id,k),e(w=>w.map(S=>S.id===k.id?{...S,...k}:S)),a(null)}catch(w){console.error("Gruppe aktualisieren fehlgeschlagen:",w),alert("Fehler beim Aktualisieren: "+w.message)}};return n?p.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex justify-center",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:24})}):p.jsxs("div",{className:"space-y-6",children:[p.jsx("h2",{className:"text-lg font-bold text-stone-800",children:"Gruppenverwaltung"}),p.jsx("p",{className:"text-sm text-stone-500",children:"Gruppen hinzufgen, bearbeiten, sortieren oder lschen."}),p.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-xl font-semibold text-sm active:scale-95",children:[p.jsx(Us,{size:16}),"Gruppe hinzufgen"]}),p.jsx(V6,{onDragEnd:g,children:p.jsx(AU,{droppableId:"groups",children:k=>p.jsxs("div",{className:"space-y-3 pt-2",ref:k.innerRef,...k.droppableProps,children:[t.map((w,S)=>p.jsx(lU,{draggableId:w.id,index:S,children:E=>p.jsxs("div",{ref:E.innerRef,...E.draggableProps,className:"bg-white p-4 rounded-2xl border border-stone-200 shadow-sm flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{...E.dragHandleProps,className:"cursor-grab text-stone-400 hover:text-stone-600",children:p.jsx(fA,{size:18})}),p.jsx("div",{className:`w-2 h-10 rounded-full ${w.color}`}),p.jsx("div",{className:"text-stone-700",children:jU(w.icon)}),p.jsx("div",{children:p.jsx("p",{className:"font-semibold text-sm text-stone-800",children:w.name})})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[!w.is_event_group&&p.jsx("button",{onClick:()=>a(w),className:"p-2 bg-stone-100 border border-stone-200 rounded-lg text-stone-600 hover:bg-stone-200",children:p.jsx(AA,{size:14})}),!w.is_event_group&&p.jsx("button",{onClick:()=>v(w),disabled:t.length<=1,className:`p-2 rounded-lg border ${t.length<=1?"bg-stone-100 border-stone-200 text-stone-300 cursor-not-allowed":"bg-red-50 border-red-200 text-red-600 hover:bg-red-100"}`,children:p.jsx(_n,{size:14})})]})]})},w.id)),k.placeholder]})})}),l&&p.jsx(OU,{ICON_SET:nm,COLOR_SET:wx,onCancel:()=>c(!1),onSave:b}),o&&p.jsx(IU,{group:o,ICON_SET:nm,COLOR_SET:wx,onCancel:()=>a(null),onSave:x}),u&&p.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:p.jsxs("div",{className:"bg-white p-6 rounded-2xl max-w-md w-full border border-stone-200 shadow-xl space-y-5",children:[p.jsx("h3",{className:"font-bold text-stone-800 text-lg",children:"Gruppe lschen  Wohin verschieben?"}),p.jsxs("p",{className:"text-sm text-stone-600",children:["Gruppe ",p.jsx("strong",{children:u.name})," wird noch verwendet."]}),u.childCount>0&&p.jsxs("p",{className:"text-sm text-stone-700",children:[" ",u.childCount," Kind(er)"]}),u.teamCount>0&&p.jsxs("p",{className:"text-sm text-stone-700",children:[" ",u.teamCount," Teammitglied(er)"]}),p.jsxs("select",{value:h,onChange:k=>f(k.target.value),className:"w-full p-3 rounded-xl bg-stone-50 border border-stone-300 text-sm",children:[p.jsx("option",{value:"",children:"Zielgruppe whlen"}),t.filter(k=>k.id!==u.groupId).map(k=>p.jsx("option",{value:k.id,children:k.name},k.id))]}),p.jsxs("div",{className:"flex gap-2 pt-1",children:[p.jsx("button",{onClick:()=>{d(null),f("")},className:"flex-1 py-2 rounded-xl bg-stone-200 text-stone-700 font-semibold",children:"Abbrechen"}),p.jsx("button",{onClick:y,disabled:!h,className:`flex-1 py-2 rounded-xl font-bold ${h?"bg-amber-600 text-white hover:bg-amber-700":"bg-stone-300 text-stone-500"}`,children:"Verschieben & Lschen"})]})]})})]})}function PU({user:t,onBack:e}){const[n,r]=C.useState("home"),s=()=>{if(n==="home"){e&&e();return}r("home")},i=()=>{switch(n){case"home":return p.jsx(rB,{onNavigate:r});case"users":return p.jsx(iB,{onBack:s});case"codes":return p.jsx(oB,{onBack:s});case"facility":return p.jsx(aB,{onBack:s});case"groups":return p.jsx(MU,{onBack:s});default:return null}};return p.jsxs("div",{className:"space-y-6",children:[n!=="home"&&p.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-stone-500 text-sm",children:[p.jsx(eo,{size:18}),"Zurck"]}),i()]})}class DU extends ae.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?p.jsxs("div",{className:"p-10 text-center text-stone-600",children:[p.jsx("h2",{className:"text-xl font-bold mb-2",children:"Ein Fehler ist aufgetreten"}),p.jsx("p",{className:"text-sm",children:"Die App wurde wiederhergestellt."})]}):this.props.children}}const LU=({user:t})=>{if(!t)return null;const e=t.name||t.username||"";let n=null;return t.role==="team"&&(n="Team"),t.role==="admin"&&(n="Leitung"),p.jsx("header",{className:"fixed top-0 left-0 right-0 z-40 bg-white border-b border-stone-200",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-9 h-9 rounded-full bg-amber-500 flex items-center justify-center",children:p.jsxs("div",{className:"flex gap-[2px] -translate-y-[1px]",children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})]})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-bold text-stone-900",children:"Montessori Kinderhaus"}),e&&p.jsx("p",{className:"text-xs text-stone-500 truncate max-w-[200px]",children:e})]})]}),n&&p.jsx("span",{className:"px-3 py-1 rounded-full bg-black text-xs text-white font-semibold",children:n})]})})},ei=({icon:t,label:e,active:n,onClick:r})=>p.jsxs("button",{onClick:r,className:"flex flex-col items-center justify-center flex-1 py-1 gap-1 transition-colors "+(n?"text-amber-600":"text-stone-500 hover:text-stone-700"),children:[p.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:t}),p.jsx("span",{className:"text-[11px] font-medium",children:e})]}),$U=({activeTab:t,setActiveTab:e,isAdmin:n})=>p.jsx("footer",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white border-t border-stone-200",children:p.jsx("div",{className:"max-w-4xl mx-auto px-2",children:p.jsxs("div",{className:"flex justify-between",children:[p.jsx(ei,{icon:p.jsx(pA,{size:20}),label:"News",active:t==="news",onClick:()=>e("news")}),p.jsx(ei,{icon:p.jsx(Dc,{size:20}),label:"Gruppe",active:t==="group",onClick:()=>e("group")}),p.jsx(ei,{icon:p.jsx(PA,{size:20}),label:"Essen",active:t==="food",onClick:()=>e("food")}),p.jsx(ei,{icon:p.jsx(Xm,{size:20}),label:"Meldungen",active:t==="absence",onClick:()=>e("absence")}),p.jsx(ei,{icon:p.jsx(lk,{size:20}),label:"Profil",active:t==="profile",onClick:()=>e("profile")}),n&&p.jsx(ei,{icon:p.jsx(_A,{size:20}),label:"Admin",active:t==="admin",onClick:()=>e("admin")})]})})});async function kx(t){const{data:e,error:n}=await L.from("profiles").select(`
      id,
      full_name,
      role,
      primary_group,
      facility_id,
      must_reset_password,
      children (
        id,
        first_name,
        birthday,
        notes,
        group_id
      )
    `).eq("id",t).single();if(n)throw n;return{id:e.id,name:e.full_name,role:e.role,primaryGroup:e.primary_group,facilityId:e.facility_id,mustResetPassword:e.must_reset_password||!1,children:(e.children||[]).map(r=>({id:r.id,name:r.first_name,group:r.group_id,birthday:r.birthday,notes:r.notes}))}}function BU(){const[t,e]=C.useState(null),[n,r]=C.useState(null),[s,i]=C.useState("news"),[o,a]=C.useState(!0),[l,c]=C.useState("home");C.useEffect(()=>{let b=!0;async function x(){console.log("[App] initSession gestartet"),console.log("[App] Supabase Client vorhanden:",!!L),console.log("[App] Supabase Auth vorhanden:",!!(L!=null&&L.auth));const w="sb-izpjmvgtrwxjmucebfyy-auth-token",S=localStorage.getItem(w);console.log("[App] Gespeicherte Session vorhanden:",!!S);try{console.log("[App] Teste Supabase-Verbindung...");const E=await fetch("https://izpjmvgtrwxjmucebfyy.supabase.co/rest/v1/",{method:"HEAD",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6cGptdmd0cnd4am11Y2ViZnl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzNzk3NjksImV4cCI6MjA4MDk1NTc2OX0.r9mcolZ5zCMmwjIO3mStZot8YUId_lbxjrvlfxJ_k3s"}});console.log("[App] Supabase erreichbar:",E.ok,"Status:",E.status)}catch(E){console.error("[App] Supabase NICHT erreichbar:",E.message)}try{console.log("[App] Rufe getSession auf...");const E=new Promise((A,W)=>setTimeout(()=>W(new Error("getSession timeout")),5e3));console.log("[App] Promise.race startet...");const _=L.auth.getSession();console.log("[App] getSession Promise erstellt:",!!_);const N=await Promise.race([_,E]);console.log("[App] Promise.race abgeschlossen");const{data:{session:T},error:P}=N;if(console.log("[App] getSession Ergebnis:",{session:!!T,error:P}),T!=null&&T.user&&b){console.log("[App] Session gefunden, lade Profil fr User:",T.user.id);try{const A=await kx(T.user.id);console.log("[App] Profil geladen:",A),A.mustResetPassword?r(A):e(A)}catch(A){console.error("[App] Profil laden fehlgeschlagen:",A),await L.auth.signOut()}}else console.log("[App] Keine Session gefunden")}catch(E){if(console.error("[App] Session restore failed",E),E.message==="getSession timeout"&&S){console.log("[App] Timeout - lsche korrupte Session und versuche erneut..."),localStorage.removeItem(w);try{const{data:{session:_}}=await L.auth.getSession();console.log("[App] Zweiter Versuch erfolgreich:",!!_)}catch(_){console.error("[App] Zweiter Versuch fehlgeschlagen:",_)}}}finally{console.log("[App] initSession beendet, setze loading=false"),b&&a(!1)}}x();const{data:{subscription:k}}=L.auth.onAuthStateChange(async(w,S)=>{if(w==="SIGNED_OUT")e(null),r(null);else if(w==="SIGNED_IN"&&(S!=null&&S.user))try{const E=await kx(S.user.id);E.mustResetPassword?(r(E),e(null)):(e(E),r(null))}catch(E){console.error("Profil laden fehlgeschlagen",E)}});return()=>{b=!1,k.unsubscribe()}},[]),C.useEffect(()=>{const b=()=>i("admin");return window.addEventListener("openAdminViaSettings",b),()=>window.removeEventListener("openAdminViaSettings",b)},[]),C.useEffect(()=>{s!=="profile"&&l!=="home"&&c("home")},[s,l]);const u=b=>{b.mustResetPassword?(r(b),e(null)):(e(b),r(null))},d=async()=>{try{await L.auth.signOut()}catch(b){console.error("Logout failed",b)}e(null),r(null)},h=b=>{r(null),e(b)},f=b=>{e(b)},m=async()=>{if(t)try{await L.from("children").delete().eq("user_id",t.id),await L.from("profiles").delete().eq("id",t.id),await d()}catch(b){console.error("Account lschen fehlgeschlagen",b)}};if(o)return p.jsx("div",{className:"h-screen bg-[#fcfaf7] flex items-center justify-center",children:p.jsx(ht,{className:"animate-spin text-amber-500",size:40})});if(!t&&n)return p.jsx(lj,{user:n,onPasswordUpdated:h});if(!t&&!n)return p.jsx(aj,{onLogin:u});const g=t.role==="admin",v=()=>{switch(l){case"children":return p.jsx(Q$,{user:t,isTeam:t.role==="team",onBack:()=>c("home"),onUpdateUser:f});case"notifications":return p.jsx(Z$,{user:t,onBack:()=>c("home")});case"facility":return p.jsx(eB,{user:t,onBack:()=>c("home")});case"security":return p.jsx(nB,{user:t,onBack:()=>c("home"),onUpdateUser:f,onDeleteAccount:m});default:return p.jsx(K$,{user:t,onNavigate:c,onLogout:d})}};let y=null;return s==="news"?y=p.jsx(_$,{user:t}):s==="group"?y=p.jsx(j$,{user:t}):s==="food"?y=p.jsx(z$,{isAdmin:t.role==="admin"||t.role==="team"}):s==="absence"?t.role==="team"?y=p.jsx(q$,{user:t}):t.role==="admin"?y=p.jsx(v_,{user:t}):y=p.jsx(W$,{user:t}):s==="profile"?y=v():s==="admin"&&g?y=p.jsx(PU,{user:t}):y=p.jsx("div",{className:"p-4 text-sm text-stone-500",children:"Unbekannter Tab."}),p.jsxs("div",{className:"min-h-screen flex flex-col bg-[#fcfaf7]",children:[p.jsx(LU,{user:t}),p.jsx("main",{className:"flex-1 overflow-y-auto pt-20 pb-20",children:p.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:p.jsx(DU,{children:y})})}),p.jsx($U,{activeTab:s,setActiveTab:i,isAdmin:g})]})}of.createRoot(document.getElementById("root")).render(p.jsx(ae.StrictMode,{children:p.jsx(BU,{})}));
